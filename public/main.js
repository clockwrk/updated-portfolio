"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},app=angular.module("myApp",["ui.router","ui.bootstrap","ngAnimate","angular-typed"]);app.config(["$stateProvider","$urlRouterProvider","$locationProvider",function($stateProvider,$urlRouterProvider,$locationProvider){$locationProvider.html5Mode({enabled:!0,requireBase:!1}),$urlRouterProvider.otherwise("/")}]),app.directive("navbar",["$rootScope","$state","authFactory",function($rootScope,$state,authFactory){return{restrict:"E",scope:{},templateUrl:"js/navBar/navbar.html",link:function(scope){scope.showLink=function(link){return!link.isAdmin&&("admin"===link.state||"login"===link.state)},scope.isLoggedIn=function(){return authFactory.isAdmin()},scope.links=[{label:"Home",state:"home"},{label:"Projects",state:"projects"},{label:"About Me",state:"about"}]}}}]),app.config(["$stateProvider",function($stateProvider){$stateProvider.state("about",{url:"/about",templateUrl:"/js/about/about.html",authenticate:!1})}]),app.controller("adminController",["$scope","$state","adminFactory","allProjects","authFactory",function($scope,$state,adminFactory,allProjects,authFactory){$scope.submitProject=function(project){adminFactory.postProject(project),$scope.project=null},$scope.allProjects=allProjects||[{id:0,name:"empty",deploy:"empty",gitHub:"empty"}],$scope.data={availableProjects:$scope.allProjects,selectedProject:{id:0,name:"empty",deploy:"empty",gitHub:"empty",description:"empty"}},$scope.selectedprojectChanged=function(){$scope.currentProject=$scope.selectedItem},$scope.logOut=function(){authFactory.logOut(),$state.go("home")}}]),app.directive("projectEdit",["projectFactory",function(projectFactory){return{restrict:"E",scope:{project:"=project"},templateUrl:"adminEdit.html"}}]),app.factory("adminFactory",["$http",function($http){return{postProject:function(project){return $http.post("/api/project",project).then(function(response){return response.data}).catch()},getAllProjects:function(){return $http.get("/api/project").then(function(response){return response.data}).catch()}}}]),app.config(["$stateProvider",function($stateProvider){$stateProvider.state("admin",{url:"/admin",templateUrl:"/js/admin/admin.html",controller:"adminController",authenticate:!0,resolve:{allProjects:["adminFactory",function(adminFactory){return adminFactory.getAllProjects()}]}})}]),app.controller("contactController",["$scope","posts","feedBackFactory",function($scope,posts,feedBackFactory){$scope.posts=posts,$scope.getReplies=feedBackFactory.getReplies,$scope.postReply=function(postId,content){var replyInfo={postId:postId,content:content};feedBackFactory.postReplY(replyInfo)},$scope.submitForm=function(data){feedBackFactory.postComment(data).then(function(newPost){$scope.posts[$scope.posts.length]=newPost}).catch(),$scope.user=null,$scope.userForm.$setPristine(!0)},$scope.clear=function(){$scope.user=null,$scope.userForm.$setPristine(!0)},$scope.submit=function(){$scope.message&&$scope.email&&$scope.name&&controllerFactory.sendMessage($scope.name,$scope.email,$scope.message)}}]),app.directive("replies",function(){return console.log("post directive"),{restrict:"E",scope:{post:"="},templateUrl:"js/contact/template/replyView.html",link:function(scope,element,attrs){scope.replies=[{label:"Home",state:"home"},{label:"Projects",state:"projects"},{label:"About Me",state:"about"},{label:"Contact Me",state:"contact"}]}}}),app.factory("feedBackFactory",["$http",function($http){console.log("In the feeback factory");var feedBackFactory={};return feedBackFactory.getPosts=function(){return $http.get("/api/comment").then(function(response){return console.log("getting comments"),response.data}).catch()},feedBackFactory.postComment=function(content){return console.log("Posting comment"),$http.post("/api/comment",content).then(function(succesfulComment){return console.log(succesfulComment),succesfulComment.data}).catch()},feedBackFactory.getReplies=function(commentId){return $http.get("/api/reply/"+commentId).then(function(replies){return console.log("got comments"),replies.data}).catch()},feedBackFactory.postReplY=function(message){return console.log("running post reply",message),$http.post("/api/reply/",{post_id:parseInt(message.postId.postId),content:message.content.content}).then(function(postedComment){return postedComment.data})},feedBackFactory}]),app.config(["$stateProvider",function($stateProvider){$stateProvider.state("contact",{url:"/contact",templateUrl:"/js/contact/contact.html",controller:"contactController",authenticate:!1,resolve:{posts:["feedBackFactory",function(feedBackFactory){return console.log("invoking feedBackFactory"),feedBackFactory.getPosts()}]}})}]),console.log("bar ctrl loaded"),app.controller("BarCtrl",["$scope","$timeout",function($scope,$timeout){$scope.timeInMs=0,$timeout(function countUp(){$scope.timeInMs+=500,$timeout(countUp,500)},500)}]),app.config(["$stateProvider",function($stateProvider){$stateProvider.state("home",{url:"/",templateUrl:"/js/home/home.html",controller:"BarCtrl",authenticate:!1})}]),app.controller("loginController",["$scope","$state","authFactory","$location",function($scope,$state,authFactory,$location){$scope.login=function(){var loginInfo={name:$scope.username,password:$scope.password};authFactory.login(loginInfo).then(function(result){console.log(result),$state.go("home",{},{reload:!0}),$location.path("/")}).catch()}}]),app.config(["$stateProvider",function($stateProvider){$stateProvider.state("login",{url:"/login",templateUrl:"/js/login/login.html",controller:"loginController",authenticate:!1})}]),app.controller("authController",["$scope","authFactory",function($scope,authFactory){$scope.isAdmin=authFactory.isAdmin()}]),app.factory("authFactory",["$http","$state","$rootScope",function($http,$state,$rootScope){return{isAdmin:function(){return!!$rootScope.admin},login:function(loginInfo){return $http.get("/api/authentication/"+loginInfo.name+"/"+loginInfo.password).then(function(authenticationDecision){return authenticationDecision.data?$rootScope.admin=!0:$rootScope.admin=!1,authenticationDecision}).catch()},logOut:function(){$rootScope.admin=null}}}]),app.controller("projectController",["$scope","allProjects",function($scope,allProjects){$scope.projects=allProjects}]),app.controller("singleProjectController",["$scope","projectFactory","currentProject","$sce",function($scope,projectFactory,currentProject,$sce){$scope.currentProject=currentProject,$scope.trustSrc=function(src){return $sce.trustAsResourceUrl(src)},$scope.movie={src:$scope.currentProject.videoLink},$scope.hasVideoLink=function(){return!!currentProject.videoLink}}]),app.directive("projectTile",function(){return{restrict:"E",scope:{project:"="},templateUrl:"js/projects/singleProject/singleProjectTile.html"}}),app.factory("projectFactory",["$http",function($http){var getData=function(response){return response.data};return{getAllProjects:function(){return $http.get("/api/project").then(getData).catch()},getSingleProject:function(projectID){return $http.get("/api/project/"+projectID).then(getData).catch()},postProject:function(project){return $http.post("/api/project",project).then(getData).catch()},updateProject:function(updatedProject){return $http.put("api/project",updatedProject).then(getData).catch()}}}]),app.config(["$stateProvider",function($stateProvider){$stateProvider.state("projects",{url:"/projects",templateUrl:"/js/projects/projects.html",controller:"projectController",authenticate:!1,resolve:{allProjects:["projectFactory",function(projectFactory){return projectFactory.getAllProjects()}]}}),$stateProvider.state("singleProject",{url:"/projects/:id",templateUrl:"/js/projects/singleProject/singleProject.html",controller:"singleProjectController",authenticate:!1,resolve:{currentProject:["projectFactory","$stateParams",function(projectFactory,$stateParams){return projectFactory.getSingleProject($stateParams.id)}]}})}]);var gulp=require("gulp");rename=require("gulp-rename"),uglify=require("gulp-uglify"),gulp.task("compress",function(){gulp.src("js/*.js").pipe(uglify()).pipe(rename("typed.min.js")).pipe(gulp.dest("dist"))}),gulp.task("default",["compress"]),function(){console.log("ab.Typeit about to"),angular.module("ab.Typeit",[]).directive("abTypeit",function(){return coneole.log("running the wrapper"),{restrict:"A",scope:{typeitStrings:"=abTypeit",typeitLoop:"=",typeitLoopDelay:"=",typeitBreakLines:"=",typeitSpeed:"=",typeitLifeLike:"=",typeitCursor:"=",typeitCursorSpeed:"=",typeitStartDelay:"=",typeitBreakDelay:"="},controller:["$scope","$element","$attrs",function($scope,$element,$attrs){var typeItElement=$($element);try{typeItElement.typeIt({strings:$scope.typeitStrings,loop:$scope.typeitLoop,loopDelay:$scope.typeitLoopDelay,breakLines:$scope.typeitBreakLines,speed:$scope.typeitSpeed,lifeLike:$scope.typeitLifeLike,cursor:$scope.typeitCursor,cursorSpeed:$scope.typeitCursorSpeed,startDelay:$scope.typeitStartDelay,breakDelay:$scope.typeitBreakDelay})}catch(e){console.error("OH NO! angular-typeit requires typeit.js on your page - do you have it loaded?")}}]}})}(),window.onload=function(){$(".developer").typed({strings:["Front-end","Back-end","Fullstack","Software","JavaScript","AngularJS","UI/UX"],typeSpeed:250,loop:!0,cursorSpeed:100,lifeLike:!0,curser:!0,deleteSpeed:1e3})},function(t){var s=function(_s,e){this.el=t(_s),this.options=t.extend({},t.fn.typed.defaults,e),this.isInput=this.el.is("input"),this.attr=this.options.attr,this.showCursor=!this.isInput&&this.options.showCursor,this.elContent=this.attr?this.el.attr(this.attr):this.el.text(),this.contentType=this.options.contentType,this.typeSpeed=this.options.typeSpeed,this.startDelay=this.options.startDelay,this.backSpeed=this.options.backSpeed,this.backDelay=this.options.backDelay,this.stringsElement=this.options.stringsElement,this.strings=this.options.strings,this.strPos=0,this.arrayPos=0,this.stopNum=0,this.loop=this.options.loop,this.loopCount=this.options.loopCount,this.curLoop=0,this.stop=!1,this.cursorChar=this.options.cursorChar,this.shuffle=this.options.shuffle,this.sequence=[],this.build()};s.prototype={constructor:s,init:function(){var t=this;t.timeout=setTimeout(function(){for(var s=0;s<t.strings.length;++s)t.sequence[s]=s;t.shuffle&&(t.sequence=t.shuffleArray(t.sequence)),t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos)},t.startDelay)},build:function(){var s=this;if(this.showCursor===!0&&(this.cursor=t('<span class="typed-cursor">'+this.cursorChar+"</span>"),this.el.after(this.cursor)),this.stringsElement){this.strings=[],this.stringsElement.hide(),console.log(this.stringsElement.children());var e=this.stringsElement.children();t.each(e,function(e,i){s.strings.push(t(i).html())})}this.init()},typewrite:function(t,s){if(this.stop!==!0){var e=Math.round(70*Math.random())+this.typeSpeed,i=this;i.timeout=setTimeout(function(){var e=0,r=t.substr(s);if("^"===r.charAt(0)){var o=1;/^\^\d+/.test(r)&&(r=/\d+/.exec(r)[0],o+=r.length,e=parseInt(r)),t=t.substring(0,s)+t.substring(s+o)}if("html"===i.contentType){var n=t.substr(s).charAt(0);if("<"===n||"&"===n){var a="",h="";for(h="<"===n?">":";";t.substr(s+1).charAt(0)!==h&&(a+=t.substr(s).charAt(0),!(++s+1>t.length)););s++,a+=h}}i.timeout=setTimeout(function(){if(s===t.length){if(i.options.onStringTyped(i.arrayPos),i.arrayPos===i.strings.length-1&&(i.options.callback(),i.curLoop++,i.loop===!1||i.curLoop===i.loopCount))return;i.timeout=setTimeout(function(){i.backspace(t,s)},i.backDelay)}else{0===s&&i.options.preStringTyped(i.arrayPos);var e=t.substr(0,s+1);i.attr?i.el.attr(i.attr,e):i.isInput?i.el.val(e):"html"===i.contentType?i.el.html(e):i.el.text(e),s++,i.typewrite(t,s)}},e)},e)}},backspace:function(t,s){if(this.stop!==!0){var e=Math.round(70*Math.random())+this.backSpeed,i=this;i.timeout=setTimeout(function(){if("html"===i.contentType&&">"===t.substr(s).charAt(0)){for(var e="";"<"!==t.substr(s-1).charAt(0)&&(e-=t.substr(s).charAt(0),!(0>--s)););s--,e+="<"}var r=t.substr(0,s);i.attr?i.el.attr(i.attr,r):i.isInput?i.el.val(r):"html"===i.contentType?i.el.html(r):i.el.text(r),s>i.stopNum?(s--,i.backspace(t,s)):s<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.shuffle&&(i.sequence=i.shuffleArray(i.sequence)),i.init()):i.typewrite(i.strings[i.sequence[i.arrayPos]],s))},e)}},shuffleArray:function(t){var s,e,i=t.length;if(i)for(;--i;)e=Math.floor(Math.random()*(i+1)),s=t[e],t[e]=t[i],t[i]=s;return t},reset:function(){var t=this;clearInterval(t.timeout),this.el.attr("id"),this.el.empty(),void 0!==this.cursor&&this.cursor.remove(),this.strPos=0,this.arrayPos=0,this.curLoop=0,this.options.resetCallback()}},t.fn.typed=function(e){return this.each(function(){var i=t(this),r=i.data("typed"),o="object"==(void 0===e?"undefined":_typeof(e))&&e;r&&r.reset(),i.data("typed",r=new s(this,o)),"string"==typeof e&&r[e]()})},t.fn.typed.defaults={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,shuffle:!1,backDelay:500,loop:!1,loopCount:!1,showCursor:!0,cursorChar:"|",attr:null,contentType:"html",callback:function(){},preStringTyped:function(){},onStringTyped:function(){},resetCallback:function(){}}}(window.jQuery),function($){var Typed=function(el,options){this.el=$(el),this.options=$.extend({},$.fn.typed.defaults,options),this.isInput=this.el.is("input"),this.attr=this.options.attr,this.showCursor=!this.isInput&&this.options.showCursor,this.elContent=this.attr?this.el.attr(this.attr):this.el.text(),this.contentType=this.options.contentType,this.typeSpeed=this.options.typeSpeed,this.startDelay=this.options.startDelay,this.backSpeed=this.options.backSpeed,this.backDelay=this.options.backDelay,this.stringsElement=this.options.stringsElement,this.strings=this.options.strings,this.strPos=0,this.arrayPos=0,this.stopNum=0,this.loop=this.options.loop,this.loopCount=this.options.loopCount,this.curLoop=0,this.stop=!1,this.cursorChar=this.options.cursorChar,this.shuffle=this.options.shuffle,this.sequence=[],this.build()};Typed.prototype={constructor:Typed,init:function(){var self=this;self.timeout=setTimeout(function(){for(var i=0;i<self.strings.length;++i)self.sequence[i]=i;self.shuffle&&(self.sequence=self.shuffleArray(self.sequence)),self.typewrite(self.strings[self.sequence[self.arrayPos]],self.strPos)},self.startDelay)},build:function(){var self=this;if(this.showCursor===!0&&(this.cursor=$('<span class="typed-cursor">'+this.cursorChar+"</span>"),this.el.after(this.cursor)),this.stringsElement){this.strings=[],this.stringsElement.hide(),console.log(this.stringsElement.children());var strings=this.stringsElement.children();$.each(strings,function(key,value){self.strings.push($(value).html())})}this.init()},typewrite:function(curString,curStrPos){if(this.stop!==!0){var humanize=Math.round(70*Math.random())+this.typeSpeed,self=this;self.timeout=setTimeout(function(){var charPause=0,substr=curString.substr(curStrPos);if("^"===substr.charAt(0)){var skip=1;/^\^\d+/.test(substr)&&(substr=/\d+/.exec(substr)[0],skip+=substr.length,charPause=parseInt(substr)),curString=curString.substring(0,curStrPos)+curString.substring(curStrPos+skip)}if("html"===self.contentType){var curChar=curString.substr(curStrPos).charAt(0);if("<"===curChar||"&"===curChar){var tag="",endTag="";for(endTag="<"===curChar?">":";";curString.substr(curStrPos+1).charAt(0)!==endTag&&(tag+=curString.substr(curStrPos).charAt(0),!(++curStrPos+1>curString.length)););curStrPos++,tag+=endTag}}self.timeout=setTimeout(function(){if(curStrPos===curString.length){if(self.options.onStringTyped(self.arrayPos),self.arrayPos===self.strings.length-1&&(self.options.callback(),self.curLoop++,self.loop===!1||self.curLoop===self.loopCount))return;self.timeout=setTimeout(function(){self.backspace(curString,curStrPos)},self.backDelay)}else{0===curStrPos&&self.options.preStringTyped(self.arrayPos);var nextString=curString.substr(0,curStrPos+1);self.attr?self.el.attr(self.attr,nextString):self.isInput?self.el.val(nextString):"html"===self.contentType?self.el.html(nextString):self.el.text(nextString),curStrPos++,self.typewrite(curString,curStrPos)}},charPause)},humanize)}},backspace:function(curString,curStrPos){if(this.stop!==!0){var humanize=Math.round(70*Math.random())+this.backSpeed,self=this;self.timeout=setTimeout(function(){if("html"===self.contentType&&">"===curString.substr(curStrPos).charAt(0)){for(var tag="";"<"!==curString.substr(curStrPos-1).charAt(0)&&(tag-=curString.substr(curStrPos).charAt(0),!(--curStrPos<0)););curStrPos--,tag+="<"}var nextString=curString.substr(0,curStrPos);self.attr?self.el.attr(self.attr,nextString):self.isInput?self.el.val(nextString):"html"===self.contentType?self.el.html(nextString):self.el.text(nextString),curStrPos>self.stopNum?(curStrPos--,self.backspace(curString,curStrPos)):curStrPos<=self.stopNum&&(self.arrayPos++,self.arrayPos===self.strings.length?(self.arrayPos=0,self.shuffle&&(self.sequence=self.shuffleArray(self.sequence)),self.init()):self.typewrite(self.strings[self.sequence[self.arrayPos]],curStrPos))},humanize)}},shuffleArray:function(array){var tmp,current,top=array.length;if(top)for(;--top;)current=Math.floor(Math.random()*(top+1)),tmp=array[current],array[current]=array[top],array[top]=tmp;return array},reset:function(){var self=this;clearInterval(self.timeout);this.el.attr("id");this.el.empty(),void 0!==this.cursor&&this.cursor.remove(),this.strPos=0,this.arrayPos=0,this.curLoop=0,this.options.resetCallback()}},$.fn.typed=function(option){return this.each(function(){var $this=$(this),data=$this.data("typed"),options="object"==(void 0===option?"undefined":_typeof(option))&&option;data&&data.reset(),$this.data("typed",data=new Typed(this,options)),"string"==typeof option&&data[option]()})},$.fn.typed.defaults={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,shuffle:!1,backDelay:500,loop:!1,loopCount:!1,showCursor:!0,cursorChar:"|",attr:null,contentType:"html",callback:function(){},preStringTyped:function(){},onStringTyped:function(){},resetCallback:function(){}}}(window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJhcHAuanMiLCJhYm91dC9hYm91dC5zdGF0ZS5qcyIsImFkbWluL2FkbWluLmNvbnRyb2xsZXIuanMiLCJhZG1pbi9hZG1pbi5kaXJlY3RpdmUuanMiLCJhZG1pbi9hZG1pbi5mYWN0b3J5LmpzIiwiYWRtaW4vYWRtaW4uc3RhdGUuanMiLCJjb250YWN0L2NvbnRhY3QuY29udHJvbGxlci5qcyIsImNvbnRhY3QvY29udGFjdC5kaXJlY3RpdmVzLmpzIiwiY29udGFjdC9jb250YWN0LmZhY3RvcnkuanMiLCJjb250YWN0L2NvbnRhY3Quc3RhdGUuanMiLCJob21lL2hvbWUuY29udHJvbGxlci5qcyIsImhvbWUvaG9tZS5zdGF0ZS5qcyIsImxvZ2luL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJsb2dpbi9sb2dpbi5zdGF0ZS5qcyIsImF1dGgvYXV0aC5jb250cm9sbGVyLmpzIiwiYXV0aC9hdXRoLmZhY3RvcnkuanMiLCJwcm9qZWN0cy9wcm9qZWN0cy5jb250cm9sbGVyLmpzIiwicHJvamVjdHMvcHJvamVjdHMuZGlyZWN0aXZlcy5qcyIsInByb2plY3RzL3Byb2plY3RzLmZhY3RvcnkuanMiLCJwcm9qZWN0cy9wcm9qZWN0cy5zdGF0ZS5qcyIsInR5cGVkLmpzLW1hc3Rlci9ndWxwZmlsZS5qcyIsInR5cGVJdC9hbmd1bGFyLXR5cGVJdC5qcyIsInR5cGVJdC9pbmRleC5qcyIsInR5cGVkLmpzLW1hc3Rlci9kaXN0L3R5cGVkLm1pbi5qcyIsInR5cGVkLmpzLW1hc3Rlci9qcy90eXBlZC5qcyJdLCJuYW1lcyI6WyJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJvYmoiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiZW5hYmxlZCIsInJlcXVpcmVCYXNlIiwib3RoZXJ3aXNlIiwiZGlyZWN0aXZlIiwiJHJvb3RTY29wZSIsIiRzdGF0ZSIsImF1dGhGYWN0b3J5IiwicmVzdHJpY3QiLCJzY29wZSIsInRlbXBsYXRlVXJsIiwibGluayIsInNob3dMaW5rIiwiaXNBZG1pbiIsInN0YXRlIiwiaXNMb2dnZWRJbiIsImxpbmtzIiwibGFiZWwiLCJ1cmwiLCJhdXRoZW50aWNhdGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiYWRtaW5GYWN0b3J5IiwiYWxsUHJvamVjdHMiLCJzdWJtaXRQcm9qZWN0IiwicHJvamVjdCIsInBvc3RQcm9qZWN0IiwiaWQiLCJuYW1lIiwiZGVwbG95IiwiZ2l0SHViIiwiZGF0YSIsImF2YWlsYWJsZVByb2plY3RzIiwic2VsZWN0ZWRQcm9qZWN0IiwiZGVzY3JpcHRpb24iLCJzZWxlY3RlZHByb2plY3RDaGFuZ2VkIiwiY3VycmVudFByb2plY3QiLCJzZWxlY3RlZEl0ZW0iLCJsb2dPdXQiLCJnbyIsInByb2plY3RGYWN0b3J5IiwiZmFjdG9yeSIsIiRodHRwIiwicG9zdCIsInRoZW4iLCJyZXNwb25zZSIsImNhdGNoIiwiZ2V0QWxsUHJvamVjdHMiLCJnZXQiLCJyZXNvbHZlIiwicG9zdHMiLCJmZWVkQmFja0ZhY3RvcnkiLCJnZXRSZXBsaWVzIiwicG9zdFJlcGx5IiwicG9zdElkIiwiY29udGVudCIsInJlcGx5SW5mbyIsInBvc3RSZXBsWSIsInN1Ym1pdEZvcm0iLCJwb3N0Q29tbWVudCIsIm5ld1Bvc3QiLCJsZW5ndGgiLCJ1c2VyIiwidXNlckZvcm0iLCIkc2V0UHJpc3RpbmUiLCJjbGVhciIsInN1Ym1pdCIsIm1lc3NhZ2UiLCJlbWFpbCIsImNvbnRyb2xsZXJGYWN0b3J5Iiwic2VuZE1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwiZWxlbWVudCIsImF0dHJzIiwicmVwbGllcyIsImdldFBvc3RzIiwic3VjY2VzZnVsQ29tbWVudCIsImNvbW1lbnRJZCIsInBvc3RfaWQiLCJwYXJzZUludCIsInBvc3RlZENvbW1lbnQiLCIkdGltZW91dCIsInRpbWVJbk1zIiwiY291bnRVcCIsIiRsb2NhdGlvbiIsImxvZ2luIiwibG9naW5JbmZvIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInJlc3VsdCIsInJlbG9hZCIsInBhdGgiLCJhZG1pbiIsImF1dGhlbnRpY2F0aW9uRGVjaXNpb24iLCJwcm9qZWN0cyIsIiRzY2UiLCJ0cnVzdFNyYyIsInNyYyIsInRydXN0QXNSZXNvdXJjZVVybCIsIm1vdmllIiwidmlkZW9MaW5rIiwiaGFzVmlkZW9MaW5rIiwiZ2V0RGF0YSIsImdldFNpbmdsZVByb2plY3QiLCJwcm9qZWN0SUQiLCJ1cGRhdGVQcm9qZWN0IiwidXBkYXRlZFByb2plY3QiLCJwdXQiLCIkc3RhdGVQYXJhbXMiLCJndWxwIiwicmVxdWlyZSIsInJlbmFtZSIsInVnbGlmeSIsInRhc2siLCJwaXBlIiwiZGVzdCIsImNvbmVvbGUiLCJ0eXBlaXRTdHJpbmdzIiwidHlwZWl0TG9vcCIsInR5cGVpdExvb3BEZWxheSIsInR5cGVpdEJyZWFrTGluZXMiLCJ0eXBlaXRTcGVlZCIsInR5cGVpdExpZmVMaWtlIiwidHlwZWl0Q3Vyc29yIiwidHlwZWl0Q3Vyc29yU3BlZWQiLCJ0eXBlaXRTdGFydERlbGF5IiwidHlwZWl0QnJlYWtEZWxheSIsIiRlbGVtZW50IiwiJGF0dHJzIiwidHlwZUl0RWxlbWVudCIsIiQiLCJ0eXBlSXQiLCJzdHJpbmdzIiwibG9vcCIsImxvb3BEZWxheSIsImJyZWFrTGluZXMiLCJzcGVlZCIsImxpZmVMaWtlIiwiY3Vyc29yIiwiY3Vyc29yU3BlZWQiLCJzdGFydERlbGF5IiwiYnJlYWtEZWxheSIsImUiLCJlcnJvciIsIndpbmRvdyIsIm9ubG9hZCIsInR5cGVkIiwidHlwZVNwZWVkIiwiY3Vyc2VyIiwiZGVsZXRlU3BlZWQiLCJ0IiwicyIsInRoaXMiLCJlbCIsIm9wdGlvbnMiLCJleHRlbmQiLCJmbiIsImRlZmF1bHRzIiwiaXNJbnB1dCIsImlzIiwiYXR0ciIsInNob3dDdXJzb3IiLCJlbENvbnRlbnQiLCJ0ZXh0IiwiY29udGVudFR5cGUiLCJiYWNrU3BlZWQiLCJiYWNrRGVsYXkiLCJzdHJpbmdzRWxlbWVudCIsInN0clBvcyIsImFycmF5UG9zIiwic3RvcE51bSIsImxvb3BDb3VudCIsImN1ckxvb3AiLCJzdG9wIiwiY3Vyc29yQ2hhciIsInNodWZmbGUiLCJzZXF1ZW5jZSIsImJ1aWxkIiwiaW5pdCIsInRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic2h1ZmZsZUFycmF5IiwidHlwZXdyaXRlIiwiYWZ0ZXIiLCJoaWRlIiwiY2hpbGRyZW4iLCJlYWNoIiwiaSIsInB1c2giLCJodG1sIiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwiciIsInN1YnN0ciIsImNoYXJBdCIsIm8iLCJ0ZXN0IiwiZXhlYyIsInN1YnN0cmluZyIsIm4iLCJhIiwiaCIsIm9uU3RyaW5nVHlwZWQiLCJjYWxsYmFjayIsImJhY2tzcGFjZSIsInByZVN0cmluZ1R5cGVkIiwidmFsIiwiZmxvb3IiLCJyZXNldCIsImNsZWFySW50ZXJ2YWwiLCJlbXB0eSIsInJlbW92ZSIsInJlc2V0Q2FsbGJhY2siLCJqUXVlcnkiLCJUeXBlZCIsInNlbGYiLCJrZXkiLCJ2YWx1ZSIsImN1clN0cmluZyIsImN1clN0clBvcyIsImh1bWFuaXplIiwiY2hhclBhdXNlIiwic2tpcCIsImN1ckNoYXIiLCJ0YWciLCJlbmRUYWciLCJuZXh0U3RyaW5nIiwiYXJyYXkiLCJ0bXAiLCJjdXJyZW50IiwidG9wIiwib3B0aW9uIiwiJHRoaXMiXSwibWFwcGluZ3MiOiJBQUFBLFlBRUEsSUFBSUEsU0FBNEIsa0JBQVhDLFNBQW9ELGdCQUFwQkEsUUFBT0MsU0FBd0IsU0FBVUMsS0FBTyxhQUFjQSxNQUFTLFNBQVVBLEtBQU8sTUFBT0EsTUFBeUIsa0JBQVhGLFNBQXlCRSxJQUFJQyxjQUFnQkgsUUFBVUUsTUFBUUYsT0FBT0ksVUFBWSxlQUFrQkYsTUNDdFFHLElBQUFDLFFBQUFDLE9BQUEsU0FBQSxZQUFBLGVBQUEsWUFBQSxpQkFNQUYsS0FBQUcsUUFBQSxpQkFB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LGNBQUEsYUFFQVUsY0FBQSxlQUlBckUsT0FBQXNFIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdteUFwcCcsIFsndWkucm91dGVyJywgJ3VpLmJvb3RzdHJhcCcsICduZ0FuaW1hdGUnLCAnYW5ndWxhci10eXBlZCddKTtcblxuLy8gYXBwLnJ1bihmdW5jdGlvbihlZGl0YWJsZU9wdGlvbnMpIHtcbi8vICAgICBlZGl0YWJsZU9wdGlvbnMudGhlbWUgPSAnYnMzJzsgLy8gYm9vdHN0cmFwMyB0aGVtZS4gQ2FuIGJlIGFsc28gJ2JzMicsICdkZWZhdWx0J1xuLy8gfSk7XG5cbmFwcC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcblx0XHRcdFx0JGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHtcblx0XHRcdFx0XHRcdFx0XHRlbmFibGVkOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdHJlcXVpcmVCYXNlOiBmYWxzZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9cIik7XG59XSk7XG5cbmFwcC5kaXJlY3RpdmUoJ25hdmJhcicsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc3RhdGUsIGF1dGhGYWN0b3J5KSB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHRcdFx0XHRcdFx0XHRzY29wZToge30sXG5cdFx0XHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdqcy9uYXZCYXIvbmF2YmFyLmh0bWwnLFxuXHRcdFx0XHRcdFx0XHRcdGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjb3BlLnNob3dMaW5rID0gZnVuY3Rpb24gKGxpbmspIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuICFsaW5rLmlzQWRtaW4gJiYgKGxpbmsuc3RhdGUgPT09ICdhZG1pbicgfHwgbGluay5zdGF0ZSA9PT0gJ2xvZ2luJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY29wZS5pc0xvZ2dlZEluID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYXV0aEZhY3RvcnkuaXNBZG1pbigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2NvcGUubGlua3MgPSBbeyBsYWJlbDogJ0hvbWUnLCBzdGF0ZTogJ2hvbWUnIH0sIHsgbGFiZWw6ICdQcm9qZWN0cycsIHN0YXRlOiAncHJvamVjdHMnIH0sIHsgbGFiZWw6ICdBYm91dCBNZScsIHN0YXRlOiAnYWJvdXQnIH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHsgbGFiZWw6ICdGZWVkYmFjaycsIHN0YXRlOiAnY29udGFjdCcgfSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHsgbGFiZWw6ICdBZG1pbiAnLCBzdGF0ZTogJ2FkbWluJywgaXNBZG1pbjogISRyb290U2NvcGUuYWRtaW4gfSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHsgbGFiZWw6ICdBZG1pbmlzdHJhdG9yJywgc3RhdGU6ICdsb2dpbicsIGlzQWRtaW46ICRyb290U2NvcGUuYWRtaW4gfVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG59KTtcblxuLy8gYXBwLnJ1bihmdW5jdGlvbigkcm9vdFNjb3BlLCAkc3RhdGUsIGF1dGhGYWN0b3J5KSB7XG4vLyAgICAgJHJvb3RTY29wZS5hZG1pbiA9IG51bGw7XG4vLyAgICAgJHJvb3RTY29wZS4kb24oXCIkc3RhdGVDaGFuZ2VTdGFydFwiLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcywgYXV0aEZhY3RvcnkpIHtcbi8vICAgICAgICAgaWYgKHRvU3RhdGUuYXV0aGVudGljYXRlICYmICFhdXRoRmFjdG9yeS5pc0FkbWluKCkpIHtcbi8vICAgICAgICAgICAgIC8vIFVzZXIgaXNu4oCZdCBhdXRoZW50aWNhdGVkXG4vLyAgICAgICAgICAgICAkc3RhdGUudHJhbnNpdGlvblRvKFwiaG9tZVwiKTtcbi8vICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9KTtcbi8vIH0pO1xuXG5cbmFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdFx0XHRcdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdhYm91dCcsIHtcblx0XHRcdFx0XHRcdFx0XHR1cmw6ICcvYWJvdXQnLFxuXHRcdFx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL2pzL2Fib3V0L2Fib3V0Lmh0bWwnLFxuXHRcdFx0XHRcdFx0XHRcdGF1dGhlbnRpY2F0ZTogZmFsc2Vcblx0XHRcdFx0fSk7XG59KTtcblxuYXBwLmNvbnRyb2xsZXIoJ2FkbWluQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgYWRtaW5GYWN0b3J5LCBhbGxQcm9qZWN0cywgYXV0aEZhY3RvcnkpIHtcblxuXHRcdFx0XHQkc2NvcGUuc3VibWl0UHJvamVjdCA9IGZ1bmN0aW9uIChwcm9qZWN0KSB7XG5cdFx0XHRcdFx0XHRcdFx0YWRtaW5GYWN0b3J5LnBvc3RQcm9qZWN0KHByb2plY3QpO1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5wcm9qZWN0ID0gbnVsbDtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQkc2NvcGUuYWxsUHJvamVjdHMgPSBhbGxQcm9qZWN0cyB8fCBbeyBpZDogMCwgbmFtZTogJ2VtcHR5JywgZGVwbG95OiAnZW1wdHknLCBnaXRIdWI6IFwiZW1wdHlcIiB9XTtcblxuXHRcdFx0XHQkc2NvcGUuZGF0YSA9IHtcblx0XHRcdFx0XHRcdFx0XHRhdmFpbGFibGVQcm9qZWN0czogJHNjb3BlLmFsbFByb2plY3RzLFxuXHRcdFx0XHRcdFx0XHRcdHNlbGVjdGVkUHJvamVjdDogeyBpZDogMCwgbmFtZTogJ2VtcHR5JywgZGVwbG95OiAnZW1wdHknLCBnaXRIdWI6ICdlbXB0eScsIGRlc2NyaXB0aW9uOiBcImVtcHR5XCIgfVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdCRzY29wZS5zZWxlY3RlZHByb2plY3RDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5jdXJyZW50UHJvamVjdCA9ICRzY29wZS5zZWxlY3RlZEl0ZW07XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0JHNjb3BlLmxvZ091dCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRhdXRoRmFjdG9yeS5sb2dPdXQoKTtcblx0XHRcdFx0XHRcdFx0XHQkc3RhdGUuZ28oJ2hvbWUnKTtcblx0XHRcdFx0fTtcbn0pO1xuXG5hcHAuZGlyZWN0aXZlKCdwcm9qZWN0RWRpdCcsIGZ1bmN0aW9uIChwcm9qZWN0RmFjdG9yeSkge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdHJlc3RyaWN0OiAnRScsXG5cdFx0XHRcdFx0XHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHByb2plY3Q6ICc9cHJvamVjdCdcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnYWRtaW5FZGl0Lmh0bWwnXG5cdFx0XHRcdH07XG59KTtcblxuYXBwLmZhY3RvcnkoJ2FkbWluRmFjdG9yeScsIGZ1bmN0aW9uICgkaHR0cCkge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdHBvc3RQcm9qZWN0OiBmdW5jdGlvbiBwb3N0UHJvamVjdChwcm9qZWN0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wcm9qZWN0JywgcHJvamVjdCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KS5jYXRjaCgpO1xuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0Z2V0QWxsUHJvamVjdHM6IGZ1bmN0aW9uIGdldEFsbFByb2plY3RzKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9wcm9qZWN0JykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KS5jYXRjaCgpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcbn0pO1xuXG5hcHAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuXHRcdFx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnYWRtaW4nLCB7XG5cdFx0XHRcdFx0XHRcdFx0dXJsOiAnL2FkbWluJyxcblx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy9qcy9hZG1pbi9hZG1pbi5odG1sJyxcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnYWRtaW5Db250cm9sbGVyJyxcblx0XHRcdFx0XHRcdFx0XHRhdXRoZW50aWNhdGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YWxsUHJvamVjdHM6IGZ1bmN0aW9uIGFsbFByb2plY3RzKGFkbWluRmFjdG9yeSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYWRtaW5GYWN0b3J5LmdldEFsbFByb2plY3RzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcbn0pO1xuXG5hcHAuY29udHJvbGxlcignY29udGFjdENvbnRyb2xsZXInLCBmdW5jdGlvbiAoJHNjb3BlLCBwb3N0cywgZmVlZEJhY2tGYWN0b3J5KSB7XG5cdFx0XHRcdCRzY29wZS5wb3N0cyA9IHBvc3RzO1xuXHRcdFx0XHQkc2NvcGUuZ2V0UmVwbGllcyA9IGZlZWRCYWNrRmFjdG9yeS5nZXRSZXBsaWVzO1xuXHRcdFx0XHQkc2NvcGUucG9zdFJlcGx5ID0gZnVuY3Rpb24gKHBvc3RJZCwgY29udGVudCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciByZXBseUluZm8gPSB7IHBvc3RJZDogcG9zdElkLCBjb250ZW50OiBjb250ZW50IH07XG5cdFx0XHRcdFx0XHRcdFx0ZmVlZEJhY2tGYWN0b3J5LnBvc3RSZXBsWShyZXBseUluZm8pO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdCRzY29wZS5zdWJtaXRGb3JtID0gZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHRmZWVkQmFja0ZhY3RvcnkucG9zdENvbW1lbnQoZGF0YSkudGhlbihmdW5jdGlvbiAobmV3UG9zdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0JHNjb3BlLnBvc3RzWyRzY29wZS5wb3N0cy5sZW5ndGhdID0gbmV3UG9zdDtcblx0XHRcdFx0XHRcdFx0XHR9KS5jYXRjaCgpO1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS51c2VyID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUudXNlckZvcm0uJHNldFByaXN0aW5lKHRydWUpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdCRzY29wZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUudXNlciA9IG51bGw7XG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLnVzZXJGb3JtLiRzZXRQcmlzdGluZSh0cnVlKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICgkc2NvcGUubWVzc2FnZSAmJiAkc2NvcGUuZW1haWwgJiYgJHNjb3BlLm5hbWUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXJGYWN0b3J5LnNlbmRNZXNzYWdlKCRzY29wZS5uYW1lLCAkc2NvcGUuZW1haWwsICRzY29wZS5tZXNzYWdlKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG59KTtcblxuYXBwLmRpcmVjdGl2ZSgncmVwbGllcycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ3Bvc3QgZGlyZWN0aXZlJyk7XG5cblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdFx0XHRcdFx0XHRcdHNjb3BlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwb3N0OiBcIj1cIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdqcy9jb250YWN0L3RlbXBsYXRlL3JlcGx5Vmlldy5odG1sJyxcblx0XHRcdFx0XHRcdFx0XHRsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY29wZS5yZXBsaWVzID0gW3sgbGFiZWw6ICdIb21lJywgc3RhdGU6ICdob21lJyB9LCB7IGxhYmVsOiAnUHJvamVjdHMnLCBzdGF0ZTogJ3Byb2plY3RzJyB9LCB7IGxhYmVsOiAnQWJvdXQgTWUnLCBzdGF0ZTogJ2Fib3V0JyB9LCB7IGxhYmVsOiAnQ29udGFjdCBNZScsIHN0YXRlOiAnY29udGFjdCcgfV07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xufSk7XG5cbmFwcC5mYWN0b3J5KCdmZWVkQmFja0ZhY3RvcnknLCBmdW5jdGlvbiAoJGh0dHApIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkluIHRoZSBmZWViYWNrIGZhY3RvcnlcIik7XG5cdFx0XHRcdHZhciBmZWVkQmFja0ZhY3RvcnkgPSB7fTtcblx0XHRcdFx0ZmVlZEJhY2tGYWN0b3J5LmdldFBvc3RzID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY29tbWVudCcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnZ2V0dGluZyBjb21tZW50cycpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cdFx0XHRcdFx0XHRcdFx0fSkuY2F0Y2goKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0ZmVlZEJhY2tGYWN0b3J5LnBvc3RDb21tZW50ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnUG9zdGluZyBjb21tZW50Jyk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tbWVudCcsIGNvbnRlbnQpLnRoZW4oZnVuY3Rpb24gKHN1Y2Nlc2Z1bENvbW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHN1Y2Nlc2Z1bENvbW1lbnQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHN1Y2Nlc2Z1bENvbW1lbnQuZGF0YTtcblx0XHRcdFx0XHRcdFx0XHR9KS5jYXRjaCgpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRmZWVkQmFja0ZhY3RvcnkuZ2V0UmVwbGllcyA9IGZ1bmN0aW9uIChjb21tZW50SWQpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3JlcGx5LycgKyBjb21tZW50SWQpLnRoZW4oZnVuY3Rpb24gKHJlcGxpZXMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdnb3QgY29tbWVudHMnKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiByZXBsaWVzLmRhdGE7XG5cdFx0XHRcdFx0XHRcdFx0fSkuY2F0Y2goKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0ZmVlZEJhY2tGYWN0b3J5LnBvc3RSZXBsWSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ3J1bm5pbmcgcG9zdCByZXBseScsIG1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3JlcGx5LycsIHsgcG9zdF9pZDogcGFyc2VJbnQobWVzc2FnZS5wb3N0SWQucG9zdElkKSwgY29udGVudDogbWVzc2FnZS5jb250ZW50LmNvbnRlbnQgfSkudGhlbihmdW5jdGlvbiAocG9zdGVkQ29tbWVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHBvc3RlZENvbW1lbnQuZGF0YTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRyZXR1cm4gZmVlZEJhY2tGYWN0b3J5O1xufSk7XG5cbmFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdFx0XHRcdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdjb250YWN0Jywge1xuXHRcdFx0XHRcdFx0XHRcdHVybDogJy9jb250YWN0Jyxcblx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy9qcy9jb250YWN0L2NvbnRhY3QuaHRtbCcsXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ2NvbnRhY3RDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdFx0XHRhdXRoZW50aWNhdGU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBvc3RzOiBmdW5jdGlvbiBwb3N0cyhmZWVkQmFja0ZhY3RvcnkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2ludm9raW5nIGZlZWRCYWNrRmFjdG9yeScpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmVlZEJhY2tGYWN0b3J5LmdldFBvc3RzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcbn0pO1xuXG5jb25zb2xlLmxvZygnYmFyIGN0cmwgbG9hZGVkJyk7XG5cbmFwcC5jb250cm9sbGVyKFwiQmFyQ3RybFwiLCBmdW5jdGlvbiAoJHNjb3BlLCAkdGltZW91dCkge1xuXG5cdFx0XHRcdCRzY29wZS50aW1lSW5NcyA9IDA7XG5cblx0XHRcdFx0dmFyIGNvdW50VXAgPSBmdW5jdGlvbiBjb3VudFVwKCkge1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS50aW1lSW5NcyArPSA1MDA7XG5cdFx0XHRcdFx0XHRcdFx0JHRpbWVvdXQoY291bnRVcCwgNTAwKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQkdGltZW91dChjb3VudFVwLCA1MDApO1xufSk7XG5cbmFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdFx0XHRcdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdob21lJywge1xuXHRcdFx0XHRcdFx0XHRcdHVybDogJy8nLFxuXHRcdFx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL2pzL2hvbWUvaG9tZS5odG1sJyxcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnQmFyQ3RybCcsXG5cdFx0XHRcdFx0XHRcdFx0YXV0aGVudGljYXRlOiBmYWxzZVxuXHRcdFx0XHR9KTtcbn0pO1xuXG5hcHAuY29udHJvbGxlcignbG9naW5Db250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCBhdXRoRmFjdG9yeSwgJGxvY2F0aW9uKSB7XG5cdFx0XHRcdCRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgbG9naW5JbmZvID0geyBuYW1lOiAkc2NvcGUudXNlcm5hbWUsIHBhc3N3b3JkOiAkc2NvcGUucGFzc3dvcmQgfTtcblx0XHRcdFx0XHRcdFx0XHRhdXRoRmFjdG9yeS5sb2dpbihsb2dpbkluZm8pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2cocmVzdWx0KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCRzdGF0ZS5nbygnaG9tZScsIHt9LCB7IHJlbG9hZDogdHJ1ZSB9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdFx0XHRcdFx0XHRcdFx0fSkuY2F0Y2goKTtcblx0XHRcdFx0fTtcbn0pO1xuXG5hcHAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuXHRcdFx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnbG9naW4nLCB7XG5cdFx0XHRcdFx0XHRcdFx0dXJsOiAnL2xvZ2luJyxcblx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy9qcy9sb2dpbi9sb2dpbi5odG1sJyxcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnbG9naW5Db250cm9sbGVyJyxcblx0XHRcdFx0XHRcdFx0XHRhdXRoZW50aWNhdGU6IGZhbHNlXG5cdFx0XHRcdH0pO1xufSk7XG5cbmFwcC5jb250cm9sbGVyKCdhdXRoQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsIGF1dGhGYWN0b3J5KSB7XG5cdFx0XHRcdCRzY29wZS5pc0FkbWluID0gYXV0aEZhY3RvcnkuaXNBZG1pbigpO1xufSk7XG5cbmFwcC5mYWN0b3J5KCdhdXRoRmFjdG9yeScsIGZ1bmN0aW9uICgkaHR0cCwgJHN0YXRlLCAkcm9vdFNjb3BlKSB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0aXNBZG1pbjogZnVuY3Rpb24gaXNBZG1pbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiAhISRyb290U2NvcGUuYWRtaW47XG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRsb2dpbjogZnVuY3Rpb24gbG9naW4obG9naW5JbmZvKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2F1dGhlbnRpY2F0aW9uLycgKyBsb2dpbkluZm8ubmFtZSArICcvJyArIGxvZ2luSW5mby5wYXNzd29yZCkudGhlbihmdW5jdGlvbiAoYXV0aGVudGljYXRpb25EZWNpc2lvbikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIWF1dGhlbnRpY2F0aW9uRGVjaXNpb24uZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCRyb290U2NvcGUuYWRtaW4gPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQkcm9vdFNjb3BlLmFkbWluID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYXV0aGVudGljYXRpb25EZWNpc2lvbjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pLmNhdGNoKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRsb2dPdXQ6IGZ1bmN0aW9uIGxvZ091dCgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCRyb290U2NvcGUuYWRtaW4gPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcbn0pO1xuXG5hcHAuY29udHJvbGxlcigncHJvamVjdENvbnRyb2xsZXInLCBmdW5jdGlvbiAoJHNjb3BlLCBhbGxQcm9qZWN0cykge1xuXHRcdFx0XHQkc2NvcGUucHJvamVjdHMgPSBhbGxQcm9qZWN0cztcbn0pO1xuXG5hcHAuY29udHJvbGxlcignc2luZ2xlUHJvamVjdENvbnRyb2xsZXInLCBmdW5jdGlvbiAoJHNjb3BlLCBwcm9qZWN0RmFjdG9yeSwgY3VycmVudFByb2plY3QsICRzY2UpIHtcblx0XHRcdFx0JHNjb3BlLmN1cnJlbnRQcm9qZWN0ID0gY3VycmVudFByb2plY3Q7XG5cblx0XHRcdFx0JHNjb3BlLnRydXN0U3JjID0gZnVuY3Rpb24gKHNyYykge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAkc2NlLnRydXN0QXNSZXNvdXJjZVVybChzcmMpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdCRzY29wZS5tb3ZpZSA9IHsgc3JjOiAkc2NvcGUuY3VycmVudFByb2plY3QudmlkZW9MaW5rIH07XG5cblx0XHRcdFx0JHNjb3BlLmhhc1ZpZGVvTGluayA9IGZ1bmN0aW9uIGhhc1ZpZGVvTGluaygpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gISFjdXJyZW50UHJvamVjdC52aWRlb0xpbms7XG5cdFx0XHRcdH07XG59KTtcblxuYXBwLmRpcmVjdGl2ZSgncHJvamVjdFRpbGUnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzdHJpY3Q6IFwiRVwiLFxuXHRcdFx0XHRcdFx0XHRcdHNjb3BlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwcm9qZWN0OiAnPSdcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnanMvcHJvamVjdHMvc2luZ2xlUHJvamVjdC9zaW5nbGVQcm9qZWN0VGlsZS5odG1sJ1xuXHRcdFx0XHR9O1xufSk7XG5cbmFwcC5mYWN0b3J5KCdwcm9qZWN0RmFjdG9yeScsIGZ1bmN0aW9uICgkaHR0cCkge1xuXHRcdFx0XHR2YXIgZ2V0RGF0YSA9IGZ1bmN0aW9uIGdldERhdGEocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdGdldEFsbFByb2plY3RzOiBmdW5jdGlvbiBnZXRBbGxQcm9qZWN0cygpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcHJvamVjdCcpLnRoZW4oZ2V0RGF0YSkuY2F0Y2goKTtcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdGdldFNpbmdsZVByb2plY3Q6IGZ1bmN0aW9uIGdldFNpbmdsZVByb2plY3QocHJvamVjdElEKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Byb2plY3QvJyArIHByb2plY3RJRCkudGhlbihnZXREYXRhKS5jYXRjaCgpO1xuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0cG9zdFByb2plY3Q6IGZ1bmN0aW9uIHBvc3RQcm9qZWN0KHByb2plY3QpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Byb2plY3QnLCBwcm9qZWN0KS50aGVuKGdldERhdGEpLmNhdGNoKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHR1cGRhdGVQcm9qZWN0OiBmdW5jdGlvbiB1cGRhdGVQcm9qZWN0KHVwZGF0ZWRQcm9qZWN0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gJGh0dHAucHV0KCdhcGkvcHJvamVjdCcsIHVwZGF0ZWRQcm9qZWN0KS50aGVuKGdldERhdGEpLmNhdGNoKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xufSk7XG5cbmFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdFx0XHRcdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdwcm9qZWN0cycsIHtcblx0XHRcdFx0XHRcdFx0XHR1cmw6ICcvcHJvamVjdHMnLFxuXHRcdFx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL2pzL3Byb2plY3RzL3Byb2plY3RzLmh0bWwnLFxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdwcm9qZWN0Q29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRcdFx0YXV0aGVudGljYXRlOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhbGxQcm9qZWN0czogZnVuY3Rpb24gYWxsUHJvamVjdHMocHJvamVjdEZhY3RvcnkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHByb2plY3RGYWN0b3J5LmdldEFsbFByb2plY3RzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnc2luZ2xlUHJvamVjdCcsIHtcblx0XHRcdFx0XHRcdFx0XHR1cmw6ICcvcHJvamVjdHMvOmlkJyxcblx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy9qcy9wcm9qZWN0cy9zaW5nbGVQcm9qZWN0L3NpbmdsZVByb2plY3QuaHRtbCcsXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ3NpbmdsZVByb2plY3RDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdFx0XHRhdXRoZW50aWNhdGU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRQcm9qZWN0OiBmdW5jdGlvbiBjdXJyZW50UHJvamVjdChwcm9qZWN0RmFjdG9yeSwgJHN0YXRlUGFyYW1zKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBwcm9qZWN0RmFjdG9yeS5nZXRTaW5nbGVQcm9qZWN0KCRzdGF0ZVBhcmFtcy5pZCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcbn0pO1xuXG4vLyBHcmFiIG5vZGUgcGFja2FnZXNcbnZhciBndWxwID0gcmVxdWlyZSgnZ3VscCcpO1xucmVuYW1lID0gcmVxdWlyZSgnZ3VscC1yZW5hbWUnKTtcbnVnbGlmeSA9IHJlcXVpcmUoJ2d1bHAtdWdsaWZ5Jyk7XG5cbmd1bHAudGFzaygnY29tcHJlc3MnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGd1bHAuc3JjKCdqcy8qLmpzJykucGlwZSh1Z2xpZnkoKSkucGlwZShyZW5hbWUoJ3R5cGVkLm1pbi5qcycpKS5waXBlKGd1bHAuZGVzdCgnZGlzdCcpKTtcbn0pO1xuXG4vLyBEZWZhdWx0IFRhc2tcbmd1bHAudGFzaygnZGVmYXVsdCcsIFsnY29tcHJlc3MnXSk7XG5cbihmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2FiLlR5cGVpdCBhYm91dCB0bycpO1xuXHRcdFx0XHRhbmd1bGFyLm1vZHVsZSgnYWIuVHlwZWl0JywgW10pLmRpcmVjdGl2ZSgnYWJUeXBlaXQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uZW9sZS5sb2coJ3J1bm5pbmcgdGhlIHdyYXBwZXInKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzdHJpY3Q6ICdBJyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjb3BlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGVpdFN0cmluZ3M6ICc9YWJUeXBlaXQnLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlaXRMb29wOiAnPScsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGVpdExvb3BEZWxheTogJz0nLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlaXRCcmVha0xpbmVzOiAnPScsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGVpdFNwZWVkOiAnPScsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGVpdExpZmVMaWtlOiAnPScsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGVpdEN1cnNvcjogJz0nLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlaXRDdXJzb3JTcGVlZDogJz0nLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlaXRTdGFydERlbGF5OiAnPScsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGVpdEJyZWFrRGVsYXk6ICc9J1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uIGNvbnRyb2xsZXIoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciB0eXBlSXRFbGVtZW50ID0gJCgkZWxlbWVudCk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlSXRFbGVtZW50LnR5cGVJdCh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzdHJpbmdzOiAkc2NvcGUudHlwZWl0U3RyaW5ncyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGxvb3A6ICRzY29wZS50eXBlaXRMb29wLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bG9vcERlbGF5OiAkc2NvcGUudHlwZWl0TG9vcERlbGF5LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWtMaW5lczogJHNjb3BlLnR5cGVpdEJyZWFrTGluZXMsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzcGVlZDogJHNjb3BlLnR5cGVpdFNwZWVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGlmZUxpa2U6ICRzY29wZS50eXBlaXRMaWZlTGlrZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnNvcjogJHNjb3BlLnR5cGVpdEN1cnNvcixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnNvclNwZWVkOiAkc2NvcGUudHlwZWl0Q3Vyc29yU3BlZWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzdGFydERlbGF5OiAkc2NvcGUudHlwZWl0U3RhcnREZWxheSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrRGVsYXk6ICRzY29wZS50eXBlaXRCcmVha0RlbGF5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdPSCBOTyEgYW5ndWxhci10eXBlaXQgcmVxdWlyZXMgdHlwZWl0LmpzIG9uIHlvdXIgcGFnZSAtIGRvIHlvdSBoYXZlIGl0IGxvYWRlZD8nKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdH0pO1xufSkoKTtcblxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHQkKFwiLmRldmVsb3BlclwiKS50eXBlZCh7XG5cdFx0XHRcdFx0XHRcdFx0c3RyaW5nczogW1wiRnJvbnQtZW5kXCIsIFwiQmFjay1lbmRcIiwgXCJGdWxsc3RhY2tcIiwgXCJTb2Z0d2FyZVwiLCBcIkphdmFTY3JpcHRcIiwgXCJBbmd1bGFySlNcIiwgXCJVSS9VWFwiXSxcblx0XHRcdFx0XHRcdFx0XHR0eXBlU3BlZWQ6IDI1MCxcblx0XHRcdFx0XHRcdFx0XHRsb29wOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGN1cnNvclNwZWVkOiAxMDAsXG5cdFx0XHRcdFx0XHRcdFx0bGlmZUxpa2U6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0Y3Vyc2VyOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGRlbGV0ZVNwZWVkOiAxMDAwXG5cdFx0XHRcdH0pO1xufTtcbiFmdW5jdGlvbiAodCkge1xuXHRcdFx0XHRcInVzZSBzdHJpY3RcIjtcblx0XHRcdFx0dmFyIHMgPSBmdW5jdGlvbiBzKF9zLCBlKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5lbCA9IHQoX3MpLCB0aGlzLm9wdGlvbnMgPSB0LmV4dGVuZCh7fSwgdC5mbi50eXBlZC5kZWZhdWx0cywgZSksIHRoaXMuaXNJbnB1dCA9IHRoaXMuZWwuaXMoXCJpbnB1dFwiKSwgdGhpcy5hdHRyID0gdGhpcy5vcHRpb25zLmF0dHIsIHRoaXMuc2hvd0N1cnNvciA9IHRoaXMuaXNJbnB1dCA/ICExIDogdGhpcy5vcHRpb25zLnNob3dDdXJzb3IsIHRoaXMuZWxDb250ZW50ID0gdGhpcy5hdHRyID8gdGhpcy5lbC5hdHRyKHRoaXMuYXR0cikgOiB0aGlzLmVsLnRleHQoKSwgdGhpcy5jb250ZW50VHlwZSA9IHRoaXMub3B0aW9ucy5jb250ZW50VHlwZSwgdGhpcy50eXBlU3BlZWQgPSB0aGlzLm9wdGlvbnMudHlwZVNwZWVkLCB0aGlzLnN0YXJ0RGVsYXkgPSB0aGlzLm9wdGlvbnMuc3RhcnREZWxheSwgdGhpcy5iYWNrU3BlZWQgPSB0aGlzLm9wdGlvbnMuYmFja1NwZWVkLCB0aGlzLmJhY2tEZWxheSA9IHRoaXMub3B0aW9ucy5iYWNrRGVsYXksIHRoaXMuc3RyaW5nc0VsZW1lbnQgPSB0aGlzLm9wdGlvbnMuc3RyaW5nc0VsZW1lbnQsIHRoaXMuc3RyaW5ncyA9IHRoaXMub3B0aW9ucy5zdHJpbmdzLCB0aGlzLnN0clBvcyA9IDAsIHRoaXMuYXJyYXlQb3MgPSAwLCB0aGlzLnN0b3BOdW0gPSAwLCB0aGlzLmxvb3AgPSB0aGlzLm9wdGlvbnMubG9vcCwgdGhpcy5sb29wQ291bnQgPSB0aGlzLm9wdGlvbnMubG9vcENvdW50LCB0aGlzLmN1ckxvb3AgPSAwLCB0aGlzLnN0b3AgPSAhMSwgdGhpcy5jdXJzb3JDaGFyID0gdGhpcy5vcHRpb25zLmN1cnNvckNoYXIsIHRoaXMuc2h1ZmZsZSA9IHRoaXMub3B0aW9ucy5zaHVmZmxlLCB0aGlzLnNlcXVlbmNlID0gW10sIHRoaXMuYnVpbGQoKTtcblx0XHRcdFx0fTtzLnByb3RvdHlwZSA9IHsgY29uc3RydWN0b3I6IHMsIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgdCA9IHRoaXM7dC50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIHMgPSAwOyBzIDwgdC5zdHJpbmdzLmxlbmd0aDsgKytzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dC5zZXF1ZW5jZVtzXSA9IHM7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH10LnNodWZmbGUgJiYgKHQuc2VxdWVuY2UgPSB0LnNodWZmbGVBcnJheSh0LnNlcXVlbmNlKSksIHQudHlwZXdyaXRlKHQuc3RyaW5nc1t0LnNlcXVlbmNlW3QuYXJyYXlQb3NdXSwgdC5zdHJQb3MpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgdC5zdGFydERlbGF5KTtcblx0XHRcdFx0XHRcdFx0XHR9LCBidWlsZDogZnVuY3Rpb24gYnVpbGQoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgcyA9IHRoaXM7aWYgKHRoaXMuc2hvd0N1cnNvciA9PT0gITAgJiYgKHRoaXMuY3Vyc29yID0gdCgnPHNwYW4gY2xhc3M9XCJ0eXBlZC1jdXJzb3JcIj4nICsgdGhpcy5jdXJzb3JDaGFyICsgXCI8L3NwYW4+XCIpLCB0aGlzLmVsLmFmdGVyKHRoaXMuY3Vyc29yKSksIHRoaXMuc3RyaW5nc0VsZW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5zdHJpbmdzID0gW10sIHRoaXMuc3RyaW5nc0VsZW1lbnQuaGlkZSgpLCBjb25zb2xlLmxvZyh0aGlzLnN0cmluZ3NFbGVtZW50LmNoaWxkcmVuKCkpO3ZhciBlID0gdGhpcy5zdHJpbmdzRWxlbWVudC5jaGlsZHJlbigpO3QuZWFjaChlLCBmdW5jdGlvbiAoZSwgaSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHMuc3RyaW5ncy5wdXNoKHQoaSkuaHRtbCgpKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9dGhpcy5pbml0KCk7XG5cdFx0XHRcdFx0XHRcdFx0fSwgdHlwZXdyaXRlOiBmdW5jdGlvbiB0eXBld3JpdGUodCwgcykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc3RvcCAhPT0gITApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGUgPSBNYXRoLnJvdW5kKDcwICogTWF0aC5yYW5kb20oKSkgKyB0aGlzLnR5cGVTcGVlZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIGkgPSB0aGlzO2kudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBlID0gMCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgciA9IHQuc3Vic3RyKHMpO2lmIChcIl5cIiA9PT0gci5jaGFyQXQoMCkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBvID0gMTsvXlxcXlxcZCsvLnRlc3QocikgJiYgKHIgPSAvXFxkKy8uZXhlYyhyKVswXSwgbyArPSByLmxlbmd0aCwgZSA9IHBhcnNlSW50KHIpKSwgdCA9IHQuc3Vic3RyaW5nKDAsIHMpICsgdC5zdWJzdHJpbmcocyArIG8pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1pZiAoXCJodG1sXCIgPT09IGkuY29udGVudFR5cGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBuID0gdC5zdWJzdHIocykuY2hhckF0KDApO2lmIChcIjxcIiA9PT0gbiB8fCBcIiZcIiA9PT0gbikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgYSA9IFwiXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgICBoID0gXCJcIjtmb3IgKGggPSBcIjxcIiA9PT0gbiA/IFwiPlwiIDogXCI7XCI7IHQuc3Vic3RyKHMgKyAxKS5jaGFyQXQoMCkgIT09IGggJiYgKGEgKz0gdC5zdWJzdHIocykuY2hhckF0KDApLCBzKyssICEocyArIDEgPiB0Lmxlbmd0aCkpOykge31zKyssIGEgKz0gaDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9aS50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAocyA9PT0gdC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGkub3B0aW9ucy5vblN0cmluZ1R5cGVkKGkuYXJyYXlQb3MpLCBpLmFycmF5UG9zID09PSBpLnN0cmluZ3MubGVuZ3RoIC0gMSAmJiAoaS5vcHRpb25zLmNhbGxiYWNrKCksIGkuY3VyTG9vcCsrLCBpLmxvb3AgPT09ICExIHx8IGkuY3VyTG9vcCA9PT0gaS5sb29wQ291bnQpKSByZXR1cm47aS50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aS5iYWNrc3BhY2UodCwgcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sIGkuYmFja0RlbGF5KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdDAgPT09IHMgJiYgaS5vcHRpb25zLnByZVN0cmluZ1R5cGVkKGkuYXJyYXlQb3MpO3ZhciBlID0gdC5zdWJzdHIoMCwgcyArIDEpO2kuYXR0ciA/IGkuZWwuYXR0cihpLmF0dHIsIGUpIDogaS5pc0lucHV0ID8gaS5lbC52YWwoZSkgOiBcImh0bWxcIiA9PT0gaS5jb250ZW50VHlwZSA/IGkuZWwuaHRtbChlKSA6IGkuZWwudGV4dChlKSwgcysrLCBpLnR5cGV3cml0ZSh0LCBzKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LCBlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSwgYmFja3NwYWNlOiBmdW5jdGlvbiBiYWNrc3BhY2UodCwgcykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc3RvcCAhPT0gITApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGUgPSBNYXRoLnJvdW5kKDcwICogTWF0aC5yYW5kb20oKSkgKyB0aGlzLmJhY2tTcGVlZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIGkgPSB0aGlzO2kudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChcImh0bWxcIiA9PT0gaS5jb250ZW50VHlwZSAmJiBcIj5cIiA9PT0gdC5zdWJzdHIocykuY2hhckF0KDApKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBlID0gXCJcIjsgXCI8XCIgIT09IHQuc3Vic3RyKHMgLSAxKS5jaGFyQXQoMCkgJiYgKGUgLT0gdC5zdWJzdHIocykuY2hhckF0KDApLCBzLS0sICEoMCA+IHMpKTspIHt9cy0tLCBlICs9IFwiPFwiO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH12YXIgciA9IHQuc3Vic3RyKDAsIHMpO2kuYXR0ciA/IGkuZWwuYXR0cihpLmF0dHIsIHIpIDogaS5pc0lucHV0ID8gaS5lbC52YWwocikgOiBcImh0bWxcIiA9PT0gaS5jb250ZW50VHlwZSA/IGkuZWwuaHRtbChyKSA6IGkuZWwudGV4dChyKSwgcyA+IGkuc3RvcE51bSA/IChzLS0sIGkuYmFja3NwYWNlKHQsIHMpKSA6IHMgPD0gaS5zdG9wTnVtICYmIChpLmFycmF5UG9zKyssIGkuYXJyYXlQb3MgPT09IGkuc3RyaW5ncy5sZW5ndGggPyAoaS5hcnJheVBvcyA9IDAsIGkuc2h1ZmZsZSAmJiAoaS5zZXF1ZW5jZSA9IGkuc2h1ZmZsZUFycmF5KGkuc2VxdWVuY2UpKSwgaS5pbml0KCkpIDogaS50eXBld3JpdGUoaS5zdHJpbmdzW2kuc2VxdWVuY2VbaS5hcnJheVBvc11dLCBzKSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sIGUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0sIHNodWZmbGVBcnJheTogZnVuY3Rpb24gc2h1ZmZsZUFycmF5KHQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIGUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgaSA9IHQubGVuZ3RoO2lmIChpKSBmb3IgKDsgLS1pOykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSksIHMgPSB0W2VdLCB0W2VdID0gdFtpXSwgdFtpXSA9IHM7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9cmV0dXJuIHQ7XG5cdFx0XHRcdFx0XHRcdFx0fSwgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHQgPSB0aGlzO2NsZWFySW50ZXJ2YWwodC50aW1lb3V0KTt0aGlzLmVsLmF0dHIoXCJpZFwiKTt0aGlzLmVsLmVtcHR5KCksIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHRoaXMuY3Vyc29yICYmIHRoaXMuY3Vyc29yLnJlbW92ZSgpLCB0aGlzLnN0clBvcyA9IDAsIHRoaXMuYXJyYXlQb3MgPSAwLCB0aGlzLmN1ckxvb3AgPSAwLCB0aGlzLm9wdGlvbnMucmVzZXRDYWxsYmFjaygpO1xuXHRcdFx0XHRcdFx0XHRcdH0gfSwgdC5mbi50eXBlZCA9IGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgaSA9IHQodGhpcyksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgciA9IGkuZGF0YShcInR5cGVkXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIG8gPSBcIm9iamVjdFwiID09ICh0eXBlb2YgZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZSkpICYmIGU7ciAmJiByLnJlc2V0KCksIGkuZGF0YShcInR5cGVkXCIsIHIgPSBuZXcgcyh0aGlzLCBvKSksIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgcltlXSgpO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9LCB0LmZuLnR5cGVkLmRlZmF1bHRzID0geyBzdHJpbmdzOiBbXCJUaGVzZSBhcmUgdGhlIGRlZmF1bHQgdmFsdWVzLi4uXCIsIFwiWW91IGtub3cgd2hhdCB5b3Ugc2hvdWxkIGRvP1wiLCBcIlVzZSB5b3VyIG93biFcIiwgXCJIYXZlIGEgZ3JlYXQgZGF5IVwiXSwgc3RyaW5nc0VsZW1lbnQ6IG51bGwsIHR5cGVTcGVlZDogMCwgc3RhcnREZWxheTogMCwgYmFja1NwZWVkOiAwLCBzaHVmZmxlOiAhMSwgYmFja0RlbGF5OiA1MDAsIGxvb3A6ICExLCBsb29wQ291bnQ6ICExLCBzaG93Q3Vyc29yOiAhMCwgY3Vyc29yQ2hhcjogXCJ8XCIsIGF0dHI6IG51bGwsIGNvbnRlbnRUeXBlOiBcImh0bWxcIiwgY2FsbGJhY2s6IGZ1bmN0aW9uIGNhbGxiYWNrKCkge30sIHByZVN0cmluZ1R5cGVkOiBmdW5jdGlvbiBwcmVTdHJpbmdUeXBlZCgpIHt9LCBvblN0cmluZ1R5cGVkOiBmdW5jdGlvbiBvblN0cmluZ1R5cGVkKCkge30sIHJlc2V0Q2FsbGJhY2s6IGZ1bmN0aW9uIHJlc2V0Q2FsbGJhY2soKSB7fSB9O1xufSh3aW5kb3cualF1ZXJ5KTtcbi8vIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuXG4vLyBUeXBlZC5qcyB8IENvcHlyaWdodCAoYykgMjAxNiBNYXR0IEJvbGR0IHwgd3d3Lm1hdHRib2xkdC5jb21cblxuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuLy8gVEhFIFNPRlRXQVJFLlxuXG5cbiFmdW5jdGlvbiAoJCkge1xuXG5cdFx0XHRcdFwidXNlIHN0cmljdFwiO1xuXG5cdFx0XHRcdHZhciBUeXBlZCA9IGZ1bmN0aW9uIFR5cGVkKGVsLCBvcHRpb25zKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBjaG9zZW4gZWxlbWVudCB0byBtYW5pcHVsYXRlIHRleHRcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmVsID0gJChlbCk7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBvcHRpb25zXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sICQuZm4udHlwZWQuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gYXR0cmlidXRlIHRvIHR5cGUgaW50b1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuaXNJbnB1dCA9IHRoaXMuZWwuaXMoJ2lucHV0Jyk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hdHRyID0gdGhpcy5vcHRpb25zLmF0dHI7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBzaG93IGN1cnNvclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc2hvd0N1cnNvciA9IHRoaXMuaXNJbnB1dCA/IGZhbHNlIDogdGhpcy5vcHRpb25zLnNob3dDdXJzb3I7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyB0ZXh0IGNvbnRlbnQgb2YgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZWxDb250ZW50ID0gdGhpcy5hdHRyID8gdGhpcy5lbC5hdHRyKHRoaXMuYXR0cikgOiB0aGlzLmVsLnRleHQoKTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIGh0bWwgb3IgcGxhaW4gdGV4dFxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudFR5cGUgPSB0aGlzLm9wdGlvbnMuY29udGVudFR5cGU7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyB0eXBpbmcgc3BlZWRcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnR5cGVTcGVlZCA9IHRoaXMub3B0aW9ucy50eXBlU3BlZWQ7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBhZGQgYSBkZWxheSBiZWZvcmUgdHlwaW5nIHN0YXJ0c1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc3RhcnREZWxheSA9IHRoaXMub3B0aW9ucy5zdGFydERlbGF5O1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gYmFja3NwYWNpbmcgc3BlZWRcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmJhY2tTcGVlZCA9IHRoaXMub3B0aW9ucy5iYWNrU3BlZWQ7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBhbW91bnQgb2YgdGltZSB0byB3YWl0IGJlZm9yZSBiYWNrc3BhY2luZ1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYmFja0RlbGF5ID0gdGhpcy5vcHRpb25zLmJhY2tEZWxheTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIGRpdiBjb250YWluaW5nIHN0cmluZ3Ncblx0XHRcdFx0XHRcdFx0XHR0aGlzLnN0cmluZ3NFbGVtZW50ID0gdGhpcy5vcHRpb25zLnN0cmluZ3NFbGVtZW50O1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gaW5wdXQgc3RyaW5ncyBvZiB0ZXh0XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zdHJpbmdzID0gdGhpcy5vcHRpb25zLnN0cmluZ3M7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBjaGFyYWN0ZXIgbnVtYmVyIHBvc2l0aW9uIG9mIGN1cnJlbnQgc3RyaW5nXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zdHJQb3MgPSAwO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gY3VycmVudCBhcnJheSBwb3NpdGlvblxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYXJyYXlQb3MgPSAwO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gbnVtYmVyIHRvIHN0b3AgYmFja3NwYWNpbmcgb24uXG5cdFx0XHRcdFx0XHRcdFx0Ly8gZGVmYXVsdCAwLCBjYW4gY2hhbmdlIGRlcGVuZGluZyBvbiBob3cgbWFueSBjaGFyc1xuXHRcdFx0XHRcdFx0XHRcdC8vIHlvdSB3YW50IHRvIHJlbW92ZSBhdCB0aGUgdGltZVxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc3RvcE51bSA9IDA7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBMb29waW5nIGxvZ2ljXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5sb29wID0gdGhpcy5vcHRpb25zLmxvb3A7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5sb29wQ291bnQgPSB0aGlzLm9wdGlvbnMubG9vcENvdW50O1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY3VyTG9vcCA9IDA7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBmb3Igc3RvcHBpbmdcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnN0b3AgPSBmYWxzZTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIGN1c3RvbSBjdXJzb3Jcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmN1cnNvckNoYXIgPSB0aGlzLm9wdGlvbnMuY3Vyc29yQ2hhcjtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIHNodWZmbGUgdGhlIHN0cmluZ3Ncblx0XHRcdFx0XHRcdFx0XHR0aGlzLnNodWZmbGUgPSB0aGlzLm9wdGlvbnMuc2h1ZmZsZTtcblx0XHRcdFx0XHRcdFx0XHQvLyB0aGUgb3JkZXIgb2Ygc3RyaW5nc1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc2VxdWVuY2UgPSBbXTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEFsbCBzeXN0ZW1zIGdvIVxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYnVpbGQoKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRUeXBlZC5wcm90b3R5cGUgPSB7XG5cblx0XHRcdFx0XHRcdFx0XHRjb25zdHJ1Y3RvcjogVHlwZWQsXG5cblx0XHRcdFx0XHRcdFx0XHRpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYmVnaW4gdGhlIGxvb3Agdy8gZmlyc3QgY3VycmVudCBzdHJpbmcgKGdsb2JhbCBzZWxmLnN0cmluZ3MpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBjdXJyZW50IHN0cmluZyB3aWxsIGJlIHBhc3NlZCBhcyBhbiBhcmd1bWVudCBlYWNoIHRpbWUgYWZ0ZXIgdGhpc1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5zdHJpbmdzLmxlbmd0aDsgKytpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5zZXF1ZW5jZVtpXSA9IGk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gLy8gc2h1ZmZsZSB0aGUgYXJyYXkgaWYgdHJ1ZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5zaHVmZmxlKSBzZWxmLnNlcXVlbmNlID0gc2VsZi5zaHVmZmxlQXJyYXkoc2VsZi5zZXF1ZW5jZSk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3RhcnQgdHlwaW5nXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYudHlwZXdyaXRlKHNlbGYuc3RyaW5nc1tzZWxmLnNlcXVlbmNlW3NlbGYuYXJyYXlQb3NdXSwgc2VsZi5zdHJQb3MpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgc2VsZi5zdGFydERlbGF5KTtcblx0XHRcdFx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0XHRcdFx0YnVpbGQ6IGZ1bmN0aW9uIGJ1aWxkKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gSW5zZXJ0IGN1cnNvclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc2hvd0N1cnNvciA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmN1cnNvciA9ICQoXCI8c3BhbiBjbGFzcz1cXFwidHlwZWQtY3Vyc29yXFxcIj5cIiArIHRoaXMuY3Vyc29yQ2hhciArIFwiPC9zcGFuPlwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5lbC5hZnRlcih0aGlzLmN1cnNvcik7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zdHJpbmdzRWxlbWVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnN0cmluZ3MgPSBbXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5zdHJpbmdzRWxlbWVudC5oaWRlKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHRoaXMuc3RyaW5nc0VsZW1lbnQuY2hpbGRyZW4oKSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBzdHJpbmdzID0gdGhpcy5zdHJpbmdzRWxlbWVudC5jaGlsZHJlbigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQkLmVhY2goc3RyaW5ncywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnN0cmluZ3MucHVzaCgkKHZhbHVlKS5odG1sKCkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuaW5pdCgpO1xuXHRcdFx0XHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRcdFx0XHQvLyBwYXNzIGN1cnJlbnQgc3RyaW5nIHN0YXRlIHRvIGVhY2ggZnVuY3Rpb24sIHR5cGVzIDEgY2hhciBwZXIgY2FsbFxuXHRcdFx0XHRcdFx0XHRcdHR5cGV3cml0ZTogZnVuY3Rpb24gdHlwZXdyaXRlKGN1clN0cmluZywgY3VyU3RyUG9zKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBleGl0IHdoZW4gc3RvcHBlZFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc3RvcCA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHZhcnlpbmcgdmFsdWVzIGZvciBzZXRUaW1lb3V0IGR1cmluZyB0eXBpbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGNhbid0IGJlIGdsb2JhbCBzaW5jZSBudW1iZXIgY2hhbmdlcyBlYWNoIHRpbWUgbG9vcCBpcyBleGVjdXRlZFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGh1bWFuaXplID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKDEwMCAtIDMwKSkgKyB0aGlzLnR5cGVTcGVlZDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gLS0tLS0tLS0tLS0tLSBvcHRpb25hbCAtLS0tLS0tLS0tLS0tIC8vXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBiYWNrcGFjZXMgYSBjZXJ0YWluIHN0cmluZyBmYXN0ZXJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaWYgKHNlbGYuYXJyYXlQb3MgPT0gMSl7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAgc2VsZi5iYWNrRGVsYXkgPSA1MDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGVsc2V7IHNlbGYuYmFja0RlbGF5ID0gNTAwOyB9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGNvbnRhaW4gdHlwaW5nIGZ1bmN0aW9uIGluIGEgdGltZW91dCBodW1hbml6ZSdkIGRlbGF5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gY2hlY2sgZm9yIGFuIGVzY2FwZSBjaGFyYWN0ZXIgYmVmb3JlIGEgcGF1c2UgdmFsdWVcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZm9ybWF0OiBcXF5cXGQrIC4uIGVnOiBeMTAwMCAuLiBzaG91bGQgYmUgYWJsZSB0byBwcmludCB0aGUgXiB0b28gdXNpbmcgXl5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gc2luZ2xlIF4gYXJlIHJlbW92ZWQgZnJvbSBzdHJpbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGNoYXJQYXVzZSA9IDA7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBzdWJzdHIgPSBjdXJTdHJpbmcuc3Vic3RyKGN1clN0clBvcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzdWJzdHIuY2hhckF0KDApID09PSAnXicpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgc2tpcCA9IDE7IC8vIHNraXAgYXRsZWFzdCAxXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKC9eXFxeXFxkKy8udGVzdChzdWJzdHIpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzdWJzdHIgPSAvXFxkKy8uZXhlYyhzdWJzdHIpWzBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2tpcCArPSBzdWJzdHIubGVuZ3RoO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2hhclBhdXNlID0gcGFyc2VJbnQoc3Vic3RyKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBzdHJpcCBvdXQgdGhlIGVzY2FwZSBjaGFyYWN0ZXIgYW5kIHBhdXNlIHZhbHVlIHNvIHRoZXkncmUgbm90IHByaW50ZWRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjdXJTdHJpbmcgPSBjdXJTdHJpbmcuc3Vic3RyaW5nKDAsIGN1clN0clBvcykgKyBjdXJTdHJpbmcuc3Vic3RyaW5nKGN1clN0clBvcyArIHNraXApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuY29udGVudFR5cGUgPT09ICdodG1sJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHNraXAgb3ZlciBodG1sIHRhZ3Mgd2hpbGUgdHlwaW5nXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGN1ckNoYXIgPSBjdXJTdHJpbmcuc3Vic3RyKGN1clN0clBvcykuY2hhckF0KDApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjdXJDaGFyID09PSAnPCcgfHwgY3VyQ2hhciA9PT0gJyYnKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgdGFnID0gJyc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgZW5kVGFnID0gJyc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY3VyQ2hhciA9PT0gJzwnKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVuZFRhZyA9ICc+Jztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVuZFRhZyA9ICc7Jztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHdoaWxlIChjdXJTdHJpbmcuc3Vic3RyKGN1clN0clBvcyArIDEpLmNoYXJBdCgwKSAhPT0gZW5kVGFnKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRhZyArPSBjdXJTdHJpbmcuc3Vic3RyKGN1clN0clBvcykuY2hhckF0KDApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjdXJTdHJQb3MrKztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGN1clN0clBvcyArIDEgPiBjdXJTdHJpbmcubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1clN0clBvcysrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGFnICs9IGVuZFRhZztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyB0aW1lb3V0IGZvciBhbnkgcGF1c2UgYWZ0ZXIgYSBjaGFyYWN0ZXJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGN1clN0clBvcyA9PT0gY3VyU3RyaW5nLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZmlyZXMgY2FsbGJhY2sgZnVuY3Rpb25cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYub3B0aW9ucy5vblN0cmluZ1R5cGVkKHNlbGYuYXJyYXlQb3MpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpcyB0aGlzIHRoZSBmaW5hbCBzdHJpbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLmFycmF5UG9zID09PSBzZWxmLnN0cmluZ3MubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhbmltYXRpb24gdGhhdCBvY2N1cnMgb24gdGhlIGxhc3QgdHlwZWQgc3RyaW5nXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYub3B0aW9ucy5jYWxsYmFjaygpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuY3VyTG9vcCsrO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHF1aXQgaWYgd2Ugd29udCBsb29wIGJhY2tcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYubG9vcCA9PT0gZmFsc2UgfHwgc2VsZi5jdXJMb29wID09PSBzZWxmLmxvb3BDb3VudCkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5iYWNrc3BhY2UoY3VyU3RyaW5nLCBjdXJTdHJQb3MpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgc2VsZi5iYWNrRGVsYXkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8qIGNhbGwgYmVmb3JlIGZ1bmN0aW9ucyBpZiBhcHBsaWNhYmxlICovXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY3VyU3RyUG9zID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYub3B0aW9ucy5wcmVTdHJpbmdUeXBlZChzZWxmLmFycmF5UG9zKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gc3RhcnQgdHlwaW5nIGVhY2ggbmV3IGNoYXIgaW50byBleGlzdGluZyBzdHJpbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGN1clN0cmluZzogYXJnLCBzZWxmLmVsLmh0bWw6IG9yaWdpbmFsIHRleHQgaW5zaWRlIGVsZW1lbnRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBuZXh0U3RyaW5nID0gY3VyU3RyaW5nLnN1YnN0cigwLCBjdXJTdHJQb3MgKyAxKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLmF0dHIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5lbC5hdHRyKHNlbGYuYXR0ciwgbmV4dFN0cmluZyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5pc0lucHV0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5lbC52YWwobmV4dFN0cmluZyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoc2VsZi5jb250ZW50VHlwZSA9PT0gJ2h0bWwnKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5lbC5odG1sKG5leHRTdHJpbmcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuZWwudGV4dChuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhZGQgY2hhcmFjdGVycyBvbmUgYnkgb25lXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjdXJTdHJQb3MrKztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGxvb3AgdGhlIGZ1bmN0aW9uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnR5cGV3cml0ZShjdXJTdHJpbmcsIGN1clN0clBvcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGVuZCBvZiBjaGFyYWN0ZXIgcGF1c2Vcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgY2hhclBhdXNlKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBodW1hbml6ZWQgdmFsdWUgZm9yIHR5cGluZ1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgaHVtYW5pemUpO1xuXHRcdFx0XHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRcdFx0XHRiYWNrc3BhY2U6IGZ1bmN0aW9uIGJhY2tzcGFjZShjdXJTdHJpbmcsIGN1clN0clBvcykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZXhpdCB3aGVuIHN0b3BwZWRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLnN0b3AgPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyB2YXJ5aW5nIHZhbHVlcyBmb3Igc2V0VGltZW91dCBkdXJpbmcgdHlwaW5nXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBjYW4ndCBiZSBnbG9iYWwgc2luY2UgbnVtYmVyIGNoYW5nZXMgZWFjaCB0aW1lIGxvb3AgaXMgZXhlY3V0ZWRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBodW1hbml6ZSA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqICgxMDAgLSAzMCkpICsgdGhpcy5iYWNrU3BlZWQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIC0tLS0tIHRoaXMgcGFydCBpcyBvcHRpb25hbCAtLS0tLSAvL1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBjaGVjayBzdHJpbmcgYXJyYXkgcG9zaXRpb25cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gb24gdGhlIGZpcnN0IHN0cmluZywgb25seSBkZWxldGUgb25lIHdvcmRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gdGhlIHN0b3BOdW0gYWN0dWFsbHkgcmVwcmVzZW50cyB0aGUgYW1vdW50IG9mIGNoYXJzIHRvXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGtlZXAgaW4gdGhlIGN1cnJlbnQgc3RyaW5nLiBJbiBteSBjYXNlIGl0J3MgMTQuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGlmIChzZWxmLmFycmF5UG9zID09IDEpe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAgc2VsZi5zdG9wTnVtID0gMTQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly9ldmVyeSBvdGhlciB0aW1lLCBkZWxldGUgdGhlIHdob2xlIHR5cGVkIHN0cmluZ1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBlbHNle1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAgc2VsZi5zdG9wTnVtID0gMDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gfVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLmNvbnRlbnRUeXBlID09PSAnaHRtbCcpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBza2lwIG92ZXIgaHRtbCB0YWdzIHdoaWxlIGJhY2tzcGFjaW5nXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGN1clN0cmluZy5zdWJzdHIoY3VyU3RyUG9zKS5jaGFyQXQoMCkgPT09ICc+Jykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHRhZyA9ICcnO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0d2hpbGUgKGN1clN0cmluZy5zdWJzdHIoY3VyU3RyUG9zIC0gMSkuY2hhckF0KDApICE9PSAnPCcpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGFnIC09IGN1clN0cmluZy5zdWJzdHIoY3VyU3RyUG9zKS5jaGFyQXQoMCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1clN0clBvcy0tO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY3VyU3RyUG9zIDwgMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjdXJTdHJQb3MtLTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRhZyArPSAnPCc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gLS0tLS0gY29udGludWUgaW1wb3J0YW50IHN0dWZmIC0tLS0tIC8vXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHJlcGxhY2UgdGV4dCB3aXRoIGJhc2UgdGV4dCArIHR5cGVkIGNoYXJhY3RlcnNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIG5leHRTdHJpbmcgPSBjdXJTdHJpbmcuc3Vic3RyKDAsIGN1clN0clBvcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLmF0dHIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmVsLmF0dHIoc2VsZi5hdHRyLCBuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5pc0lucHV0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmVsLnZhbChuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHNlbGYuY29udGVudFR5cGUgPT09ICdodG1sJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5lbC5odG1sKG5leHRTdHJpbmcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmVsLnRleHQobmV4dFN0cmluZyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaWYgdGhlIG51bWJlciAoaWQgb2YgY2hhcmFjdGVyIGluIGN1cnJlbnQgc3RyaW5nKSBpc1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBsZXNzIHRoYW4gdGhlIHN0b3AgbnVtYmVyLCBrZWVwIGdvaW5nXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjdXJTdHJQb3MgPiBzZWxmLnN0b3BOdW0pIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBzdWJ0cmFjdCBjaGFyYWN0ZXJzIG9uZSBieSBvbmVcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjdXJTdHJQb3MtLTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBsb29wIHRoZSBmdW5jdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuYmFja3NwYWNlKGN1clN0cmluZywgY3VyU3RyUG9zKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpZiB0aGUgc3RvcCBudW1iZXIgaGFzIGJlZW4gcmVhY2hlZCwgaW5jcmVhc2Vcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYXJyYXkgcG9zaXRpb24gdG8gbmV4dCBzdHJpbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoY3VyU3RyUG9zIDw9IHNlbGYuc3RvcE51bSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5hcnJheVBvcysrO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5hcnJheVBvcyA9PT0gc2VsZi5zdHJpbmdzLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmFycmF5UG9zID0gMDtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTaHVmZmxlIHNlcXVlbmNlIGFnYWluXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLnNodWZmbGUpIHNlbGYuc2VxdWVuY2UgPSBzZWxmLnNodWZmbGVBcnJheShzZWxmLnNlcXVlbmNlKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmluaXQoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBzZWxmLnR5cGV3cml0ZShzZWxmLnN0cmluZ3Nbc2VsZi5zZXF1ZW5jZVtzZWxmLmFycmF5UG9zXV0sIGN1clN0clBvcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGh1bWFuaXplZCB2YWx1ZSBmb3IgdHlwaW5nXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LCBodW1hbml6ZSk7XG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHQvKipcbiAgICAgICAgICogU2h1ZmZsZXMgdGhlIG51bWJlcnMgaW4gdGhlIGdpdmVuIGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheVxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAgICAgICAqL1xuXHRcdFx0XHRcdFx0XHRcdHNodWZmbGVBcnJheTogZnVuY3Rpb24gc2h1ZmZsZUFycmF5KGFycmF5KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgdG1wLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIGN1cnJlbnQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgdG9wID0gYXJyYXkubGVuZ3RoO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRvcCkgd2hpbGUgKC0tdG9wKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAodG9wICsgMSkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0bXAgPSBhcnJheVtjdXJyZW50XTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXJyYXlbY3VycmVudF0gPSBhcnJheVt0b3BdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhcnJheVt0b3BdID0gdG1wO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGFycmF5O1xuXHRcdFx0XHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRcdFx0XHQvLyBTdGFydCAmIFN0b3AgY3VycmVudGx5IG5vdCB3b3JraW5nXG5cblx0XHRcdFx0XHRcdFx0XHQvLyAsIHN0b3A6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdC8vICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyAgICAgc2VsZi5zdG9wID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHQvLyAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVvdXQpO1xuXHRcdFx0XHRcdFx0XHRcdC8vIH1cblxuXHRcdFx0XHRcdFx0XHRcdC8vICwgc3RhcnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdC8vICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gICAgIGlmKHNlbGYuc3RvcCA9PT0gZmFsc2UpXG5cdFx0XHRcdFx0XHRcdFx0Ly8gICAgICAgIHJldHVybjtcblxuXHRcdFx0XHRcdFx0XHRcdC8vICAgICB0aGlzLnN0b3AgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHQvLyAgICAgdGhpcy5pbml0KCk7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gfVxuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVzZXQgYW5kIHJlYnVpbGQgdGhlIGVsZW1lbnRcblx0XHRcdFx0XHRcdFx0XHRyZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjbGVhckludGVydmFsKHNlbGYudGltZW91dCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgaWQgPSB0aGlzLmVsLmF0dHIoJ2lkJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmVsLmVtcHR5KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZW9mIHRoaXMuY3Vyc29yICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmN1cnNvci5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuc3RyUG9zID0gMDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuYXJyYXlQb3MgPSAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5jdXJMb29wID0gMDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFNlbmQgdGhlIGNhbGxiYWNrXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLm9wdGlvbnMucmVzZXRDYWxsYmFjaygpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdCQuZm4udHlwZWQgPSBmdW5jdGlvbiAob3B0aW9uKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgJHRoaXMgPSAkKHRoaXMpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIGRhdGEgPSAkdGhpcy5kYXRhKCd0eXBlZCcpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIG9wdGlvbnMgPSAodHlwZW9mIG9wdGlvbiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yob3B0aW9uKSkgPT0gJ29iamVjdCcgJiYgb3B0aW9uO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YS5yZXNldCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0JHRoaXMuZGF0YSgndHlwZWQnLCBkYXRhID0gbmV3IFR5cGVkKHRoaXMsIG9wdGlvbnMpKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQkLmZuLnR5cGVkLmRlZmF1bHRzID0ge1xuXHRcdFx0XHRcdFx0XHRcdHN0cmluZ3M6IFtcIlRoZXNlIGFyZSB0aGUgZGVmYXVsdCB2YWx1ZXMuLi5cIiwgXCJZb3Uga25vdyB3aGF0IHlvdSBzaG91bGQgZG8/XCIsIFwiVXNlIHlvdXIgb3duIVwiLCBcIkhhdmUgYSBncmVhdCBkYXkhXCJdLFxuXHRcdFx0XHRcdFx0XHRcdHN0cmluZ3NFbGVtZW50OiBudWxsLFxuXHRcdFx0XHRcdFx0XHRcdC8vIHR5cGluZyBzcGVlZFxuXHRcdFx0XHRcdFx0XHRcdHR5cGVTcGVlZDogMCxcblx0XHRcdFx0XHRcdFx0XHQvLyB0aW1lIGJlZm9yZSB0eXBpbmcgc3RhcnRzXG5cdFx0XHRcdFx0XHRcdFx0c3RhcnREZWxheTogMCxcblx0XHRcdFx0XHRcdFx0XHQvLyBiYWNrc3BhY2luZyBzcGVlZFxuXHRcdFx0XHRcdFx0XHRcdGJhY2tTcGVlZDogMCxcblx0XHRcdFx0XHRcdFx0XHQvLyBzaHVmZmxlIHRoZSBzdHJpbmdzXG5cdFx0XHRcdFx0XHRcdFx0c2h1ZmZsZTogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gdGltZSBiZWZvcmUgYmFja3NwYWNpbmdcblx0XHRcdFx0XHRcdFx0XHRiYWNrRGVsYXk6IDUwMCxcblx0XHRcdFx0XHRcdFx0XHQvLyBsb29wXG5cdFx0XHRcdFx0XHRcdFx0bG9vcDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gZmFsc2UgPSBpbmZpbml0ZVxuXHRcdFx0XHRcdFx0XHRcdGxvb3BDb3VudDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gc2hvdyBjdXJzb3Jcblx0XHRcdFx0XHRcdFx0XHRzaG93Q3Vyc29yOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdC8vIGNoYXJhY3RlciBmb3IgY3Vyc29yXG5cdFx0XHRcdFx0XHRcdFx0Y3Vyc29yQ2hhcjogXCJ8XCIsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gYXR0cmlidXRlIHRvIHR5cGUgKG51bGwgPT0gdGV4dClcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiBudWxsLFxuXHRcdFx0XHRcdFx0XHRcdC8vIGVpdGhlciBodG1sIG9yIHRleHRcblx0XHRcdFx0XHRcdFx0XHRjb250ZW50VHlwZTogJ2h0bWwnLFxuXHRcdFx0XHRcdFx0XHRcdC8vIGNhbGwgd2hlbiBkb25lIGNhbGxiYWNrIGZ1bmN0aW9uXG5cdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2s6IGZ1bmN0aW9uIGNhbGxiYWNrKCkge30sXG5cdFx0XHRcdFx0XHRcdFx0Ly8gc3RhcnRpbmcgY2FsbGJhY2sgZnVuY3Rpb24gYmVmb3JlIGVhY2ggc3RyaW5nXG5cdFx0XHRcdFx0XHRcdFx0cHJlU3RyaW5nVHlwZWQ6IGZ1bmN0aW9uIHByZVN0cmluZ1R5cGVkKCkge30sXG5cdFx0XHRcdFx0XHRcdFx0Ly9jYWxsYmFjayBmb3IgZXZlcnkgdHlwZWQgc3RyaW5nXG5cdFx0XHRcdFx0XHRcdFx0b25TdHJpbmdUeXBlZDogZnVuY3Rpb24gb25TdHJpbmdUeXBlZCgpIHt9LFxuXHRcdFx0XHRcdFx0XHRcdC8vIGNhbGxiYWNrIGZvciByZXNldFxuXHRcdFx0XHRcdFx0XHRcdHJlc2V0Q2FsbGJhY2s6IGZ1bmN0aW9uIHJlc2V0Q2FsbGJhY2soKSB7fVxuXHRcdFx0XHR9O1xufSh3aW5kb3cualF1ZXJ5KTsiLCJcblxuXHRcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbJ3VpLnJvdXRlcicsICd1aS5ib290c3RyYXAnLCAnbmdBbmltYXRlJywnYW5ndWxhci10eXBlZCddKTtcblxuLy8gYXBwLnJ1bihmdW5jdGlvbihlZGl0YWJsZU9wdGlvbnMpIHtcbi8vICAgICBlZGl0YWJsZU9wdGlvbnMudGhlbWUgPSAnYnMzJzsgLy8gYm9vdHN0cmFwMyB0aGVtZS4gQ2FuIGJlIGFsc28gJ2JzMicsICdkZWZhdWx0J1xuLy8gfSk7XG5cbmFwcC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCBmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIHJlcXVpcmVCYXNlOiBmYWxzZVxuICAgIH0pO1xuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvXCIpO1xufV0pO1xuXG5hcHAuZGlyZWN0aXZlKCduYXZiYXInLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc3RhdGUsIGF1dGhGYWN0b3J5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL25hdkJhci9uYXZiYXIuaHRtbCcsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlKSB7XG4gICAgICAgICAgICBzY29wZS5zaG93TGluayA9IGZ1bmN0aW9uKGxpbmspIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWxpbmsuaXNBZG1pbiAmJiAobGluay5zdGF0ZSA9PT0gJ2FkbWluJyB8fCBsaW5rLnN0YXRlID09PSAnbG9naW4nKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzY29wZS5pc0xvZ2dlZEluID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF1dGhGYWN0b3J5LmlzQWRtaW4oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2NvcGUubGlua3MgPSBbXG4gICAgICAgICAgICAgICAgeyBsYWJlbDogJ0hvbWUnLCBzdGF0ZTogJ2hvbWUnIH0sXG4gICAgICAgICAgICAgICAgeyBsYWJlbDogJ1Byb2plY3RzJywgc3RhdGU6ICdwcm9qZWN0cycgfSxcbiAgICAgICAgICAgICAgICB7IGxhYmVsOiAnQWJvdXQgTWUnLCBzdGF0ZTogJ2Fib3V0JyB9XG4gICAgICAgICAgICAgICAgLy8geyBsYWJlbDogJ0ZlZWRiYWNrJywgc3RhdGU6ICdjb250YWN0JyB9LFxuICAgICAgICAgICAgICAgIC8vIHsgbGFiZWw6ICdBZG1pbiAnLCBzdGF0ZTogJ2FkbWluJywgaXNBZG1pbjogISRyb290U2NvcGUuYWRtaW4gfSxcbiAgICAgICAgICAgICAgICAvLyB7IGxhYmVsOiAnQWRtaW5pc3RyYXRvcicsIHN0YXRlOiAnbG9naW4nLCBpc0FkbWluOiAkcm9vdFNjb3BlLmFkbWluIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH1cbn0pXG5cblxuXG4vLyBhcHAucnVuKGZ1bmN0aW9uKCRyb290U2NvcGUsICRzdGF0ZSwgYXV0aEZhY3RvcnkpIHtcbi8vICAgICAkcm9vdFNjb3BlLmFkbWluID0gbnVsbDtcbi8vICAgICAkcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN0YXJ0XCIsIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBhdXRoRmFjdG9yeSkge1xuLy8gICAgICAgICBpZiAodG9TdGF0ZS5hdXRoZW50aWNhdGUgJiYgIWF1dGhGYWN0b3J5LmlzQWRtaW4oKSkge1xuLy8gICAgICAgICAgICAgLy8gVXNlciBpc27igJl0IGF1dGhlbnRpY2F0ZWRcbi8vICAgICAgICAgICAgICRzdGF0ZS50cmFuc2l0aW9uVG8oXCJob21lXCIpO1xuLy8gICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbi8vICAgICAgICAgfVxuLy8gICAgIH0pO1xuLy8gfSk7XG5cblxuIiwiYXBwLmNvbmZpZygkc3RhdGVQcm92aWRlciA9PiB7XG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2Fib3V0Jywge1xuICAgICAgICB1cmw6ICcvYWJvdXQnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJy9qcy9hYm91dC9hYm91dC5odG1sJyxcbiAgICAgICAgYXV0aGVudGljYXRlOiBmYWxzZVxuICAgIH0pXG59KVxuIiwiYXBwLmNvbnRyb2xsZXIoJ2FkbWluQ29udHJvbGxlcicsICgkc2NvcGUsICRzdGF0ZSwgYWRtaW5GYWN0b3J5LCBhbGxQcm9qZWN0cywgYXV0aEZhY3RvcnkpID0+IHtcblxuICAgICRzY29wZS5zdWJtaXRQcm9qZWN0ID0gZnVuY3Rpb24ocHJvamVjdCkge1xuICAgICAgICBhZG1pbkZhY3RvcnkucG9zdFByb2plY3QocHJvamVjdClcbiAgICAgICAgJHNjb3BlLnByb2plY3QgPSBudWxsO1xuICAgIH1cblxuICAgICRzY29wZS5hbGxQcm9qZWN0cyA9IGFsbFByb2plY3RzIHx8IFt7IGlkOiAwLCBuYW1lOiAnZW1wdHknLCBkZXBsb3k6ICdlbXB0eScsIGdpdEh1YjogXCJlbXB0eVwiIH1dXG5cbiAgICAkc2NvcGUuZGF0YSA9IHtcbiAgICAgICAgYXZhaWxhYmxlUHJvamVjdHM6ICRzY29wZS5hbGxQcm9qZWN0cyxcbiAgICAgICAgc2VsZWN0ZWRQcm9qZWN0OiB7IGlkOiAwLCBuYW1lOiAnZW1wdHknLCBkZXBsb3k6ICdlbXB0eScsIGdpdEh1YjogJ2VtcHR5JywgZGVzY3JpcHRpb246IFwiZW1wdHlcIiB9XG4gICAgfVxuXG4gICAgJHNjb3BlLnNlbGVjdGVkcHJvamVjdENoYW5nZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRQcm9qZWN0ID0gJHNjb3BlLnNlbGVjdGVkSXRlbTtcbiAgICB9XG5cbiAgICAkc2NvcGUubG9nT3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGF1dGhGYWN0b3J5LmxvZ091dCgpXG4gICAgICAgICRzdGF0ZS5nbygnaG9tZScpXG4gICAgfVxufSlcbiIsImFwcC5kaXJlY3RpdmUoJ3Byb2plY3RFZGl0JywgcHJvamVjdEZhY3RvcnkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBwcm9qZWN0OiAnPXByb2plY3QnXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYWRtaW5FZGl0Lmh0bWwnXG4gICAgfTtcbn0pO1xuIiwiYXBwLmZhY3RvcnkoJ2FkbWluRmFjdG9yeScsICRodHRwID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBwb3N0UHJvamVjdDogcHJvamVjdCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wcm9qZWN0JywgcHJvamVjdClcbiAgICAgICAgICAgICAgICAudGhlbihcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGFcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKVxuICAgICAgICB9LFxuICAgICAgICBnZXRBbGxQcm9qZWN0czogKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9wcm9qZWN0JylcbiAgICAgICAgICAgICAgICAudGhlbihcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKVxuICAgICAgICB9XG4gICAgfVxufSlcbiIsImFwcC5jb25maWcoJHN0YXRlUHJvdmlkZXIgPT4ge1xuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdhZG1pbicsIHtcbiAgICAgICAgdXJsOiAnL2FkbWluJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICcvanMvYWRtaW4vYWRtaW4uaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdhZG1pbkNvbnRyb2xsZXInLFxuICAgICAgICBhdXRoZW50aWNhdGU6IHRydWUsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgIGFsbFByb2plY3RzOiBhZG1pbkZhY3RvcnkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBhZG1pbkZhY3RvcnkuZ2V0QWxsUHJvamVjdHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG59KVxuIiwiYXBwLmNvbnRyb2xsZXIoJ2NvbnRhY3RDb250cm9sbGVyJywgKCRzY29wZSwgcG9zdHMsIGZlZWRCYWNrRmFjdG9yeSkgPT4ge1xuICAgICRzY29wZS5wb3N0cyA9IHBvc3RzO1xuICAgICRzY29wZS5nZXRSZXBsaWVzID0gZmVlZEJhY2tGYWN0b3J5LmdldFJlcGxpZXM7XG4gICAgJHNjb3BlLnBvc3RSZXBseSA9IChwb3N0SWQsIGNvbnRlbnQpID0+IHtcbiAgICAgICAgbGV0IHJlcGx5SW5mbyA9IHsgcG9zdElkLCBjb250ZW50IH1cbiAgICAgICAgZmVlZEJhY2tGYWN0b3J5LnBvc3RSZXBsWShyZXBseUluZm8pXG4gICAgfVxuXG4gICAgJHNjb3BlLnN1Ym1pdEZvcm0gPSBkYXRhID0+IHtcbiAgICAgICAgZmVlZEJhY2tGYWN0b3J5LnBvc3RDb21tZW50KGRhdGEpXG4gICAgICAgICAgICAudGhlbihcbiAgICAgICAgICAgICAgICBuZXdQb3N0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RzWyRzY29wZS5wb3N0cy5sZW5ndGhdID0gbmV3UG9zdFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKVxuICAgICAgICAkc2NvcGUudXNlciA9IG51bGxcbiAgICAgICAgJHNjb3BlLnVzZXJGb3JtLiRzZXRQcmlzdGluZSh0cnVlKVxuICAgIH1cblxuICAgICRzY29wZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUudXNlciA9IG51bGxcbiAgICAgICAgJHNjb3BlLnVzZXJGb3JtLiRzZXRQcmlzdGluZSh0cnVlKVxuICAgIH1cblxuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCRzY29wZS5tZXNzYWdlICYmICRzY29wZS5lbWFpbCAmJiAkc2NvcGUubmFtZSkge1xuICAgICAgICAgICAgY29udHJvbGxlckZhY3Rvcnkuc2VuZE1lc3NhZ2UoJHNjb3BlLm5hbWUsICRzY29wZS5lbWFpbCwgJHNjb3BlLm1lc3NhZ2UpXG4gICAgICAgIH1cbiAgICB9XG59KVxuIiwiYXBwLmRpcmVjdGl2ZSgncmVwbGllcycsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdwb3N0IGRpcmVjdGl2ZScpXG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgcG9zdDogXCI9XCJcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9jb250YWN0L3RlbXBsYXRlL3JlcGx5Vmlldy5odG1sJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcblxuICAgICAgICAgICAgICAgIHNjb3BlLnJlcGxpZXMgPSBbXG4gICAgICAgICAgICAgICAgeyBsYWJlbDogJ0hvbWUnLCBzdGF0ZTogJ2hvbWUnIH0sXG4gICAgICAgICAgICAgICAgeyBsYWJlbDogJ1Byb2plY3RzJywgc3RhdGU6ICdwcm9qZWN0cycgfSxcbiAgICAgICAgICAgICAgICB7IGxhYmVsOiAnQWJvdXQgTWUnLCBzdGF0ZTogJ2Fib3V0JyB9LFxuICAgICAgICAgICAgICAgIHsgbGFiZWw6ICdDb250YWN0IE1lJywgc3RhdGU6ICdjb250YWN0JyB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICB9XG59KVxuIiwiYXBwLmZhY3RvcnkoJ2ZlZWRCYWNrRmFjdG9yeScsIGZ1bmN0aW9uKCRodHRwKSB7XG5cbiAgICBjb25zb2xlLmxvZyhcIkluIHRoZSBmZWViYWNrIGZhY3RvcnlcIilcbiAgICB2YXIgZmVlZEJhY2tGYWN0b3J5ID0ge31cbiAgICBmZWVkQmFja0ZhY3RvcnkuZ2V0UG9zdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jb21tZW50JylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldHRpbmcgY29tbWVudHMnKVxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKClcbiAgICB9XG4gICAgZmVlZEJhY2tGYWN0b3J5LnBvc3RDb21tZW50ID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICBjb25zb2xlLmxvZygnUG9zdGluZyBjb21tZW50JylcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tbWVudCcsIGNvbnRlbnQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihzdWNjZXNmdWxDb21tZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coc3VjY2VzZnVsQ29tbWVudClcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VjY2VzZnVsQ29tbWVudC5kYXRhXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKClcbiAgICB9XG4gICAgZmVlZEJhY2tGYWN0b3J5LmdldFJlcGxpZXMgPSBmdW5jdGlvbihjb21tZW50SWQpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9yZXBseS8nICsgY29tbWVudElkKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVwbGllcykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnb3QgY29tbWVudHMnKVxuICAgICAgICAgICAgICAgIHJldHVybiByZXBsaWVzLmRhdGFcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKVxuICAgIH1cbiAgICBmZWVkQmFja0ZhY3RvcnkucG9zdFJlcGxZID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICBjb25zb2xlLmxvZygncnVubmluZyBwb3N0IHJlcGx5JywgbWVzc2FnZSlcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcmVwbHkvJywge3Bvc3RfaWQ6cGFyc2VJbnQobWVzc2FnZS5wb3N0SWQucG9zdElkKSAsY29udGVudDptZXNzYWdlLmNvbnRlbnQuY29udGVudH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihwb3N0ZWRDb21tZW50KXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9zdGVkQ29tbWVudC5kYXRhXG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBmZWVkQmFja0ZhY3RvcnlcblxufSlcbiIsImFwcC5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnY29udGFjdCcsIHtcbiAgICAgICAgdXJsOiAnL2NvbnRhY3QnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJy9qcy9jb250YWN0L2NvbnRhY3QuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdjb250YWN0Q29udHJvbGxlcicsXG4gICAgICAgIGF1dGhlbnRpY2F0ZTogZmFsc2UsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgIHBvc3RzOiBmdW5jdGlvbihmZWVkQmFja0ZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaW52b2tpbmcgZmVlZEJhY2tGYWN0b3J5JylcbiAgICAgICAgICAgICAgICByZXR1cm4gZmVlZEJhY2tGYWN0b3J5LmdldFBvc3RzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxufSlcbiIsImNvbnNvbGUubG9nKCdiYXIgY3RybCBsb2FkZWQnKVxuXG5hcHAuY29udHJvbGxlcihcIkJhckN0cmxcIiwgZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCkge1xuXG5cdCAgICAkc2NvcGUudGltZUluTXMgPSAwO1xuXG4gICAgdmFyIGNvdW50VXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnRpbWVJbk1zKz0gNTAwO1xuICAgICAgICAkdGltZW91dChjb3VudFVwLCA1MDApO1xuICAgIH1cblxuICAgICR0aW1lb3V0KGNvdW50VXAsIDUwMCk7XG5cbn0pO1xuIiwiYXBwLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlcikge1xuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdob21lJywge1xuICAgICAgICB1cmw6ICcvJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICcvanMvaG9tZS9ob21lLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnQmFyQ3RybCcsXG4gICAgICAgIGF1dGhlbnRpY2F0ZTogZmFsc2VcbiAgICB9KVxufSlcbiIsImFwcC5jb250cm9sbGVyKCdsb2dpbkNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgYXV0aEZhY3RvcnksICRsb2NhdGlvbikge1xuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbG9naW5JbmZvID0geyBuYW1lOiAkc2NvcGUudXNlcm5hbWUsIHBhc3N3b3JkOiAkc2NvcGUucGFzc3dvcmQgfVxuICAgICAgICBhdXRoRmFjdG9yeS5sb2dpbihsb2dpbkluZm8pXG4gICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnLCB7fSwgeyByZWxvYWQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKCk7XG5cblxuICAgIH1cbn0pXG4iLCJhcHAuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJy9qcy9sb2dpbi9sb2dpbi5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlcicsXG4gICAgICAgIGF1dGhlbnRpY2F0ZTogZmFsc2VcbiAgICB9KVxufSlcbiIsImFwcC5jb250cm9sbGVyKCdhdXRoQ29udHJvbGxlcicsICgkc2NvcGUsIGF1dGhGYWN0b3J5KSA9PiB7XG4gICAgJHNjb3BlLmlzQWRtaW4gPSBhdXRoRmFjdG9yeS5pc0FkbWluKClcbn0pXG4iLCJhcHAuZmFjdG9yeSgnYXV0aEZhY3RvcnknLCAoJGh0dHAsICRzdGF0ZSwgJHJvb3RTY29wZSkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIGlzQWRtaW46ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhISRyb290U2NvcGUuYWRtaW5cbiAgICAgICAgfSxcbiAgICAgICAgbG9naW46IGxvZ2luSW5mbyA9PiB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2F1dGhlbnRpY2F0aW9uLycgKyBsb2dpbkluZm8ubmFtZSArICcvJyArIGxvZ2luSW5mby5wYXNzd29yZClcbiAgICAgICAgICAgICAgICAudGhlbihcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25EZWNpc2lvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWF1dGhlbnRpY2F0aW9uRGVjaXNpb24uZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuYWRtaW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5hZG1pbiA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhdXRoZW50aWNhdGlvbkRlY2lzaW9uXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKClcbiAgICAgICAgfSxcbiAgICAgICAgbG9nT3V0OiAoKSA9PiB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmFkbWluID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn0pXG4iLCJhcHAuY29udHJvbGxlcigncHJvamVjdENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsIGFsbFByb2plY3RzKSB7XG4gICAgJHNjb3BlLnByb2plY3RzID0gYWxsUHJvamVjdHNcbn0pXG5cbmFwcC5jb250cm9sbGVyKCdzaW5nbGVQcm9qZWN0Q29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgcHJvamVjdEZhY3RvcnksIGN1cnJlbnRQcm9qZWN0LCAkc2NlKSB7XG4gICAgJHNjb3BlLmN1cnJlbnRQcm9qZWN0ID0gY3VycmVudFByb2plY3Q7XG5cbiAgICAkc2NvcGUudHJ1c3RTcmMgPSBmdW5jdGlvbihzcmMpIHtcbiAgICAgICAgcmV0dXJuICRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHNyYyk7XG4gICAgfVxuXG4gICAgJHNjb3BlLm1vdmllID0geyBzcmM6ICRzY29wZS5jdXJyZW50UHJvamVjdC52aWRlb0xpbmsgfVxuXG4gICAgJHNjb3BlLmhhc1ZpZGVvTGluayA9IGZ1bmN0aW9uIGhhc1ZpZGVvTGluaygpIHtcbiAgICAgICAgcmV0dXJuICEhY3VycmVudFByb2plY3QudmlkZW9MaW5rXG4gICAgfVxufSlcbiIsImFwcC5kaXJlY3RpdmUoJ3Byb2plY3RUaWxlJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgcHJvamVjdDogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnanMvcHJvamVjdHMvc2luZ2xlUHJvamVjdC9zaW5nbGVQcm9qZWN0VGlsZS5odG1sJ1xuICAgIH1cbn0pO1xuIiwiYXBwLmZhY3RvcnkoJ3Byb2plY3RGYWN0b3J5JywgJGh0dHAgPT4ge1xuICAgIGxldCBnZXREYXRhID0gIGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRBbGxQcm9qZWN0czogKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9wcm9qZWN0JylcbiAgICAgICAgICAgICAgICAudGhlbihnZXREYXRhKVxuICAgICAgICAgICAgICAgIC5jYXRjaCgpXG4gICAgICAgIH0sXG4gICAgICAgIGdldFNpbmdsZVByb2plY3Q6IGZ1bmN0aW9uKHByb2plY3RJRCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9wcm9qZWN0LycgKyBwcm9qZWN0SUQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZ2V0RGF0YSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKVxuICAgICAgICB9LFxuICAgICAgICBwb3N0UHJvamVjdDogZnVuY3Rpb24ocHJvamVjdCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcHJvamVjdCcsIHByb2plY3QpXG4gICAgICAgICAgICAgICAgLnRoZW4oZ2V0RGF0YSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKVxuICAgICAgICB9LFxuICAgICAgICB1cGRhdGVQcm9qZWN0OiBmdW5jdGlvbih1cGRhdGVkUHJvamVjdCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnYXBpL3Byb2plY3QnLCB1cGRhdGVkUHJvamVjdClcbiAgICAgICAgICAgICAgICAudGhlbihnZXREYXRhKVxuICAgICAgICAgICAgICAgIC5jYXRjaCgpXG4gICAgICAgIH1cbiAgICB9XG59KVxuIiwiYXBwLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlcikge1xuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdwcm9qZWN0cycsIHtcbiAgICAgICAgdXJsOiAnL3Byb2plY3RzJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICcvanMvcHJvamVjdHMvcHJvamVjdHMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdwcm9qZWN0Q29udHJvbGxlcicsXG4gICAgICAgIGF1dGhlbnRpY2F0ZTogZmFsc2UsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgIGFsbFByb2plY3RzOiBmdW5jdGlvbihwcm9qZWN0RmFjdG9yeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9qZWN0RmFjdG9yeS5nZXRBbGxQcm9qZWN0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcblxuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdzaW5nbGVQcm9qZWN0Jywge1xuICAgICAgICB1cmw6ICcvcHJvamVjdHMvOmlkJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICcvanMvcHJvamVjdHMvc2luZ2xlUHJvamVjdC9zaW5nbGVQcm9qZWN0Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnc2luZ2xlUHJvamVjdENvbnRyb2xsZXInLFxuICAgICAgICBhdXRoZW50aWNhdGU6IGZhbHNlLFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICBjdXJyZW50UHJvamVjdDogZnVuY3Rpb24ocHJvamVjdEZhY3RvcnksICRzdGF0ZVBhcmFtcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9qZWN0RmFjdG9yeS5nZXRTaW5nbGVQcm9qZWN0KCRzdGF0ZVBhcmFtcy5pZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufSlcbiIsIlxuLy8gR3JhYiBub2RlIHBhY2thZ2VzXG52YXIgZ3VscCA9IHJlcXVpcmUoJ2d1bHAnKVxuICAgIHJlbmFtZSA9IHJlcXVpcmUoJ2d1bHAtcmVuYW1lJylcbiAgICB1Z2xpZnkgPSByZXF1aXJlKCdndWxwLXVnbGlmeScpO1xuXG4gXG5ndWxwLnRhc2soJ2NvbXByZXNzJywgZnVuY3Rpb24oKSB7XG4gIGd1bHAuc3JjKCdqcy8qLmpzJylcbiAgICAucGlwZSh1Z2xpZnkoKSlcbiAgICAucGlwZShyZW5hbWUoJ3R5cGVkLm1pbi5qcycpKVxuICAgIC5waXBlKGd1bHAuZGVzdCgnZGlzdCcpKVxufSk7XG5cbi8vIERlZmF1bHQgVGFza1xuZ3VscC50YXNrKCdkZWZhdWx0JywgWydjb21wcmVzcyddKTtcbiIsIihmdW5jdGlvbiAoKSB7XG5cblx0Y29uc29sZS5sb2coJ2FiLlR5cGVpdCBhYm91dCB0bycpXG5cdGFuZ3VsYXIubW9kdWxlKCdhYi5UeXBlaXQnLCBbXSkuZGlyZWN0aXZlKCdhYlR5cGVpdCcsIGZ1bmN0aW9uKCkge1xuXHRcdGNvbmVvbGUubG9nKCdydW5uaW5nIHRoZSB3cmFwcGVyJylcblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdBJyxcblx0XHRcdHNjb3BlOiB7XG5cdFx0XHRcdHR5cGVpdFN0cmluZ3M6ICc9YWJUeXBlaXQnLFxuXHRcdFx0XHR0eXBlaXRMb29wOiAnPScsXG5cdFx0XHRcdHR5cGVpdExvb3BEZWxheTogJz0nLFxuXHRcdFx0XHR0eXBlaXRCcmVha0xpbmVzOiAnPScsXG5cdFx0XHRcdHR5cGVpdFNwZWVkOiAnPScsXG5cdFx0XHRcdHR5cGVpdExpZmVMaWtlOiAnPScsXG5cdFx0XHRcdHR5cGVpdEN1cnNvcjogJz0nLFxuXHRcdFx0XHR0eXBlaXRDdXJzb3JTcGVlZDogJz0nLFxuXHRcdFx0XHR0eXBlaXRTdGFydERlbGF5OiAnPScsXG5cdFx0XHRcdHR5cGVpdEJyZWFrRGVsYXk6ICc9J1xuXHRcdFx0fSxcblx0XHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMpIHtcblx0XHRcdFx0dmFyIHR5cGVJdEVsZW1lbnQgPSAkKCRlbGVtZW50KTtcblxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHR5cGVJdEVsZW1lbnQudHlwZUl0KHtcblx0XHRcdFx0XHRcdHN0cmluZ3M6ICRzY29wZS50eXBlaXRTdHJpbmdzLFxuXHRcdFx0XHRcdFx0bG9vcDogJHNjb3BlLnR5cGVpdExvb3AsXG5cdFx0XHRcdFx0XHRsb29wRGVsYXk6ICRzY29wZS50eXBlaXRMb29wRGVsYXksXG5cdFx0XHRcdFx0XHRicmVha0xpbmVzOiAkc2NvcGUudHlwZWl0QnJlYWtMaW5lcyxcblx0XHRcdFx0XHRcdHNwZWVkOiAkc2NvcGUudHlwZWl0U3BlZWQsXG5cdFx0XHRcdFx0XHRsaWZlTGlrZTogJHNjb3BlLnR5cGVpdExpZmVMaWtlLFxuXHRcdFx0XHRcdFx0Y3Vyc29yOiAkc2NvcGUudHlwZWl0Q3Vyc29yLFxuXHRcdFx0XHRcdFx0Y3Vyc29yU3BlZWQ6ICRzY29wZS50eXBlaXRDdXJzb3JTcGVlZCxcblx0XHRcdFx0XHRcdHN0YXJ0RGVsYXk6ICRzY29wZS50eXBlaXRTdGFydERlbGF5LFxuXHRcdFx0XHRcdFx0YnJlYWtEZWxheTogJHNjb3BlLnR5cGVpdEJyZWFrRGVsYXlcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ09IIE5PISBhbmd1bGFyLXR5cGVpdCByZXF1aXJlcyB0eXBlaXQuanMgb24geW91ciBwYWdlIC0gZG8geW91IGhhdmUgaXQgbG9hZGVkPycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fSk7XG59KSgpOyIsIlxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAkKFwiLmRldmVsb3BlclwiKVxuICAgICAgLnR5cGVkKHtcbiAgICAgICAgc3RyaW5nczogW1wiRnJvbnQtZW5kXCIsIFwiQmFjay1lbmRcIiwgXCJGdWxsc3RhY2tcIiwgXCJTb2Z0d2FyZVwiLFwiSmF2YVNjcmlwdFwiLFwiQW5ndWxhckpTXCIsXCJVSS9VWFwiXSxcbiAgICAgICAgdHlwZVNwZWVkOiAyNTAsXG4gICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgIGN1cnNvclNwZWVkOjEwMCxcbiAgICAgICAgbGlmZUxpa2U6IHRydWUsXG4gICAgICAgIGN1cnNlcjogdHJ1ZSxcbiAgICAgICAgZGVsZXRlU3BlZWQ6IDEwMDBcbiAgICAgIH0pO1xuICB9OyIsIiFmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgcz1mdW5jdGlvbihzLGUpe3RoaXMuZWw9dChzKSx0aGlzLm9wdGlvbnM9dC5leHRlbmQoe30sdC5mbi50eXBlZC5kZWZhdWx0cyxlKSx0aGlzLmlzSW5wdXQ9dGhpcy5lbC5pcyhcImlucHV0XCIpLHRoaXMuYXR0cj10aGlzLm9wdGlvbnMuYXR0cix0aGlzLnNob3dDdXJzb3I9dGhpcy5pc0lucHV0PyExOnRoaXMub3B0aW9ucy5zaG93Q3Vyc29yLHRoaXMuZWxDb250ZW50PXRoaXMuYXR0cj90aGlzLmVsLmF0dHIodGhpcy5hdHRyKTp0aGlzLmVsLnRleHQoKSx0aGlzLmNvbnRlbnRUeXBlPXRoaXMub3B0aW9ucy5jb250ZW50VHlwZSx0aGlzLnR5cGVTcGVlZD10aGlzLm9wdGlvbnMudHlwZVNwZWVkLHRoaXMuc3RhcnREZWxheT10aGlzLm9wdGlvbnMuc3RhcnREZWxheSx0aGlzLmJhY2tTcGVlZD10aGlzLm9wdGlvbnMuYmFja1NwZWVkLHRoaXMuYmFja0RlbGF5PXRoaXMub3B0aW9ucy5iYWNrRGVsYXksdGhpcy5zdHJpbmdzRWxlbWVudD10aGlzLm9wdGlvbnMuc3RyaW5nc0VsZW1lbnQsdGhpcy5zdHJpbmdzPXRoaXMub3B0aW9ucy5zdHJpbmdzLHRoaXMuc3RyUG9zPTAsdGhpcy5hcnJheVBvcz0wLHRoaXMuc3RvcE51bT0wLHRoaXMubG9vcD10aGlzLm9wdGlvbnMubG9vcCx0aGlzLmxvb3BDb3VudD10aGlzLm9wdGlvbnMubG9vcENvdW50LHRoaXMuY3VyTG9vcD0wLHRoaXMuc3RvcD0hMSx0aGlzLmN1cnNvckNoYXI9dGhpcy5vcHRpb25zLmN1cnNvckNoYXIsdGhpcy5zaHVmZmxlPXRoaXMub3B0aW9ucy5zaHVmZmxlLHRoaXMuc2VxdWVuY2U9W10sdGhpcy5idWlsZCgpfTtzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6cyxpbml0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2Zvcih2YXIgcz0wO3M8dC5zdHJpbmdzLmxlbmd0aDsrK3MpdC5zZXF1ZW5jZVtzXT1zO3Quc2h1ZmZsZSYmKHQuc2VxdWVuY2U9dC5zaHVmZmxlQXJyYXkodC5zZXF1ZW5jZSkpLHQudHlwZXdyaXRlKHQuc3RyaW5nc1t0LnNlcXVlbmNlW3QuYXJyYXlQb3NdXSx0LnN0clBvcyl9LHQuc3RhcnREZWxheSl9LGJ1aWxkOmZ1bmN0aW9uKCl7dmFyIHM9dGhpcztpZih0aGlzLnNob3dDdXJzb3I9PT0hMCYmKHRoaXMuY3Vyc29yPXQoJzxzcGFuIGNsYXNzPVwidHlwZWQtY3Vyc29yXCI+Jyt0aGlzLmN1cnNvckNoYXIrXCI8L3NwYW4+XCIpLHRoaXMuZWwuYWZ0ZXIodGhpcy5jdXJzb3IpKSx0aGlzLnN0cmluZ3NFbGVtZW50KXt0aGlzLnN0cmluZ3M9W10sdGhpcy5zdHJpbmdzRWxlbWVudC5oaWRlKCksY29uc29sZS5sb2codGhpcy5zdHJpbmdzRWxlbWVudC5jaGlsZHJlbigpKTt2YXIgZT10aGlzLnN0cmluZ3NFbGVtZW50LmNoaWxkcmVuKCk7dC5lYWNoKGUsZnVuY3Rpb24oZSxpKXtzLnN0cmluZ3MucHVzaCh0KGkpLmh0bWwoKSl9KX10aGlzLmluaXQoKX0sdHlwZXdyaXRlOmZ1bmN0aW9uKHQscyl7aWYodGhpcy5zdG9wIT09ITApe3ZhciBlPU1hdGgucm91bmQoNzAqTWF0aC5yYW5kb20oKSkrdGhpcy50eXBlU3BlZWQsaT10aGlzO2kudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGU9MCxyPXQuc3Vic3RyKHMpO2lmKFwiXlwiPT09ci5jaGFyQXQoMCkpe3ZhciBvPTE7L15cXF5cXGQrLy50ZXN0KHIpJiYocj0vXFxkKy8uZXhlYyhyKVswXSxvKz1yLmxlbmd0aCxlPXBhcnNlSW50KHIpKSx0PXQuc3Vic3RyaW5nKDAscykrdC5zdWJzdHJpbmcocytvKX1pZihcImh0bWxcIj09PWkuY29udGVudFR5cGUpe3ZhciBuPXQuc3Vic3RyKHMpLmNoYXJBdCgwKTtpZihcIjxcIj09PW58fFwiJlwiPT09bil7dmFyIGE9XCJcIixoPVwiXCI7Zm9yKGg9XCI8XCI9PT1uP1wiPlwiOlwiO1wiO3Quc3Vic3RyKHMrMSkuY2hhckF0KDApIT09aCYmKGErPXQuc3Vic3RyKHMpLmNoYXJBdCgwKSxzKyssIShzKzE+dC5sZW5ndGgpKTspO3MrKyxhKz1ofX1pLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2lmKHM9PT10Lmxlbmd0aCl7aWYoaS5vcHRpb25zLm9uU3RyaW5nVHlwZWQoaS5hcnJheVBvcyksaS5hcnJheVBvcz09PWkuc3RyaW5ncy5sZW5ndGgtMSYmKGkub3B0aW9ucy5jYWxsYmFjaygpLGkuY3VyTG9vcCsrLGkubG9vcD09PSExfHxpLmN1ckxvb3A9PT1pLmxvb3BDb3VudCkpcmV0dXJuO2kudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5iYWNrc3BhY2UodCxzKX0saS5iYWNrRGVsYXkpfWVsc2V7MD09PXMmJmkub3B0aW9ucy5wcmVTdHJpbmdUeXBlZChpLmFycmF5UG9zKTt2YXIgZT10LnN1YnN0cigwLHMrMSk7aS5hdHRyP2kuZWwuYXR0cihpLmF0dHIsZSk6aS5pc0lucHV0P2kuZWwudmFsKGUpOlwiaHRtbFwiPT09aS5jb250ZW50VHlwZT9pLmVsLmh0bWwoZSk6aS5lbC50ZXh0KGUpLHMrKyxpLnR5cGV3cml0ZSh0LHMpfX0sZSl9LGUpfX0sYmFja3NwYWNlOmZ1bmN0aW9uKHQscyl7aWYodGhpcy5zdG9wIT09ITApe3ZhciBlPU1hdGgucm91bmQoNzAqTWF0aC5yYW5kb20oKSkrdGhpcy5iYWNrU3BlZWQsaT10aGlzO2kudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoXCJodG1sXCI9PT1pLmNvbnRlbnRUeXBlJiZcIj5cIj09PXQuc3Vic3RyKHMpLmNoYXJBdCgwKSl7Zm9yKHZhciBlPVwiXCI7XCI8XCIhPT10LnN1YnN0cihzLTEpLmNoYXJBdCgwKSYmKGUtPXQuc3Vic3RyKHMpLmNoYXJBdCgwKSxzLS0sISgwPnMpKTspO3MtLSxlKz1cIjxcIn12YXIgcj10LnN1YnN0cigwLHMpO2kuYXR0cj9pLmVsLmF0dHIoaS5hdHRyLHIpOmkuaXNJbnB1dD9pLmVsLnZhbChyKTpcImh0bWxcIj09PWkuY29udGVudFR5cGU/aS5lbC5odG1sKHIpOmkuZWwudGV4dChyKSxzPmkuc3RvcE51bT8ocy0tLGkuYmFja3NwYWNlKHQscykpOnM8PWkuc3RvcE51bSYmKGkuYXJyYXlQb3MrKyxpLmFycmF5UG9zPT09aS5zdHJpbmdzLmxlbmd0aD8oaS5hcnJheVBvcz0wLGkuc2h1ZmZsZSYmKGkuc2VxdWVuY2U9aS5zaHVmZmxlQXJyYXkoaS5zZXF1ZW5jZSkpLGkuaW5pdCgpKTppLnR5cGV3cml0ZShpLnN0cmluZ3NbaS5zZXF1ZW5jZVtpLmFycmF5UG9zXV0scykpfSxlKX19LHNodWZmbGVBcnJheTpmdW5jdGlvbih0KXt2YXIgcyxlLGk9dC5sZW5ndGg7aWYoaSlmb3IoOy0taTspZT1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGkrMSkpLHM9dFtlXSx0W2VdPXRbaV0sdFtpXT1zO3JldHVybiB0fSxyZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7Y2xlYXJJbnRlcnZhbCh0LnRpbWVvdXQpO3RoaXMuZWwuYXR0cihcImlkXCIpO3RoaXMuZWwuZW1wdHkoKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgdGhpcy5jdXJzb3ImJnRoaXMuY3Vyc29yLnJlbW92ZSgpLHRoaXMuc3RyUG9zPTAsdGhpcy5hcnJheVBvcz0wLHRoaXMuY3VyTG9vcD0wLHRoaXMub3B0aW9ucy5yZXNldENhbGxiYWNrKCl9fSx0LmZuLnR5cGVkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaT10KHRoaXMpLHI9aS5kYXRhKFwidHlwZWRcIiksbz1cIm9iamVjdFwiPT10eXBlb2YgZSYmZTtyJiZyLnJlc2V0KCksaS5kYXRhKFwidHlwZWRcIixyPW5ldyBzKHRoaXMsbykpLFwic3RyaW5nXCI9PXR5cGVvZiBlJiZyW2VdKCl9KX0sdC5mbi50eXBlZC5kZWZhdWx0cz17c3RyaW5nczpbXCJUaGVzZSBhcmUgdGhlIGRlZmF1bHQgdmFsdWVzLi4uXCIsXCJZb3Uga25vdyB3aGF0IHlvdSBzaG91bGQgZG8/XCIsXCJVc2UgeW91ciBvd24hXCIsXCJIYXZlIGEgZ3JlYXQgZGF5IVwiXSxzdHJpbmdzRWxlbWVudDpudWxsLHR5cGVTcGVlZDowLHN0YXJ0RGVsYXk6MCxiYWNrU3BlZWQ6MCxzaHVmZmxlOiExLGJhY2tEZWxheTo1MDAsbG9vcDohMSxsb29wQ291bnQ6ITEsc2hvd0N1cnNvcjohMCxjdXJzb3JDaGFyOlwifFwiLGF0dHI6bnVsbCxjb250ZW50VHlwZTpcImh0bWxcIixjYWxsYmFjazpmdW5jdGlvbigpe30scHJlU3RyaW5nVHlwZWQ6ZnVuY3Rpb24oKXt9LG9uU3RyaW5nVHlwZWQ6ZnVuY3Rpb24oKXt9LHJlc2V0Q2FsbGJhY2s6ZnVuY3Rpb24oKXt9fX0od2luZG93LmpRdWVyeSk7IiwiLy8gVGhlIE1JVCBMaWNlbnNlIChNSVQpXG5cbi8vIFR5cGVkLmpzIHwgQ29weXJpZ2h0IChjKSAyMDE2IE1hdHQgQm9sZHQgfCB3d3cubWF0dGJvbGR0LmNvbVxuXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG5cblxuXG5cbiEgZnVuY3Rpb24oJCkge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBUeXBlZCA9IGZ1bmN0aW9uKGVsLCBvcHRpb25zKSB7XG5cblx0XHQvLyBjaG9zZW4gZWxlbWVudCB0byBtYW5pcHVsYXRlIHRleHRcblx0XHR0aGlzLmVsID0gJChlbCk7XG5cblx0XHQvLyBvcHRpb25zXG5cdFx0dGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sICQuZm4udHlwZWQuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG5cdFx0Ly8gYXR0cmlidXRlIHRvIHR5cGUgaW50b1xuXHRcdHRoaXMuaXNJbnB1dCA9IHRoaXMuZWwuaXMoJ2lucHV0Jyk7XG5cdFx0dGhpcy5hdHRyID0gdGhpcy5vcHRpb25zLmF0dHI7XG5cblx0XHQvLyBzaG93IGN1cnNvclxuXHRcdHRoaXMuc2hvd0N1cnNvciA9IHRoaXMuaXNJbnB1dCA/IGZhbHNlIDogdGhpcy5vcHRpb25zLnNob3dDdXJzb3I7XG5cblx0XHQvLyB0ZXh0IGNvbnRlbnQgb2YgZWxlbWVudFxuXHRcdHRoaXMuZWxDb250ZW50ID0gdGhpcy5hdHRyID8gdGhpcy5lbC5hdHRyKHRoaXMuYXR0cikgOiB0aGlzLmVsLnRleHQoKTtcblxuXHRcdC8vIGh0bWwgb3IgcGxhaW4gdGV4dFxuXHRcdHRoaXMuY29udGVudFR5cGUgPSB0aGlzLm9wdGlvbnMuY29udGVudFR5cGU7XG5cblx0XHQvLyB0eXBpbmcgc3BlZWRcblx0XHR0aGlzLnR5cGVTcGVlZCA9IHRoaXMub3B0aW9ucy50eXBlU3BlZWQ7XG5cblx0XHQvLyBhZGQgYSBkZWxheSBiZWZvcmUgdHlwaW5nIHN0YXJ0c1xuXHRcdHRoaXMuc3RhcnREZWxheSA9IHRoaXMub3B0aW9ucy5zdGFydERlbGF5O1xuXG5cdFx0Ly8gYmFja3NwYWNpbmcgc3BlZWRcblx0XHR0aGlzLmJhY2tTcGVlZCA9IHRoaXMub3B0aW9ucy5iYWNrU3BlZWQ7XG5cblx0XHQvLyBhbW91bnQgb2YgdGltZSB0byB3YWl0IGJlZm9yZSBiYWNrc3BhY2luZ1xuXHRcdHRoaXMuYmFja0RlbGF5ID0gdGhpcy5vcHRpb25zLmJhY2tEZWxheTtcblxuXHRcdC8vIGRpdiBjb250YWluaW5nIHN0cmluZ3Ncblx0XHR0aGlzLnN0cmluZ3NFbGVtZW50ID0gdGhpcy5vcHRpb25zLnN0cmluZ3NFbGVtZW50O1xuXG5cdFx0Ly8gaW5wdXQgc3RyaW5ncyBvZiB0ZXh0XG5cdFx0dGhpcy5zdHJpbmdzID0gdGhpcy5vcHRpb25zLnN0cmluZ3M7XG5cblx0XHQvLyBjaGFyYWN0ZXIgbnVtYmVyIHBvc2l0aW9uIG9mIGN1cnJlbnQgc3RyaW5nXG5cdFx0dGhpcy5zdHJQb3MgPSAwO1xuXG5cdFx0Ly8gY3VycmVudCBhcnJheSBwb3NpdGlvblxuXHRcdHRoaXMuYXJyYXlQb3MgPSAwO1xuXG5cdFx0Ly8gbnVtYmVyIHRvIHN0b3AgYmFja3NwYWNpbmcgb24uXG5cdFx0Ly8gZGVmYXVsdCAwLCBjYW4gY2hhbmdlIGRlcGVuZGluZyBvbiBob3cgbWFueSBjaGFyc1xuXHRcdC8vIHlvdSB3YW50IHRvIHJlbW92ZSBhdCB0aGUgdGltZVxuXHRcdHRoaXMuc3RvcE51bSA9IDA7XG5cblx0XHQvLyBMb29waW5nIGxvZ2ljXG5cdFx0dGhpcy5sb29wID0gdGhpcy5vcHRpb25zLmxvb3A7XG5cdFx0dGhpcy5sb29wQ291bnQgPSB0aGlzLm9wdGlvbnMubG9vcENvdW50O1xuXHRcdHRoaXMuY3VyTG9vcCA9IDA7XG5cblx0XHQvLyBmb3Igc3RvcHBpbmdcblx0XHR0aGlzLnN0b3AgPSBmYWxzZTtcblxuXHRcdC8vIGN1c3RvbSBjdXJzb3Jcblx0XHR0aGlzLmN1cnNvckNoYXIgPSB0aGlzLm9wdGlvbnMuY3Vyc29yQ2hhcjtcblxuXHRcdC8vIHNodWZmbGUgdGhlIHN0cmluZ3Ncblx0XHR0aGlzLnNodWZmbGUgPSB0aGlzLm9wdGlvbnMuc2h1ZmZsZTtcblx0XHQvLyB0aGUgb3JkZXIgb2Ygc3RyaW5nc1xuXHRcdHRoaXMuc2VxdWVuY2UgPSBbXTtcblxuXHRcdC8vIEFsbCBzeXN0ZW1zIGdvIVxuXHRcdHRoaXMuYnVpbGQoKTtcblx0fTtcblxuXHRUeXBlZC5wcm90b3R5cGUgPSB7XG5cblx0XHRjb25zdHJ1Y3RvcjogVHlwZWQsXG5cblx0XHRpbml0OiBmdW5jdGlvbigpIHtcblx0XHRcdC8vIGJlZ2luIHRoZSBsb29wIHcvIGZpcnN0IGN1cnJlbnQgc3RyaW5nIChnbG9iYWwgc2VsZi5zdHJpbmdzKVxuXHRcdFx0Ly8gY3VycmVudCBzdHJpbmcgd2lsbCBiZSBwYXNzZWQgYXMgYW4gYXJndW1lbnQgZWFjaCB0aW1lIGFmdGVyIHRoaXNcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdHNlbGYudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGZvciAodmFyIGk9MDtpPHNlbGYuc3RyaW5ncy5sZW5ndGg7KytpKSBzZWxmLnNlcXVlbmNlW2ldPWk7XG5cblx0XHRcdFx0Ly8gc2h1ZmZsZSB0aGUgYXJyYXkgaWYgdHJ1ZVxuXHRcdFx0XHRpZihzZWxmLnNodWZmbGUpIHNlbGYuc2VxdWVuY2UgPSBzZWxmLnNodWZmbGVBcnJheShzZWxmLnNlcXVlbmNlKTtcblxuXHRcdFx0XHQvLyBTdGFydCB0eXBpbmdcblx0XHRcdFx0c2VsZi50eXBld3JpdGUoc2VsZi5zdHJpbmdzW3NlbGYuc2VxdWVuY2Vbc2VsZi5hcnJheVBvc11dLCBzZWxmLnN0clBvcyk7XG5cdFx0XHR9LCBzZWxmLnN0YXJ0RGVsYXkpO1xuXHRcdH0sXG5cblx0XHRidWlsZDogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHQvLyBJbnNlcnQgY3Vyc29yXG5cdFx0XHRpZiAodGhpcy5zaG93Q3Vyc29yID09PSB0cnVlKSB7XG5cdFx0XHRcdHRoaXMuY3Vyc29yID0gJChcIjxzcGFuIGNsYXNzPVxcXCJ0eXBlZC1jdXJzb3JcXFwiPlwiICsgdGhpcy5jdXJzb3JDaGFyICsgXCI8L3NwYW4+XCIpO1xuXHRcdFx0XHR0aGlzLmVsLmFmdGVyKHRoaXMuY3Vyc29yKTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLnN0cmluZ3NFbGVtZW50KSB7XG5cdFx0XHRcdHRoaXMuc3RyaW5ncyA9IFtdO1xuXHRcdFx0XHR0aGlzLnN0cmluZ3NFbGVtZW50LmhpZGUoKTtcblx0XHRcdFx0Y29uc29sZS5sb2codGhpcy5zdHJpbmdzRWxlbWVudC5jaGlsZHJlbigpKTtcblx0XHRcdFx0dmFyIHN0cmluZ3MgPSB0aGlzLnN0cmluZ3NFbGVtZW50LmNoaWxkcmVuKCk7XG5cdFx0XHRcdCQuZWFjaChzdHJpbmdzLCBmdW5jdGlvbihrZXksIHZhbHVlKXtcblx0XHRcdFx0XHRzZWxmLnN0cmluZ3MucHVzaCgkKHZhbHVlKS5odG1sKCkpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdHRoaXMuaW5pdCgpO1xuXHRcdH0sXG5cblx0XHQvLyBwYXNzIGN1cnJlbnQgc3RyaW5nIHN0YXRlIHRvIGVhY2ggZnVuY3Rpb24sIHR5cGVzIDEgY2hhciBwZXIgY2FsbFxuXHRcdHR5cGV3cml0ZTogZnVuY3Rpb24oY3VyU3RyaW5nLCBjdXJTdHJQb3MpIHtcblx0XHRcdC8vIGV4aXQgd2hlbiBzdG9wcGVkXG5cdFx0XHRpZiAodGhpcy5zdG9wID09PSB0cnVlKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gdmFyeWluZyB2YWx1ZXMgZm9yIHNldFRpbWVvdXQgZHVyaW5nIHR5cGluZ1xuXHRcdFx0Ly8gY2FuJ3QgYmUgZ2xvYmFsIHNpbmNlIG51bWJlciBjaGFuZ2VzIGVhY2ggdGltZSBsb29wIGlzIGV4ZWN1dGVkXG5cdFx0XHR2YXIgaHVtYW5pemUgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAoMTAwIC0gMzApKSArIHRoaXMudHlwZVNwZWVkO1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHQvLyAtLS0tLS0tLS0tLS0tIG9wdGlvbmFsIC0tLS0tLS0tLS0tLS0gLy9cblx0XHRcdC8vIGJhY2twYWNlcyBhIGNlcnRhaW4gc3RyaW5nIGZhc3RlclxuXHRcdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cdFx0XHQvLyBpZiAoc2VsZi5hcnJheVBvcyA9PSAxKXtcblx0XHRcdC8vICBzZWxmLmJhY2tEZWxheSA9IDUwO1xuXHRcdFx0Ly8gfVxuXHRcdFx0Ly8gZWxzZXsgc2VsZi5iYWNrRGVsYXkgPSA1MDA7IH1cblxuXHRcdFx0Ly8gY29udGFpbiB0eXBpbmcgZnVuY3Rpb24gaW4gYSB0aW1lb3V0IGh1bWFuaXplJ2QgZGVsYXlcblx0XHRcdHNlbGYudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIGNoZWNrIGZvciBhbiBlc2NhcGUgY2hhcmFjdGVyIGJlZm9yZSBhIHBhdXNlIHZhbHVlXG5cdFx0XHRcdC8vIGZvcm1hdDogXFxeXFxkKyAuLiBlZzogXjEwMDAgLi4gc2hvdWxkIGJlIGFibGUgdG8gcHJpbnQgdGhlIF4gdG9vIHVzaW5nIF5eXG5cdFx0XHRcdC8vIHNpbmdsZSBeIGFyZSByZW1vdmVkIGZyb20gc3RyaW5nXG5cdFx0XHRcdHZhciBjaGFyUGF1c2UgPSAwO1xuXHRcdFx0XHR2YXIgc3Vic3RyID0gY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpO1xuXHRcdFx0XHRpZiAoc3Vic3RyLmNoYXJBdCgwKSA9PT0gJ14nKSB7XG5cdFx0XHRcdFx0dmFyIHNraXAgPSAxOyAvLyBza2lwIGF0bGVhc3QgMVxuXHRcdFx0XHRcdGlmICgvXlxcXlxcZCsvLnRlc3Qoc3Vic3RyKSkge1xuXHRcdFx0XHRcdFx0c3Vic3RyID0gL1xcZCsvLmV4ZWMoc3Vic3RyKVswXTtcblx0XHRcdFx0XHRcdHNraXAgKz0gc3Vic3RyLmxlbmd0aDtcblx0XHRcdFx0XHRcdGNoYXJQYXVzZSA9IHBhcnNlSW50KHN1YnN0cik7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gc3RyaXAgb3V0IHRoZSBlc2NhcGUgY2hhcmFjdGVyIGFuZCBwYXVzZSB2YWx1ZSBzbyB0aGV5J3JlIG5vdCBwcmludGVkXG5cdFx0XHRcdFx0Y3VyU3RyaW5nID0gY3VyU3RyaW5nLnN1YnN0cmluZygwLCBjdXJTdHJQb3MpICsgY3VyU3RyaW5nLnN1YnN0cmluZyhjdXJTdHJQb3MgKyBza2lwKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChzZWxmLmNvbnRlbnRUeXBlID09PSAnaHRtbCcpIHtcblx0XHRcdFx0XHQvLyBza2lwIG92ZXIgaHRtbCB0YWdzIHdoaWxlIHR5cGluZ1xuXHRcdFx0XHRcdHZhciBjdXJDaGFyID0gY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpLmNoYXJBdCgwKVxuXHRcdFx0XHRcdGlmIChjdXJDaGFyID09PSAnPCcgfHwgY3VyQ2hhciA9PT0gJyYnKSB7XG5cdFx0XHRcdFx0XHR2YXIgdGFnID0gJyc7XG5cdFx0XHRcdFx0XHR2YXIgZW5kVGFnID0gJyc7XG5cdFx0XHRcdFx0XHRpZiAoY3VyQ2hhciA9PT0gJzwnKSB7XG5cdFx0XHRcdFx0XHRcdGVuZFRhZyA9ICc+J1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGVuZFRhZyA9ICc7J1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0d2hpbGUgKGN1clN0cmluZy5zdWJzdHIoY3VyU3RyUG9zICsgMSkuY2hhckF0KDApICE9PSBlbmRUYWcpIHtcblx0XHRcdFx0XHRcdFx0dGFnICs9IGN1clN0cmluZy5zdWJzdHIoY3VyU3RyUG9zKS5jaGFyQXQoMCk7XG5cdFx0XHRcdFx0XHRcdGN1clN0clBvcysrO1xuXHRcdFx0XHRcdFx0XHRpZiAoY3VyU3RyUG9zICsgMSA+IGN1clN0cmluZy5sZW5ndGgpIHsgYnJlYWs7IH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGN1clN0clBvcysrO1xuXHRcdFx0XHRcdFx0dGFnICs9IGVuZFRhZztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyB0aW1lb3V0IGZvciBhbnkgcGF1c2UgYWZ0ZXIgYSBjaGFyYWN0ZXJcblx0XHRcdFx0c2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoY3VyU3RyUG9zID09PSBjdXJTdHJpbmcubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQvLyBmaXJlcyBjYWxsYmFjayBmdW5jdGlvblxuXHRcdFx0XHRcdFx0c2VsZi5vcHRpb25zLm9uU3RyaW5nVHlwZWQoc2VsZi5hcnJheVBvcyk7XG5cblx0XHRcdFx0XHRcdC8vIGlzIHRoaXMgdGhlIGZpbmFsIHN0cmluZ1xuXHRcdFx0XHRcdFx0aWYgKHNlbGYuYXJyYXlQb3MgPT09IHNlbGYuc3RyaW5ncy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0XHRcdC8vIGFuaW1hdGlvbiB0aGF0IG9jY3VycyBvbiB0aGUgbGFzdCB0eXBlZCBzdHJpbmdcblx0XHRcdFx0XHRcdFx0c2VsZi5vcHRpb25zLmNhbGxiYWNrKCk7XG5cblx0XHRcdFx0XHRcdFx0c2VsZi5jdXJMb29wKys7XG5cblx0XHRcdFx0XHRcdFx0Ly8gcXVpdCBpZiB3ZSB3b250IGxvb3AgYmFja1xuXHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5sb29wID09PSBmYWxzZSB8fCBzZWxmLmN1ckxvb3AgPT09IHNlbGYubG9vcENvdW50KVxuXHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0c2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5iYWNrc3BhY2UoY3VyU3RyaW5nLCBjdXJTdHJQb3MpO1xuXHRcdFx0XHRcdFx0fSwgc2VsZi5iYWNrRGVsYXkpO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0LyogY2FsbCBiZWZvcmUgZnVuY3Rpb25zIGlmIGFwcGxpY2FibGUgKi9cblx0XHRcdFx0XHRcdGlmIChjdXJTdHJQb3MgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5vcHRpb25zLnByZVN0cmluZ1R5cGVkKHNlbGYuYXJyYXlQb3MpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBzdGFydCB0eXBpbmcgZWFjaCBuZXcgY2hhciBpbnRvIGV4aXN0aW5nIHN0cmluZ1xuXHRcdFx0XHRcdFx0Ly8gY3VyU3RyaW5nOiBhcmcsIHNlbGYuZWwuaHRtbDogb3JpZ2luYWwgdGV4dCBpbnNpZGUgZWxlbWVudFxuXHRcdFx0XHRcdFx0dmFyIG5leHRTdHJpbmcgPSBjdXJTdHJpbmcuc3Vic3RyKDAsIGN1clN0clBvcyArIDEpO1xuXHRcdFx0XHRcdFx0aWYgKHNlbGYuYXR0cikge1xuXHRcdFx0XHRcdFx0XHRzZWxmLmVsLmF0dHIoc2VsZi5hdHRyLCBuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGlmIChzZWxmLmlzSW5wdXQpIHtcblx0XHRcdFx0XHRcdFx0XHRzZWxmLmVsLnZhbChuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChzZWxmLmNvbnRlbnRUeXBlID09PSAnaHRtbCcpIHtcblx0XHRcdFx0XHRcdFx0XHRzZWxmLmVsLmh0bWwobmV4dFN0cmluZyk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5lbC50ZXh0KG5leHRTdHJpbmcpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIGFkZCBjaGFyYWN0ZXJzIG9uZSBieSBvbmVcblx0XHRcdFx0XHRcdGN1clN0clBvcysrO1xuXHRcdFx0XHRcdFx0Ly8gbG9vcCB0aGUgZnVuY3Rpb25cblx0XHRcdFx0XHRcdHNlbGYudHlwZXdyaXRlKGN1clN0cmluZywgY3VyU3RyUG9zKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gZW5kIG9mIGNoYXJhY3RlciBwYXVzZVxuXHRcdFx0XHR9LCBjaGFyUGF1c2UpO1xuXG5cdFx0XHRcdC8vIGh1bWFuaXplZCB2YWx1ZSBmb3IgdHlwaW5nXG5cdFx0XHR9LCBodW1hbml6ZSk7XG5cblx0XHR9LFxuXG5cdFx0YmFja3NwYWNlOiBmdW5jdGlvbihjdXJTdHJpbmcsIGN1clN0clBvcykge1xuXHRcdFx0Ly8gZXhpdCB3aGVuIHN0b3BwZWRcblx0XHRcdGlmICh0aGlzLnN0b3AgPT09IHRydWUpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyB2YXJ5aW5nIHZhbHVlcyBmb3Igc2V0VGltZW91dCBkdXJpbmcgdHlwaW5nXG5cdFx0XHQvLyBjYW4ndCBiZSBnbG9iYWwgc2luY2UgbnVtYmVyIGNoYW5nZXMgZWFjaCB0aW1lIGxvb3AgaXMgZXhlY3V0ZWRcblx0XHRcdHZhciBodW1hbml6ZSA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqICgxMDAgLSAzMCkpICsgdGhpcy5iYWNrU3BlZWQ7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHNlbGYudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Ly8gLS0tLS0gdGhpcyBwYXJ0IGlzIG9wdGlvbmFsIC0tLS0tIC8vXG5cdFx0XHRcdC8vIGNoZWNrIHN0cmluZyBhcnJheSBwb3NpdGlvblxuXHRcdFx0XHQvLyBvbiB0aGUgZmlyc3Qgc3RyaW5nLCBvbmx5IGRlbGV0ZSBvbmUgd29yZFxuXHRcdFx0XHQvLyB0aGUgc3RvcE51bSBhY3R1YWxseSByZXByZXNlbnRzIHRoZSBhbW91bnQgb2YgY2hhcnMgdG9cblx0XHRcdFx0Ly8ga2VlcCBpbiB0aGUgY3VycmVudCBzdHJpbmcuIEluIG15IGNhc2UgaXQncyAxNC5cblx0XHRcdFx0Ly8gaWYgKHNlbGYuYXJyYXlQb3MgPT0gMSl7XG5cdFx0XHRcdC8vICBzZWxmLnN0b3BOdW0gPSAxNDtcblx0XHRcdFx0Ly8gfVxuXHRcdFx0XHQvL2V2ZXJ5IG90aGVyIHRpbWUsIGRlbGV0ZSB0aGUgd2hvbGUgdHlwZWQgc3RyaW5nXG5cdFx0XHRcdC8vIGVsc2V7XG5cdFx0XHRcdC8vICBzZWxmLnN0b3BOdW0gPSAwO1xuXHRcdFx0XHQvLyB9XG5cblx0XHRcdFx0aWYgKHNlbGYuY29udGVudFR5cGUgPT09ICdodG1sJykge1xuXHRcdFx0XHRcdC8vIHNraXAgb3ZlciBodG1sIHRhZ3Mgd2hpbGUgYmFja3NwYWNpbmdcblx0XHRcdFx0XHRpZiAoY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpLmNoYXJBdCgwKSA9PT0gJz4nKSB7XG5cdFx0XHRcdFx0XHR2YXIgdGFnID0gJyc7XG5cdFx0XHRcdFx0XHR3aGlsZSAoY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MgLSAxKS5jaGFyQXQoMCkgIT09ICc8Jykge1xuXHRcdFx0XHRcdFx0XHR0YWcgLT0gY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpLmNoYXJBdCgwKTtcblx0XHRcdFx0XHRcdFx0Y3VyU3RyUG9zLS07XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJTdHJQb3MgPCAwKSB7IGJyZWFrOyB9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjdXJTdHJQb3MtLTtcblx0XHRcdFx0XHRcdHRhZyArPSAnPCc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gLS0tLS0gY29udGludWUgaW1wb3J0YW50IHN0dWZmIC0tLS0tIC8vXG5cdFx0XHRcdC8vIHJlcGxhY2UgdGV4dCB3aXRoIGJhc2UgdGV4dCArIHR5cGVkIGNoYXJhY3RlcnNcblx0XHRcdFx0dmFyIG5leHRTdHJpbmcgPSBjdXJTdHJpbmcuc3Vic3RyKDAsIGN1clN0clBvcyk7XG5cdFx0XHRcdGlmIChzZWxmLmF0dHIpIHtcblx0XHRcdFx0XHRzZWxmLmVsLmF0dHIoc2VsZi5hdHRyLCBuZXh0U3RyaW5nKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoc2VsZi5pc0lucHV0KSB7XG5cdFx0XHRcdFx0XHRzZWxmLmVsLnZhbChuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHNlbGYuY29udGVudFR5cGUgPT09ICdodG1sJykge1xuXHRcdFx0XHRcdFx0c2VsZi5lbC5odG1sKG5leHRTdHJpbmcpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzZWxmLmVsLnRleHQobmV4dFN0cmluZyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaWYgdGhlIG51bWJlciAoaWQgb2YgY2hhcmFjdGVyIGluIGN1cnJlbnQgc3RyaW5nKSBpc1xuXHRcdFx0XHQvLyBsZXNzIHRoYW4gdGhlIHN0b3AgbnVtYmVyLCBrZWVwIGdvaW5nXG5cdFx0XHRcdGlmIChjdXJTdHJQb3MgPiBzZWxmLnN0b3BOdW0pIHtcblx0XHRcdFx0XHQvLyBzdWJ0cmFjdCBjaGFyYWN0ZXJzIG9uZSBieSBvbmVcblx0XHRcdFx0XHRjdXJTdHJQb3MtLTtcblx0XHRcdFx0XHQvLyBsb29wIHRoZSBmdW5jdGlvblxuXHRcdFx0XHRcdHNlbGYuYmFja3NwYWNlKGN1clN0cmluZywgY3VyU3RyUG9zKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBpZiB0aGUgc3RvcCBudW1iZXIgaGFzIGJlZW4gcmVhY2hlZCwgaW5jcmVhc2Vcblx0XHRcdFx0Ly8gYXJyYXkgcG9zaXRpb24gdG8gbmV4dCBzdHJpbmdcblx0XHRcdFx0ZWxzZSBpZiAoY3VyU3RyUG9zIDw9IHNlbGYuc3RvcE51bSkge1xuXHRcdFx0XHRcdHNlbGYuYXJyYXlQb3MrKztcblxuXHRcdFx0XHRcdGlmIChzZWxmLmFycmF5UG9zID09PSBzZWxmLnN0cmluZ3MubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRzZWxmLmFycmF5UG9zID0gMDtcblxuXHRcdFx0XHRcdFx0Ly8gU2h1ZmZsZSBzZXF1ZW5jZSBhZ2FpblxuXHRcdFx0XHRcdFx0aWYoc2VsZi5zaHVmZmxlKSBzZWxmLnNlcXVlbmNlID0gc2VsZi5zaHVmZmxlQXJyYXkoc2VsZi5zZXF1ZW5jZSk7XG5cblx0XHRcdFx0XHRcdHNlbGYuaW5pdCgpO1xuXHRcdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdFx0c2VsZi50eXBld3JpdGUoc2VsZi5zdHJpbmdzW3NlbGYuc2VxdWVuY2Vbc2VsZi5hcnJheVBvc11dLCBjdXJTdHJQb3MpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaHVtYW5pemVkIHZhbHVlIGZvciB0eXBpbmdcblx0XHRcdH0sIGh1bWFuaXplKTtcblxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogU2h1ZmZsZXMgdGhlIG51bWJlcnMgaW4gdGhlIGdpdmVuIGFycmF5LlxuXHRcdCAqIEBwYXJhbSB7QXJyYXl9IGFycmF5XG5cdFx0ICogQHJldHVybnMge0FycmF5fVxuXHRcdCAqL1xuXHRcdHNodWZmbGVBcnJheTogZnVuY3Rpb24oYXJyYXkpIHtcblx0XHRcdHZhciB0bXAsIGN1cnJlbnQsIHRvcCA9IGFycmF5Lmxlbmd0aDtcblx0XHRcdGlmKHRvcCkgd2hpbGUoLS10b3ApIHtcblx0XHRcdFx0Y3VycmVudCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh0b3AgKyAxKSk7XG5cdFx0XHRcdHRtcCA9IGFycmF5W2N1cnJlbnRdO1xuXHRcdFx0XHRhcnJheVtjdXJyZW50XSA9IGFycmF5W3RvcF07XG5cdFx0XHRcdGFycmF5W3RvcF0gPSB0bXA7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gYXJyYXk7XG5cdFx0fSxcblxuXHRcdC8vIFN0YXJ0ICYgU3RvcCBjdXJyZW50bHkgbm90IHdvcmtpbmdcblxuXHRcdC8vICwgc3RvcDogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gICAgIHZhciBzZWxmID0gdGhpcztcblxuXHRcdC8vICAgICBzZWxmLnN0b3AgPSB0cnVlO1xuXHRcdC8vICAgICBjbGVhckludGVydmFsKHNlbGYudGltZW91dCk7XG5cdFx0Ly8gfVxuXG5cdFx0Ly8gLCBzdGFydDogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gICAgIHZhciBzZWxmID0gdGhpcztcblx0XHQvLyAgICAgaWYoc2VsZi5zdG9wID09PSBmYWxzZSlcblx0XHQvLyAgICAgICAgcmV0dXJuO1xuXG5cdFx0Ly8gICAgIHRoaXMuc3RvcCA9IGZhbHNlO1xuXHRcdC8vICAgICB0aGlzLmluaXQoKTtcblx0XHQvLyB9XG5cblx0XHQvLyBSZXNldCBhbmQgcmVidWlsZCB0aGUgZWxlbWVudFxuXHRcdHJlc2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lb3V0KTtcblx0XHRcdHZhciBpZCA9IHRoaXMuZWwuYXR0cignaWQnKTtcblx0XHRcdHRoaXMuZWwuZW1wdHkoKTtcblx0XHRcdGlmICh0eXBlb2YgdGhpcy5jdXJzb3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yLnJlbW92ZSgpO1xuICAgICAgfVxuXHRcdFx0dGhpcy5zdHJQb3MgPSAwO1xuXHRcdFx0dGhpcy5hcnJheVBvcyA9IDA7XG5cdFx0XHR0aGlzLmN1ckxvb3AgPSAwO1xuXHRcdFx0Ly8gU2VuZCB0aGUgY2FsbGJhY2tcblx0XHRcdHRoaXMub3B0aW9ucy5yZXNldENhbGxiYWNrKCk7XG5cdFx0fVxuXG5cdH07XG5cblx0JC5mbi50eXBlZCA9IGZ1bmN0aW9uKG9wdGlvbikge1xuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgJHRoaXMgPSAkKHRoaXMpLFxuXHRcdFx0XHRkYXRhID0gJHRoaXMuZGF0YSgndHlwZWQnKSxcblx0XHRcdFx0b3B0aW9ucyA9IHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uO1xuXHRcdFx0aWYgKGRhdGEpIHsgZGF0YS5yZXNldCgpOyB9XG5cdFx0XHQkdGhpcy5kYXRhKCd0eXBlZCcsIChkYXRhID0gbmV3IFR5cGVkKHRoaXMsIG9wdGlvbnMpKSk7XG5cdFx0XHRpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dKCk7XG5cdFx0fSk7XG5cdH07XG5cblx0JC5mbi50eXBlZC5kZWZhdWx0cyA9IHtcblx0XHRzdHJpbmdzOiBbXCJUaGVzZSBhcmUgdGhlIGRlZmF1bHQgdmFsdWVzLi4uXCIsIFwiWW91IGtub3cgd2hhdCB5b3Ugc2hvdWxkIGRvP1wiLCBcIlVzZSB5b3VyIG93biFcIiwgXCJIYXZlIGEgZ3JlYXQgZGF5IVwiXSxcblx0XHRzdHJpbmdzRWxlbWVudDogbnVsbCxcblx0XHQvLyB0eXBpbmcgc3BlZWRcblx0XHR0eXBlU3BlZWQ6IDAsXG5cdFx0Ly8gdGltZSBiZWZvcmUgdHlwaW5nIHN0YXJ0c1xuXHRcdHN0YXJ0RGVsYXk6IDAsXG5cdFx0Ly8gYmFja3NwYWNpbmcgc3BlZWRcblx0XHRiYWNrU3BlZWQ6IDAsXG5cdFx0Ly8gc2h1ZmZsZSB0aGUgc3RyaW5nc1xuXHRcdHNodWZmbGU6IGZhbHNlLFxuXHRcdC8vIHRpbWUgYmVmb3JlIGJhY2tzcGFjaW5nXG5cdFx0YmFja0RlbGF5OiA1MDAsXG5cdFx0Ly8gbG9vcFxuXHRcdGxvb3A6IGZhbHNlLFxuXHRcdC8vIGZhbHNlID0gaW5maW5pdGVcblx0XHRsb29wQ291bnQ6IGZhbHNlLFxuXHRcdC8vIHNob3cgY3Vyc29yXG5cdFx0c2hvd0N1cnNvcjogdHJ1ZSxcblx0XHQvLyBjaGFyYWN0ZXIgZm9yIGN1cnNvclxuXHRcdGN1cnNvckNoYXI6IFwifFwiLFxuXHRcdC8vIGF0dHJpYnV0ZSB0byB0eXBlIChudWxsID09IHRleHQpXG5cdFx0YXR0cjogbnVsbCxcblx0XHQvLyBlaXRoZXIgaHRtbCBvciB0ZXh0XG5cdFx0Y29udGVudFR5cGU6ICdodG1sJyxcblx0XHQvLyBjYWxsIHdoZW4gZG9uZSBjYWxsYmFjayBmdW5jdGlvblxuXHRcdGNhbGxiYWNrOiBmdW5jdGlvbigpIHt9LFxuXHRcdC8vIHN0YXJ0aW5nIGNhbGxiYWNrIGZ1bmN0aW9uIGJlZm9yZSBlYWNoIHN0cmluZ1xuXHRcdHByZVN0cmluZ1R5cGVkOiBmdW5jdGlvbigpIHt9LFxuXHRcdC8vY2FsbGJhY2sgZm9yIGV2ZXJ5IHR5cGVkIHN0cmluZ1xuXHRcdG9uU3RyaW5nVHlwZWQ6IGZ1bmN0aW9uKCkge30sXG5cdFx0Ly8gY2FsbGJhY2sgZm9yIHJlc2V0XG5cdFx0cmVzZXRDYWxsYmFjazogZnVuY3Rpb24oKSB7fVxuXHR9O1xuXG5cbn0od2luZG93LmpRdWVyeSk7XG4iXX0=
