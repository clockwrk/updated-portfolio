"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},app=angular.module("myApp",["ui.router","ui.bootstrap","ngAnimate","angular-typed"]);app.config(["$stateProvider","$urlRouterProvider","$locationProvider",function($stateProvider,$urlRouterProvider,$locationProvider){$locationProvider.html5Mode({enabled:!0,requireBase:!1}),$urlRouterProvider.otherwise("/")}]),app.directive("navbar",["$rootScope","$state","authFactory",function($rootScope,$state,authFactory){return{restrict:"E",scope:{},templateUrl:"js/navBar/navbar.html",link:function(scope){scope.showLink=function(link){return!link.isAdmin&&("admin"===link.state||"login"===link.state)},scope.isLoggedIn=function(){return authFactory.isAdmin()},scope.links=[{label:"Home",state:"home"},{label:"Projects",state:"projects"},{label:"About Me",state:"about"}]}}}]),app.config(["$stateProvider",function($stateProvider){$stateProvider.state("about",{url:"/about",templateUrl:"/js/about/about.html",authenticate:!1})}]),app.controller("adminController",["$scope","$state","adminFactory","allProjects","authFactory",function($scope,$state,adminFactory,allProjects,authFactory){$scope.submitProject=function(project){adminFactory.postProject(project),$scope.project=null},$scope.allProjects=allProjects||[{id:0,name:"empty",deploy:"empty",gitHub:"empty"}],$scope.data={availableProjects:$scope.allProjects,selectedProject:{id:0,name:"empty",deploy:"empty",gitHub:"empty",description:"empty"}},$scope.selectedprojectChanged=function(){$scope.currentProject=$scope.selectedItem},$scope.logOut=function(){authFactory.logOut(),$state.go("home")}}]),app.directive("projectEdit",["projectFactory",function(projectFactory){return{restrict:"E",scope:{project:"=project"},templateUrl:"adminEdit.html"}}]),app.factory("adminFactory",["$http",function($http){return{postProject:function(project){return $http.post("/api/project",project).then(function(response){return response.data}).catch()},getAllProjects:function(){return $http.get("/api/project").then(function(response){return response.data}).catch()}}}]),app.config(["$stateProvider",function($stateProvider){$stateProvider.state("admin",{url:"/admin",templateUrl:"/js/admin/admin.html",controller:"adminController",authenticate:!0,resolve:{allProjects:["adminFactory",function(adminFactory){return adminFactory.getAllProjects()}]}})}]),app.controller("authController",["$scope","authFactory",function($scope,authFactory){$scope.isAdmin=authFactory.isAdmin()}]),app.factory("authFactory",["$http","$state","$rootScope",function($http,$state,$rootScope){return{isAdmin:function(){return!!$rootScope.admin},login:function(loginInfo){return $http.get("/api/authentication/"+loginInfo.name+"/"+loginInfo.password).then(function(authenticationDecision){return authenticationDecision.data?$rootScope.admin=!0:$rootScope.admin=!1,authenticationDecision}).catch()},logOut:function(){$rootScope.admin=null}}}]),app.controller("contactController",["$scope","posts","feedBackFactory",function($scope,posts,feedBackFactory){$scope.posts=posts,$scope.getReplies=feedBackFactory.getReplies,$scope.postReply=function(postId,content){var replyInfo={postId:postId,content:content};feedBackFactory.postReplY(replyInfo)},$scope.submitForm=function(data){feedBackFactory.postComment(data).then(function(newPost){$scope.posts[$scope.posts.length]=newPost}).catch(),$scope.user=null,$scope.userForm.$setPristine(!0)},$scope.clear=function(){$scope.user=null,$scope.userForm.$setPristine(!0)},$scope.submit=function(){$scope.message&&$scope.email&&$scope.name&&controllerFactory.sendMessage($scope.name,$scope.email,$scope.message)}}]),app.directive("replies",function(){return console.log("post directive"),{restrict:"E",scope:{post:"="},templateUrl:"js/contact/template/replyView.html",link:function(scope,element,attrs){scope.replies=[{label:"Home",state:"home"},{label:"Projects",state:"projects"},{label:"About Me",state:"about"},{label:"Contact Me",state:"contact"}]}}}),app.factory("feedBackFactory",["$http",function($http){console.log("In the feeback factory");var feedBackFactory={};return feedBackFactory.getPosts=function(){return $http.get("/api/comment").then(function(response){return console.log("getting comments"),response.data}).catch()},feedBackFactory.postComment=function(content){return console.log("Posting comment"),$http.post("/api/comment",content).then(function(succesfulComment){return console.log(succesfulComment),succesfulComment.data}).catch()},feedBackFactory.getReplies=function(commentId){return $http.get("/api/reply/"+commentId).then(function(replies){return console.log("got comments"),replies.data}).catch()},feedBackFactory.postReplY=function(message){return console.log("running post reply",message),$http.post("/api/reply/",{post_id:parseInt(message.postId.postId),content:message.content.content}).then(function(postedComment){return postedComment.data})},feedBackFactory}]),app.config(["$stateProvider",function($stateProvider){$stateProvider.state("contact",{url:"/contact",templateUrl:"/js/contact/contact.html",controller:"contactController",authenticate:!1,resolve:{posts:["feedBackFactory",function(feedBackFactory){return console.log("invoking feedBackFactory"),feedBackFactory.getPosts()}]}})}]),console.log("bar ctrl loaded"),app.controller("BarCtrl",["$scope","$timeout",function($scope,$timeout){$scope.timeInMs=0,$timeout(function countUp(){$scope.timeInMs+=500,$timeout(countUp,500)},500)}]),app.config(["$stateProvider",function($stateProvider){$stateProvider.state("home",{url:"/",templateUrl:"/js/home/home.html",controller:"BarCtrl",authenticate:!1})}]),app.controller("loginController",["$scope","$state","authFactory","$location",function($scope,$state,authFactory,$location){$scope.login=function(){var loginInfo={name:$scope.username,password:$scope.password};authFactory.login(loginInfo).then(function(result){console.log(result),$state.go("home",{},{reload:!0}),$location.path("/")}).catch()}}]),app.config(["$stateProvider",function($stateProvider){$stateProvider.state("login",{url:"/login",templateUrl:"/js/login/login.html",controller:"loginController",authenticate:!1})}]),app.controller("projectController",["$scope","allProjects",function($scope,allProjects){$scope.projects=allProjects}]),app.controller("singleProjectController",["$scope","projectFactory","currentProject","$sce",function($scope,projectFactory,currentProject,$sce){$scope.currentProject=currentProject,$scope.trustSrc=function(src){return $sce.trustAsResourceUrl(src)},$scope.movie={src:$scope.currentProject.videoLink},$scope.hasVideoLink=function(){return!!currentProject.videoLink}}]),app.directive("projectTile",function(){return{restrict:"E",scope:{project:"="},templateUrl:"js/projects/singleProject/singleProjectTile.html"}}),app.factory("projectFactory",["$http",function($http){return{getAllProjects:function(){return $http.get("/api/project").then(function(response){return response.data}).catch()},getSingleProject:function(projectID){return $http.get("/api/project/"+projectID).then(function(response){return response.data}).catch()},postProject:function(project){return $http.post("/api/project",project).then(function(response){return response.data}).catch()},updateProject:function(updatedProject){return $http.put("api/project",updatedProject).then(function(response){return response.data}).catch()}}}]),app.config(["$stateProvider",function($stateProvider){$stateProvider.state("projects",{url:"/projects",templateUrl:"/js/projects/projects.html",controller:"projectController",authenticate:!1,resolve:{allProjects:["projectFactory",function(projectFactory){return projectFactory.getAllProjects()}]}}),$stateProvider.state("singleProject",{url:"/projects/:id",templateUrl:"/js/projects/singleProject/singleProject.html",controller:"singleProjectController",authenticate:!1,resolve:{currentProject:["projectFactory","$stateParams",function(projectFactory,$stateParams){return projectFactory.getSingleProject($stateParams.id)}]}})}])(function(){console.log("ab.Typeit about to"),angular.module("ab.Typeit",[]).directive("abTypeit",function(){return coneole.log("running the wrapper"),{restrict:"A",scope:{typeitStrings:"=abTypeit",typeitLoop:"=",typeitLoopDelay:"=",typeitBreakLines:"=",typeitSpeed:"=",typeitLifeLike:"=",typeitCursor:"=",typeitCursorSpeed:"=",typeitStartDelay:"=",typeitBreakDelay:"="},controller:["$scope","$element","$attrs",function($scope,$element,$attrs){var typeItElement=$($element);try{typeItElement.typeIt({strings:$scope.typeitStrings,loop:$scope.typeitLoop,loopDelay:$scope.typeitLoopDelay,breakLines:$scope.typeitBreakLines,speed:$scope.typeitSpeed,lifeLike:$scope.typeitLifeLike,cursor:$scope.typeitCursor,cursorSpeed:$scope.typeitCursorSpeed,startDelay:$scope.typeitStartDelay,breakDelay:$scope.typeitBreakDelay})}catch(e){console.error("OH NO! angular-typeit requires typeit.js on your page - do you have it loaded?")}}]}})})(),window.onload=function(){$(".developer").typed({strings:["Front-end","Back-end","Fullstack","Software","JavaScript","AngularJS","UI/UX"],typeSpeed:250,loop:!0,cursorSpeed:100,lifeLike:!0,curser:!0,deleteSpeed:1e3})};var gulp=require("gulp");rename=require("gulp-rename"),uglify=require("gulp-uglify"),gulp.task("compress",function(){gulp.src("js/*.js").pipe(uglify()).pipe(rename("typed.min.js")).pipe(gulp.dest("dist"))}),gulp.task("default",["compress"]),function(t){var s=function(_s,e){this.el=t(_s),this.options=t.extend({},t.fn.typed.defaults,e),this.isInput=this.el.is("input"),this.attr=this.options.attr,this.showCursor=!this.isInput&&this.options.showCursor,this.elContent=this.attr?this.el.attr(this.attr):this.el.text(),this.contentType=this.options.contentType,this.typeSpeed=this.options.typeSpeed,this.startDelay=this.options.startDelay,this.backSpeed=this.options.backSpeed,this.backDelay=this.options.backDelay,this.stringsElement=this.options.stringsElement,this.strings=this.options.strings,this.strPos=0,this.arrayPos=0,this.stopNum=0,this.loop=this.options.loop,this.loopCount=this.options.loopCount,this.curLoop=0,this.stop=!1,this.cursorChar=this.options.cursorChar,this.shuffle=this.options.shuffle,this.sequence=[],this.build()};s.prototype={constructor:s,init:function(){var t=this;t.timeout=setTimeout(function(){for(var s=0;s<t.strings.length;++s)t.sequence[s]=s;t.shuffle&&(t.sequence=t.shuffleArray(t.sequence)),t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos)},t.startDelay)},build:function(){var s=this;if(this.showCursor===!0&&(this.cursor=t('<span class="typed-cursor">'+this.cursorChar+"</span>"),this.el.after(this.cursor)),this.stringsElement){this.strings=[],this.stringsElement.hide(),console.log(this.stringsElement.children());var e=this.stringsElement.children();t.each(e,function(e,i){s.strings.push(t(i).html())})}this.init()},typewrite:function(t,s){if(this.stop!==!0){var e=Math.round(70*Math.random())+this.typeSpeed,i=this;i.timeout=setTimeout(function(){var e=0,r=t.substr(s);if("^"===r.charAt(0)){var o=1;/^\^\d+/.test(r)&&(r=/\d+/.exec(r)[0],o+=r.length,e=parseInt(r)),t=t.substring(0,s)+t.substring(s+o)}if("html"===i.contentType){var n=t.substr(s).charAt(0);if("<"===n||"&"===n){var a="",h="";for(h="<"===n?">":";";t.substr(s+1).charAt(0)!==h&&(a+=t.substr(s).charAt(0),!(++s+1>t.length)););s++,a+=h}}i.timeout=setTimeout(function(){if(s===t.length){if(i.options.onStringTyped(i.arrayPos),i.arrayPos===i.strings.length-1&&(i.options.callback(),i.curLoop++,i.loop===!1||i.curLoop===i.loopCount))return;i.timeout=setTimeout(function(){i.backspace(t,s)},i.backDelay)}else{0===s&&i.options.preStringTyped(i.arrayPos);var e=t.substr(0,s+1);i.attr?i.el.attr(i.attr,e):i.isInput?i.el.val(e):"html"===i.contentType?i.el.html(e):i.el.text(e),s++,i.typewrite(t,s)}},e)},e)}},backspace:function(t,s){if(this.stop!==!0){var e=Math.round(70*Math.random())+this.backSpeed,i=this;i.timeout=setTimeout(function(){if("html"===i.contentType&&">"===t.substr(s).charAt(0)){for(var e="";"<"!==t.substr(s-1).charAt(0)&&(e-=t.substr(s).charAt(0),!(0>--s)););s--,e+="<"}var r=t.substr(0,s);i.attr?i.el.attr(i.attr,r):i.isInput?i.el.val(r):"html"===i.contentType?i.el.html(r):i.el.text(r),s>i.stopNum?(s--,i.backspace(t,s)):s<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.shuffle&&(i.sequence=i.shuffleArray(i.sequence)),i.init()):i.typewrite(i.strings[i.sequence[i.arrayPos]],s))},e)}},shuffleArray:function(t){var s,e,i=t.length;if(i)for(;--i;)e=Math.floor(Math.random()*(i+1)),s=t[e],t[e]=t[i],t[i]=s;return t},reset:function(){var t=this;clearInterval(t.timeout),this.el.attr("id"),this.el.empty(),void 0!==this.cursor&&this.cursor.remove(),this.strPos=0,this.arrayPos=0,this.curLoop=0,this.options.resetCallback()}},t.fn.typed=function(e){return this.each(function(){var i=t(this),r=i.data("typed"),o="object"==(void 0===e?"undefined":_typeof(e))&&e;r&&r.reset(),i.data("typed",r=new s(this,o)),"string"==typeof e&&r[e]()})},t.fn.typed.defaults={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,shuffle:!1,backDelay:500,loop:!1,loopCount:!1,showCursor:!0,cursorChar:"|",attr:null,contentType:"html",callback:function(){},preStringTyped:function(){},onStringTyped:function(){},resetCallback:function(){}}}(window.jQuery),function($){var Typed=function(el,options){this.el=$(el),this.options=$.extend({},$.fn.typed.defaults,options),this.isInput=this.el.is("input"),this.attr=this.options.attr,this.showCursor=!this.isInput&&this.options.showCursor,this.elContent=this.attr?this.el.attr(this.attr):this.el.text(),this.contentType=this.options.contentType,this.typeSpeed=this.options.typeSpeed,this.startDelay=this.options.startDelay,this.backSpeed=this.options.backSpeed,this.backDelay=this.options.backDelay,this.stringsElement=this.options.stringsElement,this.strings=this.options.strings,this.strPos=0,this.arrayPos=0,this.stopNum=0,this.loop=this.options.loop,this.loopCount=this.options.loopCount,this.curLoop=0,this.stop=!1,this.cursorChar=this.options.cursorChar,this.shuffle=this.options.shuffle,this.sequence=[],this.build()};Typed.prototype={constructor:Typed,init:function(){var self=this;self.timeout=setTimeout(function(){for(var i=0;i<self.strings.length;++i)self.sequence[i]=i;self.shuffle&&(self.sequence=self.shuffleArray(self.sequence)),self.typewrite(self.strings[self.sequence[self.arrayPos]],self.strPos)},self.startDelay)},build:function(){var self=this;if(this.showCursor===!0&&(this.cursor=$('<span class="typed-cursor">'+this.cursorChar+"</span>"),this.el.after(this.cursor)),this.stringsElement){this.strings=[],this.stringsElement.hide(),console.log(this.stringsElement.children());var strings=this.stringsElement.children();$.each(strings,function(key,value){self.strings.push($(value).html())})}this.init()},typewrite:function(curString,curStrPos){if(this.stop!==!0){var humanize=Math.round(70*Math.random())+this.typeSpeed,self=this;self.timeout=setTimeout(function(){var charPause=0,substr=curString.substr(curStrPos);if("^"===substr.charAt(0)){var skip=1;/^\^\d+/.test(substr)&&(substr=/\d+/.exec(substr)[0],skip+=substr.length,charPause=parseInt(substr)),curString=curString.substring(0,curStrPos)+curString.substring(curStrPos+skip)}if("html"===self.contentType){var curChar=curString.substr(curStrPos).charAt(0);if("<"===curChar||"&"===curChar){var tag="",endTag="";for(endTag="<"===curChar?">":";";curString.substr(curStrPos+1).charAt(0)!==endTag&&(tag+=curString.substr(curStrPos).charAt(0),!(++curStrPos+1>curString.length)););curStrPos++,tag+=endTag}}self.timeout=setTimeout(function(){if(curStrPos===curString.length){if(self.options.onStringTyped(self.arrayPos),self.arrayPos===self.strings.length-1&&(self.options.callback(),self.curLoop++,self.loop===!1||self.curLoop===self.loopCount))return;self.timeout=setTimeout(function(){self.backspace(curString,curStrPos)},self.backDelay)}else{0===curStrPos&&self.options.preStringTyped(self.arrayPos);var nextString=curString.substr(0,curStrPos+1);self.attr?self.el.attr(self.attr,nextString):self.isInput?self.el.val(nextString):"html"===self.contentType?self.el.html(nextString):self.el.text(nextString),curStrPos++,self.typewrite(curString,curStrPos)}},charPause)},humanize)}},backspace:function(curString,curStrPos){if(this.stop!==!0){var humanize=Math.round(70*Math.random())+this.backSpeed,self=this;self.timeout=setTimeout(function(){if("html"===self.contentType&&">"===curString.substr(curStrPos).charAt(0)){for(var tag="";"<"!==curString.substr(curStrPos-1).charAt(0)&&(tag-=curString.substr(curStrPos).charAt(0),!(--curStrPos<0)););curStrPos--,tag+="<"}var nextString=curString.substr(0,curStrPos);self.attr?self.el.attr(self.attr,nextString):self.isInput?self.el.val(nextString):"html"===self.contentType?self.el.html(nextString):self.el.text(nextString),curStrPos>self.stopNum?(curStrPos--,self.backspace(curString,curStrPos)):curStrPos<=self.stopNum&&(self.arrayPos++,self.arrayPos===self.strings.length?(self.arrayPos=0,self.shuffle&&(self.sequence=self.shuffleArray(self.sequence)),self.init()):self.typewrite(self.strings[self.sequence[self.arrayPos]],curStrPos))},humanize)}},shuffleArray:function(array){var tmp,current,top=array.length;if(top)for(;--top;)current=Math.floor(Math.random()*(top+1)),tmp=array[current],array[current]=array[top],array[top]=tmp;return array},reset:function(){var self=this;clearInterval(self.timeout);this.el.attr("id");this.el.empty(),void 0!==this.cursor&&this.cursor.remove(),this.strPos=0,this.arrayPos=0,this.curLoop=0,this.options.resetCallback()}},$.fn.typed=function(option){return this.each(function(){var $this=$(this),data=$this.data("typed"),options="object"==(void 0===option?"undefined":_typeof(option))&&option;data&&data.reset(),$this.data("typed",data=new Typed(this,options)),"string"==typeof option&&data[option]()})},$.fn.typed.defaults={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,shuffle:!1,backDelay:500,loop:!1,loopCount:!1,showCursor:!0,cursorChar:"|",attr:null,contentType:"html",callback:function(){},preStringTyped:function(){},onStringTyped:function(){},resetCallback:function(){}}}(window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJhcHAuanMiLCJhYm91dC9hYm91dC5zdGF0ZS5qcyIsImFkbWluL2FkbWluLmNvbnRyb2xsZXIuanMiLCJhZG1pbi9hZG1pbi5kaXJlY3RpdmUuanMiLCJhZG1pbi9hZG1pbi5mYWN0b3J5LmpzIiwiYWRtaW4vYWRtaW4uc3RhdGUuanMiLCJhdXRoL2F1dGguY29udHJvbGxlci5qcyIsImF1dGgvYXV0aC5mYWN0b3J5LmpzIiwiY29udGFjdC9jb250YWN0LmNvbnRyb2xsZXIuanMiLCJjb250YWN0L2NvbnRhY3QuZGlyZWN0aXZlcy5qcyIsImNvbnRhY3QvY29udGFjdC5mYWN0b3J5LmpzIiwiY29udGFjdC9jb250YWN0LnN0YXRlLmpzIiwiaG9tZS9ob21lLmNvbnRyb2xsZXIuanMiLCJob21lL2hvbWUuc3RhdGUuanMiLCJsb2dpbi9sb2dpbi5jb250cm9sbGVyLmpzIiwibG9naW4vbG9naW4uc3RhdGUuanMiLCJwcm9qZWN0cy9wcm9qZWN0cy5jb250cm9sbGVyLmpzIiwicHJvamVjdHMvcHJvamVjdHMuZGlyZWN0aXZlcy5qcyIsInByb2plY3RzL3Byb2plY3RzLmZhY3RvcnkuanMiLCJwcm9qZWN0cy9wcm9qZWN0cy5zdGF0ZS5qcyIsInR5cGVJdC9hbmd1bGFyLXR5cGVJdC5qcyIsInR5cGVJdC9pbmRleC5qcyIsInR5cGVkLmpzLW1hc3Rlci9ndWxwZmlsZS5qcyIsInR5cGVkLmpzLW1hc3Rlci9kaXN0L3R5cGVkLm1pbi5qcyIsInR5cGVkLmpzLW1hc3Rlci9qcy90eXBlZC5qcyJdLCJuYW1lcyI6WyJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJvYmoiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiZW5hYmxlZCIsInJlcXVpcmVCYXNlIiwib3RoZXJ3aXNlIiwiZGlyZWN0aXZlIiwiJHJvb3RTY29wZSIsIiRzdGF0ZSIsImF1dGhGYWN0b3J5IiwicmVzdHJpY3QiLCJzY29wZSIsInRlbXBsYXRlVXJsIiwibGluayIsInNob3dMaW5rIiwiaXNBZG1pbiIsInN0YXRlIiwiaXNMb2dnZWRJbiIsImxpbmtzIiwibGFiZWwiLCJ1cmwiLCJhdXRoZW50aWNhdGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiYWRtaW5GYWN0b3J5IiwiYWxsUHJvamVjdHMiLCJzdWJtaXRQcm9qZWN0IiwicHJvamVjdCIsInBvc3RQcm9qZWN0IiwiaWQiLCJuYW1lIiwiZGVwbG95IiwiZ2l0SHViIiwiZGF0YSIsImF2YWlsYWJsZVByb2plY3RzIiwic2VsZWN0ZWRQcm9qZWN0IiwiZGVzY3JpcHRpb24iLCJzZWxlY3RlZHByb2plY3RDaGFuZ2VkIiwiY3VycmVudFByb2plY3QiLCJzZWxlY3RlZEl0ZW0iLCJsb2dPdXQiLCJnbyIsInByb2plY3RGYWN0b3J5IiwiZmFjdG9yeSIsIiRodHRwIiwicG9zdCIsInRoZW4iLCJyZXNwb25zZSIsImNhdGNoIiwiZ2V0QWxsUHJvamVjdHMiLCJnZXQiLCJyZXNvbHZlIiwiYWRtaW4iLCJsb2dpbiIsImxvZ2luSW5mbyIsInBhc3N3b3JkIiwiYXV0aGVudGljYXRpb25EZWNpc2lvbiIsInBvc3RzIiwiZmVlZEJhY2tGYWN0b3J5IiwiZ2V0UmVwbGllcyIsInBvc3RSZXBseSIsInBvc3RJZCIsImNvbnRlbnQiLCJyZXBseUluZm8iLCJwb3N0UmVwbFkiLCJzdWJtaXRGb3JtIiwicG9zdENvbW1lbnQiLCJuZXdQb3N0IiwibGVuZ3RoIiwidXNlciIsInVzZXJGb3JtIiwiJHNldFByaXN0aW5lIiwiY2xlYXIiLCJzdWJtaXQiLCJtZXNzYWdlIiwiZW1haWwiLCJjb250cm9sbGVyRmFjdG9yeSIsInNlbmRNZXNzYWdlIiwiY29uc29sZSIsImxvZyIsImVsZW1lbnQiLCJhdHRycyIsInJlcGxpZXMiLCJnZXRQb3N0cyIsInN1Y2Nlc2Z1bENvbW1lbnQiLCJjb21tZW50SWQiLCJwb3N0X2lkIiwicGFyc2VJbnQiLCJwb3N0ZWRDb21tZW50IiwiJHRpbWVvdXQiLCJ0aW1lSW5NcyIsImNvdW50VXAiLCIkbG9jYXRpb24iLCJ1c2VybmFtZSIsInJlc3VsdCIsInJlbG9hZCIsInBhdGgiLCJwcm9qZWN0cyIsIiRzY2UiLCJ0cnVzdFNyYyIsInNyYyIsInRydXN0QXNSZXNvdXJjZVVybCIsIm1vdmllIiwidmlkZW9MaW5rIiwiaGFzVmlkZW9MaW5rIiwiZ2V0U2luZ2xlUHJvamVjdCIsInByb2plY3RJRCIsInVwZGF0ZVByb2plY3QiLCJ1cGRhdGVkUHJvamVjdCIsInB1dCIsIiRzdGF0ZVBhcmFtcyIsImNvbmVvbGUiLCJ0eXBlaXRTdHJpbmdzIiwidHlwZWl0TG9vcCIsInR5cGVpdExvb3BEZWxheSIsInR5cGVpdEJyZWFrTGluZXMiLCJ0eXBlaXRTcGVlZCIsInR5cGVpdExpZmVMaWtlIiwidHlwZWl0Q3Vyc29yIiwidHlwZWl0Q3Vyc29yU3BlZWQiLCJ0eXBlaXRTdGFydERlbGF5IiwidHlwZWl0QnJlYWtEZWxheSIsIiRlbGVtZW50IiwiJGF0dHJzIiwidHlwZUl0RWxlbWVudCIsIiQiLCJ0eXBlSXQiLCJzdHJpbmdzIiwibG9vcCIsImxvb3BEZWxheSIsImJyZWFrTGluZXMiLCJzcGVlZCIsImxpZmVMaWtlIiwiY3Vyc29yIiwiY3Vyc29yU3BlZWQiLCJzdGFydERlbGF5IiwiYnJlYWtEZWxheSIsImUiLCJlcnJvciIsIndpbmRvdyIsIm9ubG9hZCIsInR5cGVkIiwidHlwZVNwZWVkIiwiY3Vyc2VyIiwiZGVsZXRlU3BlZWQiLCJndWxwIiwicmVxdWlyZSIsInJlbmFtZSIsInVnbGlmeSIsInRhc2siLCJwaXBlIiwiZGVzdCIsInQiLCJzIiwidGhpcyIsImVsIiwib3B0aW9ucyIsImV4dGVuZCIsImZuIiwiZGVmYXVsdHMiLCJpc0lucHV0IiwiaXMiLCJhdHRyIiwic2hvd0N1cnNvciIsImVsQ29udGVudCIsInRleHQiLCJjb250ZW50VHlwZSIsImJhY2tTcGVlZCIsImJhY2tEZWxheSIsInN0cmluZ3NFbGVtZW50Iiwic3RyUG9zIiwiYXJyYXlQb3MiLCJzdG9wTnVtIiwibG9vcENvdW50IiwiY3VyTG9vcCIsInN0b3AiLCJjdXJzb3JDaGFyIiwic2h1ZmZsZSIsInNlcXVlbmNlIiwiYnVpbGQiLCJpbml0IiwidGltZW91dCIsInNldFRpbWVvdXQiLCJzaHVmZmxlQXJyYXkiLCJ0eXBld3JpdGUiLCJhZnRlciIsImhpZGUiLCJjaGlsZHJlbiIsImVhY2giLCJpIiwicHVzaCIsImh0bWwiLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJyIiwic3Vic3RyIiwiY2hhckF0IiwibyIsInRlc3QiLCJleGVjIiwic3Vic3RyaW5nIiwibiIsImEiLCJoIiwib25TdHJpbmdUeXBlZCIsImNhbGxiYWNrIiwiYmFja3NwYWNlIiwicHJlU3RyaW5nVHlwZWQiLCJ2YWwiLCJmbG9vciIsInJlc2V0IiwiY2xlYXJJbnRlcnZhbCIsImVtcHR5IiwicmVtb3ZlIiwicmVzZXRDYWxsYmFjayIsImpRdWVyeSIsIlR5cGVkIiwic2VsZiIsImtleSIsInZhbHVlIiwiY3VyU3RyaW5nIiwiY3VyU3RyUG9zIiwiaHVtYW5pemUiLCJjaGFyUGF1c2UiLCJza2lwIiwiY3VyQ2hhciIsInRhZyIsImVuZFRhZyIsIm5leHRTdHJpbmciLCJhcnJheSIsInRtcCIsImN1cnJlbnQiLCJ0b3AiLCJvcHRpb24iLCIkdGhpcyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFFQSxJQUFJQSxTQUE0QixrQkFBWEMsU0FBb0QsZ0JBQXBCQSxRQUFPQyxTQUF3QixTQUFVQyxLQUFPLGFBQWNBLE1BQVMsU0FBVUEsS0FBTyxNQUFPQSxNQUF5QixrQkFBWEYsU0FBeUJFLElBQUlDLGNBQWdCSCxRQUFVRSxNQUFRRixPQUFPSSxVQUFZLGVBQWtCRixNQ0N0UUcsSUFBQUMsUUFBQUMsT0FBQSxTQUFBLFlBQUEsZUFBQSxZQUFBLGlCQU1BRixLQUFBRyxRQUFBLGlCQUFBLHFCQUFBLG9C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QUFBLEVBRUFhLFdBQUEsSUFFQWQsS0FBQSxLQUVBSSxZQUFBLE9BRUF3QyxTQUFBLGFBRUFFLGVBQUEsYUFFQUgsY0FBQSxhQUVBVSxjQUFBLGVBSUE1RSxPQUFBNkUiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJywgWyd1aS5yb3V0ZXInLCAndWkuYm9vdHN0cmFwJywgJ25nQW5pbWF0ZScsICdhbmd1bGFyLXR5cGVkJ10pO1xuXG4vLyBhcHAucnVuKGZ1bmN0aW9uKGVkaXRhYmxlT3B0aW9ucykge1xuLy8gICAgIGVkaXRhYmxlT3B0aW9ucy50aGVtZSA9ICdiczMnOyAvLyBib290c3RyYXAzIHRoZW1lLiBDYW4gYmUgYWxzbyAnYnMyJywgJ2RlZmF1bHQnXG4vLyB9KTtcblxuYXBwLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuXHRcdFx0XHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xuXHRcdFx0XHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWlyZUJhc2U6IGZhbHNlXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcbn1dKTtcblxuYXBwLmRpcmVjdGl2ZSgnbmF2YmFyJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRzdGF0ZSwgYXV0aEZhY3RvcnkpIHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdFx0XHRcdFx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2pzL25hdkJhci9uYXZiYXIuaHRtbCcsXG5cdFx0XHRcdFx0XHRcdFx0bGluazogZnVuY3Rpb24gbGluayhzY29wZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2NvcGUuc2hvd0xpbmsgPSBmdW5jdGlvbiAobGluaykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gIWxpbmsuaXNBZG1pbiAmJiAobGluay5zdGF0ZSA9PT0gJ2FkbWluJyB8fCBsaW5rLnN0YXRlID09PSAnbG9naW4nKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjb3BlLmlzTG9nZ2VkSW4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBhdXRoRmFjdG9yeS5pc0FkbWluKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY29wZS5saW5rcyA9IFt7IGxhYmVsOiAnSG9tZScsIHN0YXRlOiAnaG9tZScgfSwgeyBsYWJlbDogJ1Byb2plY3RzJywgc3RhdGU6ICdwcm9qZWN0cycgfSwgeyBsYWJlbDogJ0Fib3V0IE1lJywgc3RhdGU6ICdhYm91dCcgfVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8geyBsYWJlbDogJ0ZlZWRiYWNrJywgc3RhdGU6ICdjb250YWN0JyB9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8geyBsYWJlbDogJ0FkbWluICcsIHN0YXRlOiAnYWRtaW4nLCBpc0FkbWluOiAhJHJvb3RTY29wZS5hZG1pbiB9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8geyBsYWJlbDogJ0FkbWluaXN0cmF0b3InLCBzdGF0ZTogJ2xvZ2luJywgaXNBZG1pbjogJHJvb3RTY29wZS5hZG1pbiB9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRdO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcbn0pO1xuXG4vLyBhcHAucnVuKGZ1bmN0aW9uKCRyb290U2NvcGUsICRzdGF0ZSwgYXV0aEZhY3RvcnkpIHtcbi8vICAgICAkcm9vdFNjb3BlLmFkbWluID0gbnVsbDtcbi8vICAgICAkcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN0YXJ0XCIsIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBhdXRoRmFjdG9yeSkge1xuLy8gICAgICAgICBpZiAodG9TdGF0ZS5hdXRoZW50aWNhdGUgJiYgIWF1dGhGYWN0b3J5LmlzQWRtaW4oKSkge1xuLy8gICAgICAgICAgICAgLy8gVXNlciBpc27igJl0IGF1dGhlbnRpY2F0ZWRcbi8vICAgICAgICAgICAgICRzdGF0ZS50cmFuc2l0aW9uVG8oXCJob21lXCIpO1xuLy8gICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbi8vICAgICAgICAgfVxuLy8gICAgIH0pO1xuLy8gfSk7XG5cblxuYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcblx0XHRcdFx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2Fib3V0Jywge1xuXHRcdFx0XHRcdFx0XHRcdHVybDogJy9hYm91dCcsXG5cdFx0XHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcvanMvYWJvdXQvYWJvdXQuaHRtbCcsXG5cdFx0XHRcdFx0XHRcdFx0YXV0aGVudGljYXRlOiBmYWxzZVxuXHRcdFx0XHR9KTtcbn0pO1xuXG5hcHAuY29udHJvbGxlcignYWRtaW5Db250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCBhZG1pbkZhY3RvcnksIGFsbFByb2plY3RzLCBhdXRoRmFjdG9yeSkge1xuXG5cdFx0XHRcdCRzY29wZS5zdWJtaXRQcm9qZWN0ID0gZnVuY3Rpb24gKHByb2plY3QpIHtcblx0XHRcdFx0XHRcdFx0XHRhZG1pbkZhY3RvcnkucG9zdFByb2plY3QocHJvamVjdCk7XG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLnByb2plY3QgPSBudWxsO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdCRzY29wZS5hbGxQcm9qZWN0cyA9IGFsbFByb2plY3RzIHx8IFt7IGlkOiAwLCBuYW1lOiAnZW1wdHknLCBkZXBsb3k6ICdlbXB0eScsIGdpdEh1YjogXCJlbXB0eVwiIH1dO1xuXG5cdFx0XHRcdCRzY29wZS5kYXRhID0ge1xuXHRcdFx0XHRcdFx0XHRcdGF2YWlsYWJsZVByb2plY3RzOiAkc2NvcGUuYWxsUHJvamVjdHMsXG5cdFx0XHRcdFx0XHRcdFx0c2VsZWN0ZWRQcm9qZWN0OiB7IGlkOiAwLCBuYW1lOiAnZW1wdHknLCBkZXBsb3k6ICdlbXB0eScsIGdpdEh1YjogJ2VtcHR5JywgZGVzY3JpcHRpb246IFwiZW1wdHlcIiB9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0JHNjb3BlLnNlbGVjdGVkcHJvamVjdENoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLmN1cnJlbnRQcm9qZWN0ID0gJHNjb3BlLnNlbGVjdGVkSXRlbTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQkc2NvcGUubG9nT3V0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdGF1dGhGYWN0b3J5LmxvZ091dCgpO1xuXHRcdFx0XHRcdFx0XHRcdCRzdGF0ZS5nbygnaG9tZScpO1xuXHRcdFx0XHR9O1xufSk7XG5cbmFwcC5kaXJlY3RpdmUoJ3Byb2plY3RFZGl0JywgZnVuY3Rpb24gKHByb2plY3RGYWN0b3J5KSB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHRcdFx0XHRcdFx0XHRzY29wZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cHJvamVjdDogJz1wcm9qZWN0J1xuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdhZG1pbkVkaXQuaHRtbCdcblx0XHRcdFx0fTtcbn0pO1xuXG5hcHAuZmFjdG9yeSgnYWRtaW5GYWN0b3J5JywgZnVuY3Rpb24gKCRodHRwKSB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0cG9zdFByb2plY3Q6IGZ1bmN0aW9uIHBvc3RQcm9qZWN0KHByb2plY3QpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Byb2plY3QnLCBwcm9qZWN0KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pLmNhdGNoKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRnZXRBbGxQcm9qZWN0czogZnVuY3Rpb24gZ2V0QWxsUHJvamVjdHMoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Byb2plY3QnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pLmNhdGNoKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xufSk7XG5cbmFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdFx0XHRcdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdhZG1pbicsIHtcblx0XHRcdFx0XHRcdFx0XHR1cmw6ICcvYWRtaW4nLFxuXHRcdFx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL2pzL2FkbWluL2FkbWluLmh0bWwnLFxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdhZG1pbkNvbnRyb2xsZXInLFxuXHRcdFx0XHRcdFx0XHRcdGF1dGhlbnRpY2F0ZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhbGxQcm9qZWN0czogZnVuY3Rpb24gYWxsUHJvamVjdHMoYWRtaW5GYWN0b3J5KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBhZG1pbkZhY3RvcnkuZ2V0QWxsUHJvamVjdHMoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xufSk7XG5cbmFwcC5jb250cm9sbGVyKCdhdXRoQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsIGF1dGhGYWN0b3J5KSB7XG5cdFx0XHRcdCRzY29wZS5pc0FkbWluID0gYXV0aEZhY3RvcnkuaXNBZG1pbigpO1xufSk7XG5cbmFwcC5mYWN0b3J5KCdhdXRoRmFjdG9yeScsIGZ1bmN0aW9uICgkaHR0cCwgJHN0YXRlLCAkcm9vdFNjb3BlKSB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0aXNBZG1pbjogZnVuY3Rpb24gaXNBZG1pbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiAhISRyb290U2NvcGUuYWRtaW47XG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRsb2dpbjogZnVuY3Rpb24gbG9naW4obG9naW5JbmZvKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2F1dGhlbnRpY2F0aW9uLycgKyBsb2dpbkluZm8ubmFtZSArICcvJyArIGxvZ2luSW5mby5wYXNzd29yZCkudGhlbihmdW5jdGlvbiAoYXV0aGVudGljYXRpb25EZWNpc2lvbikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIWF1dGhlbnRpY2F0aW9uRGVjaXNpb24uZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCRyb290U2NvcGUuYWRtaW4gPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQkcm9vdFNjb3BlLmFkbWluID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYXV0aGVudGljYXRpb25EZWNpc2lvbjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pLmNhdGNoKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRsb2dPdXQ6IGZ1bmN0aW9uIGxvZ091dCgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCRyb290U2NvcGUuYWRtaW4gPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcbn0pO1xuXG5hcHAuY29udHJvbGxlcignY29udGFjdENvbnRyb2xsZXInLCBmdW5jdGlvbiAoJHNjb3BlLCBwb3N0cywgZmVlZEJhY2tGYWN0b3J5KSB7XG5cdFx0XHRcdCRzY29wZS5wb3N0cyA9IHBvc3RzO1xuXHRcdFx0XHQkc2NvcGUuZ2V0UmVwbGllcyA9IGZlZWRCYWNrRmFjdG9yeS5nZXRSZXBsaWVzO1xuXHRcdFx0XHQkc2NvcGUucG9zdFJlcGx5ID0gZnVuY3Rpb24gKHBvc3RJZCwgY29udGVudCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciByZXBseUluZm8gPSB7IHBvc3RJZDogcG9zdElkLCBjb250ZW50OiBjb250ZW50IH07XG5cdFx0XHRcdFx0XHRcdFx0ZmVlZEJhY2tGYWN0b3J5LnBvc3RSZXBsWShyZXBseUluZm8pO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdCRzY29wZS5zdWJtaXRGb3JtID0gZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHRmZWVkQmFja0ZhY3RvcnkucG9zdENvbW1lbnQoZGF0YSkudGhlbihmdW5jdGlvbiAobmV3UG9zdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0JHNjb3BlLnBvc3RzWyRzY29wZS5wb3N0cy5sZW5ndGhdID0gbmV3UG9zdDtcblx0XHRcdFx0XHRcdFx0XHR9KS5jYXRjaCgpO1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS51c2VyID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUudXNlckZvcm0uJHNldFByaXN0aW5lKHRydWUpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdCRzY29wZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUudXNlciA9IG51bGw7XG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLnVzZXJGb3JtLiRzZXRQcmlzdGluZSh0cnVlKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICgkc2NvcGUubWVzc2FnZSAmJiAkc2NvcGUuZW1haWwgJiYgJHNjb3BlLm5hbWUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXJGYWN0b3J5LnNlbmRNZXNzYWdlKCRzY29wZS5uYW1lLCAkc2NvcGUuZW1haWwsICRzY29wZS5tZXNzYWdlKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG59KTtcblxuYXBwLmRpcmVjdGl2ZSgncmVwbGllcycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ3Bvc3QgZGlyZWN0aXZlJyk7XG5cblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdFx0XHRcdFx0XHRcdHNjb3BlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwb3N0OiBcIj1cIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdqcy9jb250YWN0L3RlbXBsYXRlL3JlcGx5Vmlldy5odG1sJyxcblx0XHRcdFx0XHRcdFx0XHRsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY29wZS5yZXBsaWVzID0gW3sgbGFiZWw6ICdIb21lJywgc3RhdGU6ICdob21lJyB9LCB7IGxhYmVsOiAnUHJvamVjdHMnLCBzdGF0ZTogJ3Byb2plY3RzJyB9LCB7IGxhYmVsOiAnQWJvdXQgTWUnLCBzdGF0ZTogJ2Fib3V0JyB9LCB7IGxhYmVsOiAnQ29udGFjdCBNZScsIHN0YXRlOiAnY29udGFjdCcgfV07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xufSk7XG5cbmFwcC5mYWN0b3J5KCdmZWVkQmFja0ZhY3RvcnknLCBmdW5jdGlvbiAoJGh0dHApIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkluIHRoZSBmZWViYWNrIGZhY3RvcnlcIik7XG5cdFx0XHRcdHZhciBmZWVkQmFja0ZhY3RvcnkgPSB7fTtcblx0XHRcdFx0ZmVlZEJhY2tGYWN0b3J5LmdldFBvc3RzID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY29tbWVudCcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnZ2V0dGluZyBjb21tZW50cycpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cdFx0XHRcdFx0XHRcdFx0fSkuY2F0Y2goKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0ZmVlZEJhY2tGYWN0b3J5LnBvc3RDb21tZW50ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnUG9zdGluZyBjb21tZW50Jyk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tbWVudCcsIGNvbnRlbnQpLnRoZW4oZnVuY3Rpb24gKHN1Y2Nlc2Z1bENvbW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHN1Y2Nlc2Z1bENvbW1lbnQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHN1Y2Nlc2Z1bENvbW1lbnQuZGF0YTtcblx0XHRcdFx0XHRcdFx0XHR9KS5jYXRjaCgpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRmZWVkQmFja0ZhY3RvcnkuZ2V0UmVwbGllcyA9IGZ1bmN0aW9uIChjb21tZW50SWQpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3JlcGx5LycgKyBjb21tZW50SWQpLnRoZW4oZnVuY3Rpb24gKHJlcGxpZXMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdnb3QgY29tbWVudHMnKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiByZXBsaWVzLmRhdGE7XG5cdFx0XHRcdFx0XHRcdFx0fSkuY2F0Y2goKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0ZmVlZEJhY2tGYWN0b3J5LnBvc3RSZXBsWSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ3J1bm5pbmcgcG9zdCByZXBseScsIG1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3JlcGx5LycsIHsgcG9zdF9pZDogcGFyc2VJbnQobWVzc2FnZS5wb3N0SWQucG9zdElkKSwgY29udGVudDogbWVzc2FnZS5jb250ZW50LmNvbnRlbnQgfSkudGhlbihmdW5jdGlvbiAocG9zdGVkQ29tbWVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHBvc3RlZENvbW1lbnQuZGF0YTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRyZXR1cm4gZmVlZEJhY2tGYWN0b3J5O1xufSk7XG5cbmFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdFx0XHRcdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdjb250YWN0Jywge1xuXHRcdFx0XHRcdFx0XHRcdHVybDogJy9jb250YWN0Jyxcblx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy9qcy9jb250YWN0L2NvbnRhY3QuaHRtbCcsXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ2NvbnRhY3RDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdFx0XHRhdXRoZW50aWNhdGU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBvc3RzOiBmdW5jdGlvbiBwb3N0cyhmZWVkQmFja0ZhY3RvcnkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2ludm9raW5nIGZlZWRCYWNrRmFjdG9yeScpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmVlZEJhY2tGYWN0b3J5LmdldFBvc3RzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcbn0pO1xuXG5jb25zb2xlLmxvZygnYmFyIGN0cmwgbG9hZGVkJyk7XG5cbmFwcC5jb250cm9sbGVyKFwiQmFyQ3RybFwiLCBmdW5jdGlvbiAoJHNjb3BlLCAkdGltZW91dCkge1xuXG5cdFx0XHRcdCRzY29wZS50aW1lSW5NcyA9IDA7XG5cblx0XHRcdFx0dmFyIGNvdW50VXAgPSBmdW5jdGlvbiBjb3VudFVwKCkge1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS50aW1lSW5NcyArPSA1MDA7XG5cdFx0XHRcdFx0XHRcdFx0JHRpbWVvdXQoY291bnRVcCwgNTAwKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQkdGltZW91dChjb3VudFVwLCA1MDApO1xufSk7XG5cbmFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdFx0XHRcdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdob21lJywge1xuXHRcdFx0XHRcdFx0XHRcdHVybDogJy8nLFxuXHRcdFx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL2pzL2hvbWUvaG9tZS5odG1sJyxcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnQmFyQ3RybCcsXG5cdFx0XHRcdFx0XHRcdFx0YXV0aGVudGljYXRlOiBmYWxzZVxuXHRcdFx0XHR9KTtcbn0pO1xuXG5hcHAuY29udHJvbGxlcignbG9naW5Db250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCBhdXRoRmFjdG9yeSwgJGxvY2F0aW9uKSB7XG5cdFx0XHRcdCRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgbG9naW5JbmZvID0geyBuYW1lOiAkc2NvcGUudXNlcm5hbWUsIHBhc3N3b3JkOiAkc2NvcGUucGFzc3dvcmQgfTtcblx0XHRcdFx0XHRcdFx0XHRhdXRoRmFjdG9yeS5sb2dpbihsb2dpbkluZm8pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2cocmVzdWx0KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCRzdGF0ZS5nbygnaG9tZScsIHt9LCB7IHJlbG9hZDogdHJ1ZSB9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdFx0XHRcdFx0XHRcdFx0fSkuY2F0Y2goKTtcblx0XHRcdFx0fTtcbn0pO1xuXG5hcHAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuXHRcdFx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnbG9naW4nLCB7XG5cdFx0XHRcdFx0XHRcdFx0dXJsOiAnL2xvZ2luJyxcblx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy9qcy9sb2dpbi9sb2dpbi5odG1sJyxcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnbG9naW5Db250cm9sbGVyJyxcblx0XHRcdFx0XHRcdFx0XHRhdXRoZW50aWNhdGU6IGZhbHNlXG5cdFx0XHRcdH0pO1xufSk7XG5cbmFwcC5jb250cm9sbGVyKCdwcm9qZWN0Q29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsIGFsbFByb2plY3RzKSB7XG5cdFx0XHRcdCRzY29wZS5wcm9qZWN0cyA9IGFsbFByb2plY3RzO1xufSk7XG5cbmFwcC5jb250cm9sbGVyKCdzaW5nbGVQcm9qZWN0Q29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsIHByb2plY3RGYWN0b3J5LCBjdXJyZW50UHJvamVjdCwgJHNjZSkge1xuXHRcdFx0XHQkc2NvcGUuY3VycmVudFByb2plY3QgPSBjdXJyZW50UHJvamVjdDtcblxuXHRcdFx0XHQkc2NvcGUudHJ1c3RTcmMgPSBmdW5jdGlvbiAoc3JjKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuICRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHNyYyk7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0JHNjb3BlLm1vdmllID0geyBzcmM6ICRzY29wZS5jdXJyZW50UHJvamVjdC52aWRlb0xpbmsgfTtcblxuXHRcdFx0XHQkc2NvcGUuaGFzVmlkZW9MaW5rID0gZnVuY3Rpb24gaGFzVmlkZW9MaW5rKCkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAhIWN1cnJlbnRQcm9qZWN0LnZpZGVvTGluaztcblx0XHRcdFx0fTtcbn0pO1xuXG5hcHAuZGlyZWN0aXZlKCdwcm9qZWN0VGlsZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRyZXN0cmljdDogXCJFXCIsXG5cdFx0XHRcdFx0XHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHByb2plY3Q6ICc9J1xuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdqcy9wcm9qZWN0cy9zaW5nbGVQcm9qZWN0L3NpbmdsZVByb2plY3RUaWxlLmh0bWwnXG5cdFx0XHRcdH07XG59KTtcblxuYXBwLmZhY3RvcnkoJ3Byb2plY3RGYWN0b3J5JywgZnVuY3Rpb24gKCRodHRwKSB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0Z2V0QWxsUHJvamVjdHM6IGZ1bmN0aW9uIGdldEFsbFByb2plY3RzKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9wcm9qZWN0JykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KS5jYXRjaCgpO1xuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0Z2V0U2luZ2xlUHJvamVjdDogZnVuY3Rpb24gZ2V0U2luZ2xlUHJvamVjdChwcm9qZWN0SUQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcHJvamVjdC8nICsgcHJvamVjdElEKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pLmNhdGNoKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRwb3N0UHJvamVjdDogZnVuY3Rpb24gcG9zdFByb2plY3QocHJvamVjdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcHJvamVjdCcsIHByb2plY3QpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSkuY2F0Y2goKTtcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdHVwZGF0ZVByb2plY3Q6IGZ1bmN0aW9uIHVwZGF0ZVByb2plY3QodXBkYXRlZFByb2plY3QpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiAkaHR0cC5wdXQoJ2FwaS9wcm9qZWN0JywgdXBkYXRlZFByb2plY3QpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSkuY2F0Y2goKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG59KTtcblxuYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcblx0XHRcdFx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3Byb2plY3RzJywge1xuXHRcdFx0XHRcdFx0XHRcdHVybDogJy9wcm9qZWN0cycsXG5cdFx0XHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcvanMvcHJvamVjdHMvcHJvamVjdHMuaHRtbCcsXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ3Byb2plY3RDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdFx0XHRhdXRoZW50aWNhdGU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFsbFByb2plY3RzOiBmdW5jdGlvbiBhbGxQcm9qZWN0cyhwcm9qZWN0RmFjdG9yeSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcHJvamVjdEZhY3RvcnkuZ2V0QWxsUHJvamVjdHMoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdzaW5nbGVQcm9qZWN0Jywge1xuXHRcdFx0XHRcdFx0XHRcdHVybDogJy9wcm9qZWN0cy86aWQnLFxuXHRcdFx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL2pzL3Byb2plY3RzL3NpbmdsZVByb2plY3Qvc2luZ2xlUHJvamVjdC5odG1sJyxcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnc2luZ2xlUHJvamVjdENvbnRyb2xsZXInLFxuXHRcdFx0XHRcdFx0XHRcdGF1dGhlbnRpY2F0ZTogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudFByb2plY3Q6IGZ1bmN0aW9uIGN1cnJlbnRQcm9qZWN0KHByb2plY3RGYWN0b3J5LCAkc3RhdGVQYXJhbXMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHByb2plY3RGYWN0b3J5LmdldFNpbmdsZVByb2plY3QoJHN0YXRlUGFyYW1zLmlkKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xufSkoZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdhYi5UeXBlaXQgYWJvdXQgdG8nKTtcblx0XHRcdFx0YW5ndWxhci5tb2R1bGUoJ2FiLlR5cGVpdCcsIFtdKS5kaXJlY3RpdmUoJ2FiVHlwZWl0JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbmVvbGUubG9nKCdydW5uaW5nIHRoZSB3cmFwcGVyJyk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc3RyaWN0OiAnQScsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY29wZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlaXRTdHJpbmdzOiAnPWFiVHlwZWl0Jyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZWl0TG9vcDogJz0nLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlaXRMb29wRGVsYXk6ICc9Jyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZWl0QnJlYWtMaW5lczogJz0nLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlaXRTcGVlZDogJz0nLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlaXRMaWZlTGlrZTogJz0nLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlaXRDdXJzb3I6ICc9Jyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZWl0Q3Vyc29yU3BlZWQ6ICc9Jyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZWl0U3RhcnREZWxheTogJz0nLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlaXRCcmVha0RlbGF5OiAnPSdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyOiBmdW5jdGlvbiBjb250cm9sbGVyKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgdHlwZUl0RWxlbWVudCA9ICQoJGVsZW1lbnQpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZUl0RWxlbWVudC50eXBlSXQoe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c3RyaW5nczogJHNjb3BlLnR5cGVpdFN0cmluZ3MsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsb29wOiAkc2NvcGUudHlwZWl0TG9vcCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGxvb3BEZWxheTogJHNjb3BlLnR5cGVpdExvb3BEZWxheSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrTGluZXM6ICRzY29wZS50eXBlaXRCcmVha0xpbmVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c3BlZWQ6ICRzY29wZS50eXBlaXRTcGVlZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGxpZmVMaWtlOiAkc2NvcGUudHlwZWl0TGlmZUxpa2UsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjdXJzb3I6ICRzY29wZS50eXBlaXRDdXJzb3IsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjdXJzb3JTcGVlZDogJHNjb3BlLnR5cGVpdEN1cnNvclNwZWVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c3RhcnREZWxheTogJHNjb3BlLnR5cGVpdFN0YXJ0RGVsYXksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVha0RlbGF5OiAkc2NvcGUudHlwZWl0QnJlYWtEZWxheVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignT0ggTk8hIGFuZ3VsYXItdHlwZWl0IHJlcXVpcmVzIHR5cGVpdC5qcyBvbiB5b3VyIHBhZ2UgLSBkbyB5b3UgaGF2ZSBpdCBsb2FkZWQ/Jyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9KTtcbn0pKCk7XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0JChcIi5kZXZlbG9wZXJcIikudHlwZWQoe1xuXHRcdFx0XHRcdFx0XHRcdHN0cmluZ3M6IFtcIkZyb250LWVuZFwiLCBcIkJhY2stZW5kXCIsIFwiRnVsbHN0YWNrXCIsIFwiU29mdHdhcmVcIiwgXCJKYXZhU2NyaXB0XCIsIFwiQW5ndWxhckpTXCIsIFwiVUkvVVhcIl0sXG5cdFx0XHRcdFx0XHRcdFx0dHlwZVNwZWVkOiAyNTAsXG5cdFx0XHRcdFx0XHRcdFx0bG9vcDogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRjdXJzb3JTcGVlZDogMTAwLFxuXHRcdFx0XHRcdFx0XHRcdGxpZmVMaWtlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGN1cnNlcjogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRkZWxldGVTcGVlZDogMTAwMFxuXHRcdFx0XHR9KTtcbn07XG5cbi8vIEdyYWIgbm9kZSBwYWNrYWdlc1xudmFyIGd1bHAgPSByZXF1aXJlKCdndWxwJyk7XG5yZW5hbWUgPSByZXF1aXJlKCdndWxwLXJlbmFtZScpO1xudWdsaWZ5ID0gcmVxdWlyZSgnZ3VscC11Z2xpZnknKTtcblxuZ3VscC50YXNrKCdjb21wcmVzcycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Z3VscC5zcmMoJ2pzLyouanMnKS5waXBlKHVnbGlmeSgpKS5waXBlKHJlbmFtZSgndHlwZWQubWluLmpzJykpLnBpcGUoZ3VscC5kZXN0KCdkaXN0JykpO1xufSk7XG5cbi8vIERlZmF1bHQgVGFza1xuZ3VscC50YXNrKCdkZWZhdWx0JywgWydjb21wcmVzcyddKTtcblxuIWZ1bmN0aW9uICh0KSB7XG5cdFx0XHRcdFwidXNlIHN0cmljdFwiO1xuXHRcdFx0XHR2YXIgcyA9IGZ1bmN0aW9uIHMoX3MsIGUpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmVsID0gdChfcyksIHRoaXMub3B0aW9ucyA9IHQuZXh0ZW5kKHt9LCB0LmZuLnR5cGVkLmRlZmF1bHRzLCBlKSwgdGhpcy5pc0lucHV0ID0gdGhpcy5lbC5pcyhcImlucHV0XCIpLCB0aGlzLmF0dHIgPSB0aGlzLm9wdGlvbnMuYXR0ciwgdGhpcy5zaG93Q3Vyc29yID0gdGhpcy5pc0lucHV0ID8gITEgOiB0aGlzLm9wdGlvbnMuc2hvd0N1cnNvciwgdGhpcy5lbENvbnRlbnQgPSB0aGlzLmF0dHIgPyB0aGlzLmVsLmF0dHIodGhpcy5hdHRyKSA6IHRoaXMuZWwudGV4dCgpLCB0aGlzLmNvbnRlbnRUeXBlID0gdGhpcy5vcHRpb25zLmNvbnRlbnRUeXBlLCB0aGlzLnR5cGVTcGVlZCA9IHRoaXMub3B0aW9ucy50eXBlU3BlZWQsIHRoaXMuc3RhcnREZWxheSA9IHRoaXMub3B0aW9ucy5zdGFydERlbGF5LCB0aGlzLmJhY2tTcGVlZCA9IHRoaXMub3B0aW9ucy5iYWNrU3BlZWQsIHRoaXMuYmFja0RlbGF5ID0gdGhpcy5vcHRpb25zLmJhY2tEZWxheSwgdGhpcy5zdHJpbmdzRWxlbWVudCA9IHRoaXMub3B0aW9ucy5zdHJpbmdzRWxlbWVudCwgdGhpcy5zdHJpbmdzID0gdGhpcy5vcHRpb25zLnN0cmluZ3MsIHRoaXMuc3RyUG9zID0gMCwgdGhpcy5hcnJheVBvcyA9IDAsIHRoaXMuc3RvcE51bSA9IDAsIHRoaXMubG9vcCA9IHRoaXMub3B0aW9ucy5sb29wLCB0aGlzLmxvb3BDb3VudCA9IHRoaXMub3B0aW9ucy5sb29wQ291bnQsIHRoaXMuY3VyTG9vcCA9IDAsIHRoaXMuc3RvcCA9ICExLCB0aGlzLmN1cnNvckNoYXIgPSB0aGlzLm9wdGlvbnMuY3Vyc29yQ2hhciwgdGhpcy5zaHVmZmxlID0gdGhpcy5vcHRpb25zLnNodWZmbGUsIHRoaXMuc2VxdWVuY2UgPSBbXSwgdGhpcy5idWlsZCgpO1xuXHRcdFx0XHR9O3MucHJvdG90eXBlID0geyBjb25zdHJ1Y3RvcjogcywgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciB0ID0gdGhpczt0LnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgcyA9IDA7IHMgPCB0LnN0cmluZ3MubGVuZ3RoOyArK3MpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0LnNlcXVlbmNlW3NdID0gcztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fXQuc2h1ZmZsZSAmJiAodC5zZXF1ZW5jZSA9IHQuc2h1ZmZsZUFycmF5KHQuc2VxdWVuY2UpKSwgdC50eXBld3JpdGUodC5zdHJpbmdzW3Quc2VxdWVuY2VbdC5hcnJheVBvc11dLCB0LnN0clBvcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LCB0LnN0YXJ0RGVsYXkpO1xuXHRcdFx0XHRcdFx0XHRcdH0sIGJ1aWxkOiBmdW5jdGlvbiBidWlsZCgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBzID0gdGhpcztpZiAodGhpcy5zaG93Q3Vyc29yID09PSAhMCAmJiAodGhpcy5jdXJzb3IgPSB0KCc8c3BhbiBjbGFzcz1cInR5cGVkLWN1cnNvclwiPicgKyB0aGlzLmN1cnNvckNoYXIgKyBcIjwvc3Bhbj5cIiksIHRoaXMuZWwuYWZ0ZXIodGhpcy5jdXJzb3IpKSwgdGhpcy5zdHJpbmdzRWxlbWVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnN0cmluZ3MgPSBbXSwgdGhpcy5zdHJpbmdzRWxlbWVudC5oaWRlKCksIGNvbnNvbGUubG9nKHRoaXMuc3RyaW5nc0VsZW1lbnQuY2hpbGRyZW4oKSk7dmFyIGUgPSB0aGlzLnN0cmluZ3NFbGVtZW50LmNoaWxkcmVuKCk7dC5lYWNoKGUsIGZ1bmN0aW9uIChlLCBpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cy5zdHJpbmdzLnB1c2godChpKS5odG1sKCkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH10aGlzLmluaXQoKTtcblx0XHRcdFx0XHRcdFx0XHR9LCB0eXBld3JpdGU6IGZ1bmN0aW9uIHR5cGV3cml0ZSh0LCBzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zdG9wICE9PSAhMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgZSA9IE1hdGgucm91bmQoNzAgKiBNYXRoLnJhbmRvbSgpKSArIHRoaXMudHlwZVNwZWVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgaSA9IHRoaXM7aS50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGUgPSAwLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgICByID0gdC5zdWJzdHIocyk7aWYgKFwiXlwiID09PSByLmNoYXJBdCgwKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIG8gPSAxOy9eXFxeXFxkKy8udGVzdChyKSAmJiAociA9IC9cXGQrLy5leGVjKHIpWzBdLCBvICs9IHIubGVuZ3RoLCBlID0gcGFyc2VJbnQocikpLCB0ID0gdC5zdWJzdHJpbmcoMCwgcykgKyB0LnN1YnN0cmluZyhzICsgbyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fWlmIChcImh0bWxcIiA9PT0gaS5jb250ZW50VHlwZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIG4gPSB0LnN1YnN0cihzKS5jaGFyQXQoMCk7aWYgKFwiPFwiID09PSBuIHx8IFwiJlwiID09PSBuKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBhID0gXCJcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIGggPSBcIlwiO2ZvciAoaCA9IFwiPFwiID09PSBuID8gXCI+XCIgOiBcIjtcIjsgdC5zdWJzdHIocyArIDEpLmNoYXJBdCgwKSAhPT0gaCAmJiAoYSArPSB0LnN1YnN0cihzKS5jaGFyQXQoMCksIHMrKywgIShzICsgMSA+IHQubGVuZ3RoKSk7KSB7fXMrKywgYSArPSBoO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1pLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzID09PSB0Lmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoaS5vcHRpb25zLm9uU3RyaW5nVHlwZWQoaS5hcnJheVBvcyksIGkuYXJyYXlQb3MgPT09IGkuc3RyaW5ncy5sZW5ndGggLSAxICYmIChpLm9wdGlvbnMuY2FsbGJhY2soKSwgaS5jdXJMb29wKyssIGkubG9vcCA9PT0gITEgfHwgaS5jdXJMb29wID09PSBpLmxvb3BDb3VudCkpIHJldHVybjtpLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpLmJhY2tzcGFjZSh0LCBzKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgaS5iYWNrRGVsYXkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0MCA9PT0gcyAmJiBpLm9wdGlvbnMucHJlU3RyaW5nVHlwZWQoaS5hcnJheVBvcyk7dmFyIGUgPSB0LnN1YnN0cigwLCBzICsgMSk7aS5hdHRyID8gaS5lbC5hdHRyKGkuYXR0ciwgZSkgOiBpLmlzSW5wdXQgPyBpLmVsLnZhbChlKSA6IFwiaHRtbFwiID09PSBpLmNvbnRlbnRUeXBlID8gaS5lbC5odG1sKGUpIDogaS5lbC50ZXh0KGUpLCBzKyssIGkudHlwZXdyaXRlKHQsIHMpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sIGUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LCBlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9LCBiYWNrc3BhY2U6IGZ1bmN0aW9uIGJhY2tzcGFjZSh0LCBzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zdG9wICE9PSAhMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgZSA9IE1hdGgucm91bmQoNzAgKiBNYXRoLnJhbmRvbSgpKSArIHRoaXMuYmFja1NwZWVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgaSA9IHRoaXM7aS50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKFwiaHRtbFwiID09PSBpLmNvbnRlbnRUeXBlICYmIFwiPlwiID09PSB0LnN1YnN0cihzKS5jaGFyQXQoMCkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIGUgPSBcIlwiOyBcIjxcIiAhPT0gdC5zdWJzdHIocyAtIDEpLmNoYXJBdCgwKSAmJiAoZSAtPSB0LnN1YnN0cihzKS5jaGFyQXQoMCksIHMtLSwgISgwID4gcykpOykge31zLS0sIGUgKz0gXCI8XCI7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fXZhciByID0gdC5zdWJzdHIoMCwgcyk7aS5hdHRyID8gaS5lbC5hdHRyKGkuYXR0ciwgcikgOiBpLmlzSW5wdXQgPyBpLmVsLnZhbChyKSA6IFwiaHRtbFwiID09PSBpLmNvbnRlbnRUeXBlID8gaS5lbC5odG1sKHIpIDogaS5lbC50ZXh0KHIpLCBzID4gaS5zdG9wTnVtID8gKHMtLSwgaS5iYWNrc3BhY2UodCwgcykpIDogcyA8PSBpLnN0b3BOdW0gJiYgKGkuYXJyYXlQb3MrKywgaS5hcnJheVBvcyA9PT0gaS5zdHJpbmdzLmxlbmd0aCA/IChpLmFycmF5UG9zID0gMCwgaS5zaHVmZmxlICYmIChpLnNlcXVlbmNlID0gaS5zaHVmZmxlQXJyYXkoaS5zZXF1ZW5jZSkpLCBpLmluaXQoKSkgOiBpLnR5cGV3cml0ZShpLnN0cmluZ3NbaS5zZXF1ZW5jZVtpLmFycmF5UG9zXV0sIHMpKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSwgc2h1ZmZsZUFycmF5OiBmdW5jdGlvbiBzaHVmZmxlQXJyYXkodCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHMsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgICBpID0gdC5sZW5ndGg7aWYgKGkpIGZvciAoOyAtLWk7KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKSwgcyA9IHRbZV0sIHRbZV0gPSB0W2ldLCB0W2ldID0gcztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1yZXR1cm4gdDtcblx0XHRcdFx0XHRcdFx0XHR9LCByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgdCA9IHRoaXM7Y2xlYXJJbnRlcnZhbCh0LnRpbWVvdXQpO3RoaXMuZWwuYXR0cihcImlkXCIpO3RoaXMuZWwuZW1wdHkoKSwgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgdGhpcy5jdXJzb3IgJiYgdGhpcy5jdXJzb3IucmVtb3ZlKCksIHRoaXMuc3RyUG9zID0gMCwgdGhpcy5hcnJheVBvcyA9IDAsIHRoaXMuY3VyTG9vcCA9IDAsIHRoaXMub3B0aW9ucy5yZXNldENhbGxiYWNrKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSB9LCB0LmZuLnR5cGVkID0gZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBpID0gdCh0aGlzKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgICByID0gaS5kYXRhKFwidHlwZWRcIiksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgbyA9IFwib2JqZWN0XCIgPT0gKHR5cGVvZiBlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihlKSkgJiYgZTtyICYmIHIucmVzZXQoKSwgaS5kYXRhKFwidHlwZWRcIiwgciA9IG5ldyBzKHRoaXMsIG8pKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiByW2VdKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0sIHQuZm4udHlwZWQuZGVmYXVsdHMgPSB7IHN0cmluZ3M6IFtcIlRoZXNlIGFyZSB0aGUgZGVmYXVsdCB2YWx1ZXMuLi5cIiwgXCJZb3Uga25vdyB3aGF0IHlvdSBzaG91bGQgZG8/XCIsIFwiVXNlIHlvdXIgb3duIVwiLCBcIkhhdmUgYSBncmVhdCBkYXkhXCJdLCBzdHJpbmdzRWxlbWVudDogbnVsbCwgdHlwZVNwZWVkOiAwLCBzdGFydERlbGF5OiAwLCBiYWNrU3BlZWQ6IDAsIHNodWZmbGU6ICExLCBiYWNrRGVsYXk6IDUwMCwgbG9vcDogITEsIGxvb3BDb3VudDogITEsIHNob3dDdXJzb3I6ICEwLCBjdXJzb3JDaGFyOiBcInxcIiwgYXR0cjogbnVsbCwgY29udGVudFR5cGU6IFwiaHRtbFwiLCBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soKSB7fSwgcHJlU3RyaW5nVHlwZWQ6IGZ1bmN0aW9uIHByZVN0cmluZ1R5cGVkKCkge30sIG9uU3RyaW5nVHlwZWQ6IGZ1bmN0aW9uIG9uU3RyaW5nVHlwZWQoKSB7fSwgcmVzZXRDYWxsYmFjazogZnVuY3Rpb24gcmVzZXRDYWxsYmFjaygpIHt9IH07XG59KHdpbmRvdy5qUXVlcnkpO1xuLy8gVGhlIE1JVCBMaWNlbnNlIChNSVQpXG5cbi8vIFR5cGVkLmpzIHwgQ29weXJpZ2h0IChjKSAyMDE2IE1hdHQgQm9sZHQgfCB3d3cubWF0dGJvbGR0LmNvbVxuXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG5cblxuIWZ1bmN0aW9uICgkKSB7XG5cblx0XHRcdFx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0XHRcdFx0dmFyIFR5cGVkID0gZnVuY3Rpb24gVHlwZWQoZWwsIG9wdGlvbnMpIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIGNob3NlbiBlbGVtZW50IHRvIG1hbmlwdWxhdGUgdGV4dFxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZWwgPSAkKGVsKTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIG9wdGlvbnNcblx0XHRcdFx0XHRcdFx0XHR0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgJC5mbi50eXBlZC5kZWZhdWx0cywgb3B0aW9ucyk7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBhdHRyaWJ1dGUgdG8gdHlwZSBpbnRvXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5pc0lucHV0ID0gdGhpcy5lbC5pcygnaW5wdXQnKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmF0dHIgPSB0aGlzLm9wdGlvbnMuYXR0cjtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIHNob3cgY3Vyc29yXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zaG93Q3Vyc29yID0gdGhpcy5pc0lucHV0ID8gZmFsc2UgOiB0aGlzLm9wdGlvbnMuc2hvd0N1cnNvcjtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIHRleHQgY29udGVudCBvZiBlbGVtZW50XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5lbENvbnRlbnQgPSB0aGlzLmF0dHIgPyB0aGlzLmVsLmF0dHIodGhpcy5hdHRyKSA6IHRoaXMuZWwudGV4dCgpO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gaHRtbCBvciBwbGFpbiB0ZXh0XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50VHlwZSA9IHRoaXMub3B0aW9ucy5jb250ZW50VHlwZTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIHR5cGluZyBzcGVlZFxuXHRcdFx0XHRcdFx0XHRcdHRoaXMudHlwZVNwZWVkID0gdGhpcy5vcHRpb25zLnR5cGVTcGVlZDtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIGFkZCBhIGRlbGF5IGJlZm9yZSB0eXBpbmcgc3RhcnRzXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zdGFydERlbGF5ID0gdGhpcy5vcHRpb25zLnN0YXJ0RGVsYXk7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBiYWNrc3BhY2luZyBzcGVlZFxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYmFja1NwZWVkID0gdGhpcy5vcHRpb25zLmJhY2tTcGVlZDtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIGFtb3VudCBvZiB0aW1lIHRvIHdhaXQgYmVmb3JlIGJhY2tzcGFjaW5nXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5iYWNrRGVsYXkgPSB0aGlzLm9wdGlvbnMuYmFja0RlbGF5O1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gZGl2IGNvbnRhaW5pbmcgc3RyaW5nc1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc3RyaW5nc0VsZW1lbnQgPSB0aGlzLm9wdGlvbnMuc3RyaW5nc0VsZW1lbnQ7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBpbnB1dCBzdHJpbmdzIG9mIHRleHRcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnN0cmluZ3MgPSB0aGlzLm9wdGlvbnMuc3RyaW5ncztcblxuXHRcdFx0XHRcdFx0XHRcdC8vIGNoYXJhY3RlciBudW1iZXIgcG9zaXRpb24gb2YgY3VycmVudCBzdHJpbmdcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnN0clBvcyA9IDA7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBjdXJyZW50IGFycmF5IHBvc2l0aW9uXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hcnJheVBvcyA9IDA7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBudW1iZXIgdG8gc3RvcCBiYWNrc3BhY2luZyBvbi5cblx0XHRcdFx0XHRcdFx0XHQvLyBkZWZhdWx0IDAsIGNhbiBjaGFuZ2UgZGVwZW5kaW5nIG9uIGhvdyBtYW55IGNoYXJzXG5cdFx0XHRcdFx0XHRcdFx0Ly8geW91IHdhbnQgdG8gcmVtb3ZlIGF0IHRoZSB0aW1lXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zdG9wTnVtID0gMDtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIExvb3BpbmcgbG9naWNcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmxvb3AgPSB0aGlzLm9wdGlvbnMubG9vcDtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmxvb3BDb3VudCA9IHRoaXMub3B0aW9ucy5sb29wQ291bnQ7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5jdXJMb29wID0gMDtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIGZvciBzdG9wcGluZ1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc3RvcCA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gY3VzdG9tIGN1cnNvclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY3Vyc29yQ2hhciA9IHRoaXMub3B0aW9ucy5jdXJzb3JDaGFyO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gc2h1ZmZsZSB0aGUgc3RyaW5nc1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc2h1ZmZsZSA9IHRoaXMub3B0aW9ucy5zaHVmZmxlO1xuXHRcdFx0XHRcdFx0XHRcdC8vIHRoZSBvcmRlciBvZiBzdHJpbmdzXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zZXF1ZW5jZSA9IFtdO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQWxsIHN5c3RlbXMgZ28hXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5idWlsZCgpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdFR5cGVkLnByb3RvdHlwZSA9IHtcblxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0cnVjdG9yOiBUeXBlZCxcblxuXHRcdFx0XHRcdFx0XHRcdGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBiZWdpbiB0aGUgbG9vcCB3LyBmaXJzdCBjdXJyZW50IHN0cmluZyAoZ2xvYmFsIHNlbGYuc3RyaW5ncylcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGN1cnJlbnQgc3RyaW5nIHdpbGwgYmUgcGFzc2VkIGFzIGFuIGFyZ3VtZW50IGVhY2ggdGltZSBhZnRlciB0aGlzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLnN0cmluZ3MubGVuZ3RoOyArK2kpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnNlcXVlbmNlW2ldID0gaTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSAvLyBzaHVmZmxlIHRoZSBhcnJheSBpZiB0cnVlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLnNodWZmbGUpIHNlbGYuc2VxdWVuY2UgPSBzZWxmLnNodWZmbGVBcnJheShzZWxmLnNlcXVlbmNlKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdGFydCB0eXBpbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi50eXBld3JpdGUoc2VsZi5zdHJpbmdzW3NlbGYuc2VxdWVuY2Vbc2VsZi5hcnJheVBvc11dLCBzZWxmLnN0clBvcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LCBzZWxmLnN0YXJ0RGVsYXkpO1xuXHRcdFx0XHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRcdFx0XHRidWlsZDogZnVuY3Rpb24gYnVpbGQoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJbnNlcnQgY3Vyc29yXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zaG93Q3Vyc29yID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuY3Vyc29yID0gJChcIjxzcGFuIGNsYXNzPVxcXCJ0eXBlZC1jdXJzb3JcXFwiPlwiICsgdGhpcy5jdXJzb3JDaGFyICsgXCI8L3NwYW4+XCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmVsLmFmdGVyKHRoaXMuY3Vyc29yKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLnN0cmluZ3NFbGVtZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuc3RyaW5ncyA9IFtdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnN0cmluZ3NFbGVtZW50LmhpZGUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2codGhpcy5zdHJpbmdzRWxlbWVudC5jaGlsZHJlbigpKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHN0cmluZ3MgPSB0aGlzLnN0cmluZ3NFbGVtZW50LmNoaWxkcmVuKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCQuZWFjaChzdHJpbmdzLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuc3RyaW5ncy5wdXNoKCQodmFsdWUpLmh0bWwoKSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5pbml0KCk7XG5cdFx0XHRcdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdFx0XHRcdC8vIHBhc3MgY3VycmVudCBzdHJpbmcgc3RhdGUgdG8gZWFjaCBmdW5jdGlvbiwgdHlwZXMgMSBjaGFyIHBlciBjYWxsXG5cdFx0XHRcdFx0XHRcdFx0dHlwZXdyaXRlOiBmdW5jdGlvbiB0eXBld3JpdGUoY3VyU3RyaW5nLCBjdXJTdHJQb3MpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGV4aXQgd2hlbiBzdG9wcGVkXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zdG9wID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gdmFyeWluZyB2YWx1ZXMgZm9yIHNldFRpbWVvdXQgZHVyaW5nIHR5cGluZ1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gY2FuJ3QgYmUgZ2xvYmFsIHNpbmNlIG51bWJlciBjaGFuZ2VzIGVhY2ggdGltZSBsb29wIGlzIGV4ZWN1dGVkXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgaHVtYW5pemUgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAoMTAwIC0gMzApKSArIHRoaXMudHlwZVNwZWVkO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAtLS0tLS0tLS0tLS0tIG9wdGlvbmFsIC0tLS0tLS0tLS0tLS0gLy9cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGJhY2twYWNlcyBhIGNlcnRhaW4gc3RyaW5nIGZhc3RlclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpZiAoc2VsZi5hcnJheVBvcyA9PSAxKXtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vICBzZWxmLmJhY2tEZWxheSA9IDUwO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gfVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZWxzZXsgc2VsZi5iYWNrRGVsYXkgPSA1MDA7IH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gY29udGFpbiB0eXBpbmcgZnVuY3Rpb24gaW4gYSB0aW1lb3V0IGh1bWFuaXplJ2QgZGVsYXlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBjaGVjayBmb3IgYW4gZXNjYXBlIGNoYXJhY3RlciBiZWZvcmUgYSBwYXVzZSB2YWx1ZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBmb3JtYXQ6IFxcXlxcZCsgLi4gZWc6IF4xMDAwIC4uIHNob3VsZCBiZSBhYmxlIHRvIHByaW50IHRoZSBeIHRvbyB1c2luZyBeXlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBzaW5nbGUgXiBhcmUgcmVtb3ZlZCBmcm9tIHN0cmluZ1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgY2hhclBhdXNlID0gMDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHN1YnN0ciA9IGN1clN0cmluZy5zdWJzdHIoY3VyU3RyUG9zKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHN1YnN0ci5jaGFyQXQoMCkgPT09ICdeJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBza2lwID0gMTsgLy8gc2tpcCBhdGxlYXN0IDFcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoL15cXF5cXGQrLy50ZXN0KHN1YnN0cikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHN1YnN0ciA9IC9cXGQrLy5leGVjKHN1YnN0cilbMF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRza2lwICs9IHN1YnN0ci5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjaGFyUGF1c2UgPSBwYXJzZUludChzdWJzdHIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHN0cmlwIG91dCB0aGUgZXNjYXBlIGNoYXJhY3RlciBhbmQgcGF1c2UgdmFsdWUgc28gdGhleSdyZSBub3QgcHJpbnRlZFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1clN0cmluZyA9IGN1clN0cmluZy5zdWJzdHJpbmcoMCwgY3VyU3RyUG9zKSArIGN1clN0cmluZy5zdWJzdHJpbmcoY3VyU3RyUG9zICsgc2tpcCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5jb250ZW50VHlwZSA9PT0gJ2h0bWwnKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gc2tpcCBvdmVyIGh0bWwgdGFncyB3aGlsZSB0eXBpbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgY3VyQ2hhciA9IGN1clN0cmluZy5zdWJzdHIoY3VyU3RyUG9zKS5jaGFyQXQoMCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGN1ckNoYXIgPT09ICc8JyB8fCBjdXJDaGFyID09PSAnJicpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciB0YWcgPSAnJztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBlbmRUYWcgPSAnJztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjdXJDaGFyID09PSAnPCcpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZW5kVGFnID0gJz4nO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZW5kVGFnID0gJzsnO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0d2hpbGUgKGN1clN0cmluZy5zdWJzdHIoY3VyU3RyUG9zICsgMSkuY2hhckF0KDApICE9PSBlbmRUYWcpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGFnICs9IGN1clN0cmluZy5zdWJzdHIoY3VyU3RyUG9zKS5jaGFyQXQoMCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1clN0clBvcysrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY3VyU3RyUG9zICsgMSA+IGN1clN0cmluZy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y3VyU3RyUG9zKys7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0YWcgKz0gZW5kVGFnO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHRpbWVvdXQgZm9yIGFueSBwYXVzZSBhZnRlciBhIGNoYXJhY3RlclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY3VyU3RyUG9zID09PSBjdXJTdHJpbmcubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBmaXJlcyBjYWxsYmFjayBmdW5jdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5vcHRpb25zLm9uU3RyaW5nVHlwZWQoc2VsZi5hcnJheVBvcyk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGlzIHRoaXMgdGhlIGZpbmFsIHN0cmluZ1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuYXJyYXlQb3MgPT09IHNlbGYuc3RyaW5ncy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGFuaW1hdGlvbiB0aGF0IG9jY3VycyBvbiB0aGUgbGFzdCB0eXBlZCBzdHJpbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5vcHRpb25zLmNhbGxiYWNrKCk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5jdXJMb29wKys7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gcXVpdCBpZiB3ZSB3b250IGxvb3AgYmFja1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5sb29wID09PSBmYWxzZSB8fCBzZWxmLmN1ckxvb3AgPT09IHNlbGYubG9vcENvdW50KSByZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmJhY2tzcGFjZShjdXJTdHJpbmcsIGN1clN0clBvcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LCBzZWxmLmJhY2tEZWxheSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0LyogY2FsbCBiZWZvcmUgZnVuY3Rpb25zIGlmIGFwcGxpY2FibGUgKi9cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjdXJTdHJQb3MgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5vcHRpb25zLnByZVN0cmluZ1R5cGVkKHNlbGYuYXJyYXlQb3MpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBzdGFydCB0eXBpbmcgZWFjaCBuZXcgY2hhciBpbnRvIGV4aXN0aW5nIHN0cmluZ1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gY3VyU3RyaW5nOiBhcmcsIHNlbGYuZWwuaHRtbDogb3JpZ2luYWwgdGV4dCBpbnNpZGUgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIG5leHRTdHJpbmcgPSBjdXJTdHJpbmcuc3Vic3RyKDAsIGN1clN0clBvcyArIDEpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuYXR0cikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmVsLmF0dHIoc2VsZi5hdHRyLCBuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLmlzSW5wdXQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmVsLnZhbChuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChzZWxmLmNvbnRlbnRUeXBlID09PSAnaHRtbCcpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmVsLmh0bWwobmV4dFN0cmluZyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5lbC50ZXh0KG5leHRTdHJpbmcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGFkZCBjaGFyYWN0ZXJzIG9uZSBieSBvbmVcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1clN0clBvcysrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gbG9vcCB0aGUgZnVuY3Rpb25cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYudHlwZXdyaXRlKGN1clN0cmluZywgY3VyU3RyUG9zKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZW5kIG9mIGNoYXJhY3RlciBwYXVzZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LCBjaGFyUGF1c2UpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGh1bWFuaXplZCB2YWx1ZSBmb3IgdHlwaW5nXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LCBodW1hbml6ZSk7XG5cdFx0XHRcdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdFx0XHRcdGJhY2tzcGFjZTogZnVuY3Rpb24gYmFja3NwYWNlKGN1clN0cmluZywgY3VyU3RyUG9zKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBleGl0IHdoZW4gc3RvcHBlZFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc3RvcCA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHZhcnlpbmcgdmFsdWVzIGZvciBzZXRUaW1lb3V0IGR1cmluZyB0eXBpbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGNhbid0IGJlIGdsb2JhbCBzaW5jZSBudW1iZXIgY2hhbmdlcyBlYWNoIHRpbWUgbG9vcCBpcyBleGVjdXRlZFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGh1bWFuaXplID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKDEwMCAtIDMwKSkgKyB0aGlzLmJhY2tTcGVlZDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gLS0tLS0gdGhpcyBwYXJ0IGlzIG9wdGlvbmFsIC0tLS0tIC8vXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGNoZWNrIHN0cmluZyBhcnJheSBwb3NpdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBvbiB0aGUgZmlyc3Qgc3RyaW5nLCBvbmx5IGRlbGV0ZSBvbmUgd29yZFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyB0aGUgc3RvcE51bSBhY3R1YWxseSByZXByZXNlbnRzIHRoZSBhbW91bnQgb2YgY2hhcnMgdG9cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8ga2VlcCBpbiB0aGUgY3VycmVudCBzdHJpbmcuIEluIG15IGNhc2UgaXQncyAxNC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaWYgKHNlbGYuYXJyYXlQb3MgPT0gMSl7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vICBzZWxmLnN0b3BOdW0gPSAxNDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gfVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvL2V2ZXJ5IG90aGVyIHRpbWUsIGRlbGV0ZSB0aGUgd2hvbGUgdHlwZWQgc3RyaW5nXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGVsc2V7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vICBzZWxmLnN0b3BOdW0gPSAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyB9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuY29udGVudFR5cGUgPT09ICdodG1sJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHNraXAgb3ZlciBodG1sIHRhZ3Mgd2hpbGUgYmFja3NwYWNpbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpLmNoYXJBdCgwKSA9PT0gJz4nKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgdGFnID0gJyc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR3aGlsZSAoY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MgLSAxKS5jaGFyQXQoMCkgIT09ICc8Jykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0YWcgLT0gY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpLmNoYXJBdCgwKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y3VyU3RyUG9zLS07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjdXJTdHJQb3MgPCAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1clN0clBvcy0tO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGFnICs9ICc8Jztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAtLS0tLSBjb250aW51ZSBpbXBvcnRhbnQgc3R1ZmYgLS0tLS0gLy9cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gcmVwbGFjZSB0ZXh0IHdpdGggYmFzZSB0ZXh0ICsgdHlwZWQgY2hhcmFjdGVyc1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgbmV4dFN0cmluZyA9IGN1clN0cmluZy5zdWJzdHIoMCwgY3VyU3RyUG9zKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuYXR0cikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuZWwuYXR0cihzZWxmLmF0dHIsIG5leHRTdHJpbmcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLmlzSW5wdXQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuZWwudmFsKG5leHRTdHJpbmcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoc2VsZi5jb250ZW50VHlwZSA9PT0gJ2h0bWwnKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmVsLmh0bWwobmV4dFN0cmluZyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuZWwudGV4dChuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpZiB0aGUgbnVtYmVyIChpZCBvZiBjaGFyYWN0ZXIgaW4gY3VycmVudCBzdHJpbmcpIGlzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGxlc3MgdGhhbiB0aGUgc3RvcCBudW1iZXIsIGtlZXAgZ29pbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGN1clN0clBvcyA+IHNlbGYuc3RvcE51bSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHN1YnRyYWN0IGNoYXJhY3RlcnMgb25lIGJ5IG9uZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1clN0clBvcy0tO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGxvb3AgdGhlIGZ1bmN0aW9uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5iYWNrc3BhY2UoY3VyU3RyaW5nLCBjdXJTdHJQb3MpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGlmIHRoZSBzdG9wIG51bWJlciBoYXMgYmVlbiByZWFjaGVkLCBpbmNyZWFzZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhcnJheSBwb3NpdGlvbiB0byBuZXh0IHN0cmluZ1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlIGlmIChjdXJTdHJQb3MgPD0gc2VsZi5zdG9wTnVtKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmFycmF5UG9zKys7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLmFycmF5UG9zID09PSBzZWxmLnN0cmluZ3MubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuYXJyYXlQb3MgPSAwO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFNodWZmbGUgc2VxdWVuY2UgYWdhaW5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuc2h1ZmZsZSkgc2VsZi5zZXF1ZW5jZSA9IHNlbGYuc2h1ZmZsZUFycmF5KHNlbGYuc2VxdWVuY2UpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuaW5pdCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHNlbGYudHlwZXdyaXRlKHNlbGYuc3RyaW5nc1tzZWxmLnNlcXVlbmNlW3NlbGYuYXJyYXlQb3NdXSwgY3VyU3RyUG9zKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHVtYW5pemVkIHZhbHVlIGZvciB0eXBpbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sIGh1bWFuaXplKTtcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdC8qKlxuICAgICAgICAgKiBTaHVmZmxlcyB0aGUgbnVtYmVycyBpbiB0aGUgZ2l2ZW4gYXJyYXkuXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5XG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICAgICAgICovXG5cdFx0XHRcdFx0XHRcdFx0c2h1ZmZsZUFycmF5OiBmdW5jdGlvbiBzaHVmZmxlQXJyYXkoYXJyYXkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciB0bXAsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgY3VycmVudCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgICB0b3AgPSBhcnJheS5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodG9wKSB3aGlsZSAoLS10b3ApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh0b3AgKyAxKSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRtcCA9IGFycmF5W2N1cnJlbnRdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhcnJheVtjdXJyZW50XSA9IGFycmF5W3RvcF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFycmF5W3RvcF0gPSB0bXA7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYXJyYXk7XG5cdFx0XHRcdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdFx0XHRcdC8vIFN0YXJ0ICYgU3RvcCBjdXJyZW50bHkgbm90IHdvcmtpbmdcblxuXHRcdFx0XHRcdFx0XHRcdC8vICwgc3RvcDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gICAgIHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0XHRcdFx0XHRcdC8vICAgICBzZWxmLnN0b3AgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdC8vICAgICBjbGVhckludGVydmFsKHNlbGYudGltZW91dCk7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gfVxuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gLCBzdGFydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gICAgIHZhciBzZWxmID0gdGhpcztcblx0XHRcdFx0XHRcdFx0XHQvLyAgICAgaWYoc2VsZi5zdG9wID09PSBmYWxzZSlcblx0XHRcdFx0XHRcdFx0XHQvLyAgICAgICAgcmV0dXJuO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gICAgIHRoaXMuc3RvcCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdC8vICAgICB0aGlzLmluaXQoKTtcblx0XHRcdFx0XHRcdFx0XHQvLyB9XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBSZXNldCBhbmQgcmVidWlsZCB0aGUgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lb3V0KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBpZCA9IHRoaXMuZWwuYXR0cignaWQnKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZWwuZW1wdHkoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgdGhpcy5jdXJzb3IgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuY3Vyc29yLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5zdHJQb3MgPSAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5hcnJheVBvcyA9IDA7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmN1ckxvb3AgPSAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU2VuZCB0aGUgY2FsbGJhY2tcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMub3B0aW9ucy5yZXNldENhbGxiYWNrKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0JC5mbi50eXBlZCA9IGZ1bmN0aW9uIChvcHRpb24pIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciAkdGhpcyA9ICQodGhpcyksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgZGF0YSA9ICR0aGlzLmRhdGEoJ3R5cGVkJyksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgb3B0aW9ucyA9ICh0eXBlb2Ygb3B0aW9uID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihvcHRpb24pKSA9PSAnb2JqZWN0JyAmJiBvcHRpb247XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhLnJlc2V0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQkdGhpcy5kYXRhKCd0eXBlZCcsIGRhdGEgPSBuZXcgVHlwZWQodGhpcywgb3B0aW9ucykpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdCQuZm4udHlwZWQuZGVmYXVsdHMgPSB7XG5cdFx0XHRcdFx0XHRcdFx0c3RyaW5nczogW1wiVGhlc2UgYXJlIHRoZSBkZWZhdWx0IHZhbHVlcy4uLlwiLCBcIllvdSBrbm93IHdoYXQgeW91IHNob3VsZCBkbz9cIiwgXCJVc2UgeW91ciBvd24hXCIsIFwiSGF2ZSBhIGdyZWF0IGRheSFcIl0sXG5cdFx0XHRcdFx0XHRcdFx0c3RyaW5nc0VsZW1lbnQ6IG51bGwsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gdHlwaW5nIHNwZWVkXG5cdFx0XHRcdFx0XHRcdFx0dHlwZVNwZWVkOiAwLFxuXHRcdFx0XHRcdFx0XHRcdC8vIHRpbWUgYmVmb3JlIHR5cGluZyBzdGFydHNcblx0XHRcdFx0XHRcdFx0XHRzdGFydERlbGF5OiAwLFxuXHRcdFx0XHRcdFx0XHRcdC8vIGJhY2tzcGFjaW5nIHNwZWVkXG5cdFx0XHRcdFx0XHRcdFx0YmFja1NwZWVkOiAwLFxuXHRcdFx0XHRcdFx0XHRcdC8vIHNodWZmbGUgdGhlIHN0cmluZ3Ncblx0XHRcdFx0XHRcdFx0XHRzaHVmZmxlOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XHQvLyB0aW1lIGJlZm9yZSBiYWNrc3BhY2luZ1xuXHRcdFx0XHRcdFx0XHRcdGJhY2tEZWxheTogNTAwLFxuXHRcdFx0XHRcdFx0XHRcdC8vIGxvb3Bcblx0XHRcdFx0XHRcdFx0XHRsb29wOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XHQvLyBmYWxzZSA9IGluZmluaXRlXG5cdFx0XHRcdFx0XHRcdFx0bG9vcENvdW50OiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XHQvLyBzaG93IGN1cnNvclxuXHRcdFx0XHRcdFx0XHRcdHNob3dDdXJzb3I6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gY2hhcmFjdGVyIGZvciBjdXJzb3Jcblx0XHRcdFx0XHRcdFx0XHRjdXJzb3JDaGFyOiBcInxcIixcblx0XHRcdFx0XHRcdFx0XHQvLyBhdHRyaWJ1dGUgdG8gdHlwZSAobnVsbCA9PSB0ZXh0KVxuXHRcdFx0XHRcdFx0XHRcdGF0dHI6IG51bGwsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gZWl0aGVyIGh0bWwgb3IgdGV4dFxuXHRcdFx0XHRcdFx0XHRcdGNvbnRlbnRUeXBlOiAnaHRtbCcsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gY2FsbCB3aGVuIGRvbmUgY2FsbGJhY2sgZnVuY3Rpb25cblx0XHRcdFx0XHRcdFx0XHRjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soKSB7fSxcblx0XHRcdFx0XHRcdFx0XHQvLyBzdGFydGluZyBjYWxsYmFjayBmdW5jdGlvbiBiZWZvcmUgZWFjaCBzdHJpbmdcblx0XHRcdFx0XHRcdFx0XHRwcmVTdHJpbmdUeXBlZDogZnVuY3Rpb24gcHJlU3RyaW5nVHlwZWQoKSB7fSxcblx0XHRcdFx0XHRcdFx0XHQvL2NhbGxiYWNrIGZvciBldmVyeSB0eXBlZCBzdHJpbmdcblx0XHRcdFx0XHRcdFx0XHRvblN0cmluZ1R5cGVkOiBmdW5jdGlvbiBvblN0cmluZ1R5cGVkKCkge30sXG5cdFx0XHRcdFx0XHRcdFx0Ly8gY2FsbGJhY2sgZm9yIHJlc2V0XG5cdFx0XHRcdFx0XHRcdFx0cmVzZXRDYWxsYmFjazogZnVuY3Rpb24gcmVzZXRDYWxsYmFjaygpIHt9XG5cdFx0XHRcdH07XG59KHdpbmRvdy5qUXVlcnkpOyIsIlxuXG5cdFxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdteUFwcCcsIFsndWkucm91dGVyJywgJ3VpLmJvb3RzdHJhcCcsICduZ0FuaW1hdGUnLCdhbmd1bGFyLXR5cGVkJ10pO1xuXG4vLyBhcHAucnVuKGZ1bmN0aW9uKGVkaXRhYmxlT3B0aW9ucykge1xuLy8gICAgIGVkaXRhYmxlT3B0aW9ucy50aGVtZSA9ICdiczMnOyAvLyBib290c3RyYXAzIHRoZW1lLiBDYW4gYmUgYWxzbyAnYnMyJywgJ2RlZmF1bHQnXG4vLyB9KTtcblxuYXBwLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsIGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgcmVxdWlyZUJhc2U6IGZhbHNlXG4gICAgfSk7XG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9cIik7XG59XSk7XG5cbmFwcC5kaXJlY3RpdmUoJ25hdmJhcicsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzdGF0ZSwgYXV0aEZhY3RvcnkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZToge30sXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnanMvbmF2QmFyL25hdmJhci5odG1sJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUpIHtcbiAgICAgICAgICAgIHNjb3BlLnNob3dMaW5rID0gZnVuY3Rpb24obGluaykge1xuICAgICAgICAgICAgICAgIHJldHVybiAhbGluay5pc0FkbWluICYmIChsaW5rLnN0YXRlID09PSAnYWRtaW4nIHx8IGxpbmsuc3RhdGUgPT09ICdsb2dpbicpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNjb3BlLmlzTG9nZ2VkSW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXV0aEZhY3RvcnkuaXNBZG1pbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzY29wZS5saW5rcyA9IFtcbiAgICAgICAgICAgICAgICB7IGxhYmVsOiAnSG9tZScsIHN0YXRlOiAnaG9tZScgfSxcbiAgICAgICAgICAgICAgICB7IGxhYmVsOiAnUHJvamVjdHMnLCBzdGF0ZTogJ3Byb2plY3RzJyB9LFxuICAgICAgICAgICAgICAgIHsgbGFiZWw6ICdBYm91dCBNZScsIHN0YXRlOiAnYWJvdXQnIH1cbiAgICAgICAgICAgICAgICAvLyB7IGxhYmVsOiAnRmVlZGJhY2snLCBzdGF0ZTogJ2NvbnRhY3QnIH0sXG4gICAgICAgICAgICAgICAgLy8geyBsYWJlbDogJ0FkbWluICcsIHN0YXRlOiAnYWRtaW4nLCBpc0FkbWluOiAhJHJvb3RTY29wZS5hZG1pbiB9LFxuICAgICAgICAgICAgICAgIC8vIHsgbGFiZWw6ICdBZG1pbmlzdHJhdG9yJywgc3RhdGU6ICdsb2dpbicsIGlzQWRtaW46ICRyb290U2NvcGUuYWRtaW4gfVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgfVxufSlcblxuXG5cbi8vIGFwcC5ydW4oZnVuY3Rpb24oJHJvb3RTY29wZSwgJHN0YXRlLCBhdXRoRmFjdG9yeSkge1xuLy8gICAgICRyb290U2NvcGUuYWRtaW4gPSBudWxsO1xuLy8gICAgICRyb290U2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3RhcnRcIiwgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGF1dGhGYWN0b3J5KSB7XG4vLyAgICAgICAgIGlmICh0b1N0YXRlLmF1dGhlbnRpY2F0ZSAmJiAhYXV0aEZhY3RvcnkuaXNBZG1pbigpKSB7XG4vLyAgICAgICAgICAgICAvLyBVc2VyIGlzbuKAmXQgYXV0aGVudGljYXRlZFxuLy8gICAgICAgICAgICAgJHN0YXRlLnRyYW5zaXRpb25UbyhcImhvbWVcIik7XG4vLyAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSk7XG4vLyB9KTtcblxuXG4iLCJhcHAuY29uZmlnKCRzdGF0ZVByb3ZpZGVyID0+IHtcbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnYWJvdXQnLCB7XG4gICAgICAgIHVybDogJy9hYm91dCcsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL2pzL2Fib3V0L2Fib3V0Lmh0bWwnLFxuICAgICAgICBhdXRoZW50aWNhdGU6IGZhbHNlXG4gICAgfSlcbn0pXG4iLCJhcHAuY29udHJvbGxlcignYWRtaW5Db250cm9sbGVyJywgKCRzY29wZSwgJHN0YXRlLCBhZG1pbkZhY3RvcnksIGFsbFByb2plY3RzLCBhdXRoRmFjdG9yeSkgPT4ge1xuXG4gICAgJHNjb3BlLnN1Ym1pdFByb2plY3QgPSBmdW5jdGlvbihwcm9qZWN0KSB7XG4gICAgICAgIGFkbWluRmFjdG9yeS5wb3N0UHJvamVjdChwcm9qZWN0KVxuICAgICAgICAkc2NvcGUucHJvamVjdCA9IG51bGw7XG4gICAgfVxuXG4gICAgJHNjb3BlLmFsbFByb2plY3RzID0gYWxsUHJvamVjdHMgfHwgW3sgaWQ6IDAsIG5hbWU6ICdlbXB0eScsIGRlcGxveTogJ2VtcHR5JywgZ2l0SHViOiBcImVtcHR5XCIgfV1cblxuICAgICRzY29wZS5kYXRhID0ge1xuICAgICAgICBhdmFpbGFibGVQcm9qZWN0czogJHNjb3BlLmFsbFByb2plY3RzLFxuICAgICAgICBzZWxlY3RlZFByb2plY3Q6IHsgaWQ6IDAsIG5hbWU6ICdlbXB0eScsIGRlcGxveTogJ2VtcHR5JywgZ2l0SHViOiAnZW1wdHknLCBkZXNjcmlwdGlvbjogXCJlbXB0eVwiIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuc2VsZWN0ZWRwcm9qZWN0Q2hhbmdlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuY3VycmVudFByb2plY3QgPSAkc2NvcGUuc2VsZWN0ZWRJdGVtO1xuICAgIH1cblxuICAgICRzY29wZS5sb2dPdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgYXV0aEZhY3RvcnkubG9nT3V0KClcbiAgICAgICAgJHN0YXRlLmdvKCdob21lJylcbiAgICB9XG59KVxuIiwiYXBwLmRpcmVjdGl2ZSgncHJvamVjdEVkaXQnLCBwcm9qZWN0RmFjdG9yeSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIHByb2plY3Q6ICc9cHJvamVjdCdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhZG1pbkVkaXQuaHRtbCdcbiAgICB9O1xufSk7XG4iLCJhcHAuZmFjdG9yeSgnYWRtaW5GYWN0b3J5JywgJGh0dHAgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIHBvc3RQcm9qZWN0OiBwcm9qZWN0ID0+IHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Byb2plY3QnLCBwcm9qZWN0KVxuICAgICAgICAgICAgICAgIC50aGVuKFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgpXG4gICAgICAgIH0sXG4gICAgICAgIGdldEFsbFByb2plY3RzOiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Byb2plY3QnKVxuICAgICAgICAgICAgICAgIC50aGVuKFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGFcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgpXG4gICAgICAgIH1cbiAgICB9XG59KVxuIiwiYXBwLmNvbmZpZygkc3RhdGVQcm92aWRlciA9PiB7XG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2FkbWluJywge1xuICAgICAgICB1cmw6ICcvYWRtaW4nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJy9qcy9hZG1pbi9hZG1pbi5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ2FkbWluQ29udHJvbGxlcicsXG4gICAgICAgIGF1dGhlbnRpY2F0ZTogdHJ1ZSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgYWxsUHJvamVjdHM6IGFkbWluRmFjdG9yeSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkbWluRmFjdG9yeS5nZXRBbGxQcm9qZWN0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn0pXG4iLCJhcHAuY29udHJvbGxlcignYXV0aENvbnRyb2xsZXInLCAoJHNjb3BlLCBhdXRoRmFjdG9yeSkgPT4ge1xuICAgICRzY29wZS5pc0FkbWluID0gYXV0aEZhY3RvcnkuaXNBZG1pbigpXG59KVxuIiwiYXBwLmZhY3RvcnkoJ2F1dGhGYWN0b3J5JywgKCRodHRwLCAkc3RhdGUsICRyb290U2NvcGUpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpc0FkbWluOiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gISEkcm9vdFNjb3BlLmFkbWluXG4gICAgICAgIH0sXG4gICAgICAgIGxvZ2luOiBsb2dpbkluZm8gPT4ge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9hdXRoZW50aWNhdGlvbi8nICsgbG9naW5JbmZvLm5hbWUgKyAnLycgKyBsb2dpbkluZm8ucGFzc3dvcmQpXG4gICAgICAgICAgICAgICAgLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uRGVjaXNpb24gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhdXRoZW50aWNhdGlvbkRlY2lzaW9uLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmFkbWluID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuYWRtaW4gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXV0aGVudGljYXRpb25EZWNpc2lvblxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgpXG4gICAgICAgIH0sXG4gICAgICAgIGxvZ091dDogKCkgPT4ge1xuICAgICAgICAgICAgJHJvb3RTY29wZS5hZG1pbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59KVxuIiwiYXBwLmNvbnRyb2xsZXIoJ2NvbnRhY3RDb250cm9sbGVyJywgKCRzY29wZSwgcG9zdHMsIGZlZWRCYWNrRmFjdG9yeSkgPT4ge1xuICAgICRzY29wZS5wb3N0cyA9IHBvc3RzO1xuICAgICRzY29wZS5nZXRSZXBsaWVzID0gZmVlZEJhY2tGYWN0b3J5LmdldFJlcGxpZXM7XG4gICAgJHNjb3BlLnBvc3RSZXBseSA9IChwb3N0SWQsIGNvbnRlbnQpID0+IHtcbiAgICAgICAgbGV0IHJlcGx5SW5mbyA9IHsgcG9zdElkLCBjb250ZW50IH1cbiAgICAgICAgZmVlZEJhY2tGYWN0b3J5LnBvc3RSZXBsWShyZXBseUluZm8pXG4gICAgfVxuXG4gICAgJHNjb3BlLnN1Ym1pdEZvcm0gPSBkYXRhID0+IHtcbiAgICAgICAgZmVlZEJhY2tGYWN0b3J5LnBvc3RDb21tZW50KGRhdGEpXG4gICAgICAgICAgICAudGhlbihcbiAgICAgICAgICAgICAgICBuZXdQb3N0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RzWyRzY29wZS5wb3N0cy5sZW5ndGhdID0gbmV3UG9zdFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKVxuICAgICAgICAkc2NvcGUudXNlciA9IG51bGxcbiAgICAgICAgJHNjb3BlLnVzZXJGb3JtLiRzZXRQcmlzdGluZSh0cnVlKVxuICAgIH1cblxuICAgICRzY29wZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUudXNlciA9IG51bGxcbiAgICAgICAgJHNjb3BlLnVzZXJGb3JtLiRzZXRQcmlzdGluZSh0cnVlKVxuICAgIH1cblxuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCRzY29wZS5tZXNzYWdlICYmICRzY29wZS5lbWFpbCAmJiAkc2NvcGUubmFtZSkge1xuICAgICAgICAgICAgY29udHJvbGxlckZhY3Rvcnkuc2VuZE1lc3NhZ2UoJHNjb3BlLm5hbWUsICRzY29wZS5lbWFpbCwgJHNjb3BlLm1lc3NhZ2UpXG4gICAgICAgIH1cbiAgICB9XG59KVxuIiwiYXBwLmRpcmVjdGl2ZSgncmVwbGllcycsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdwb3N0IGRpcmVjdGl2ZScpXG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgcG9zdDogXCI9XCJcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9jb250YWN0L3RlbXBsYXRlL3JlcGx5Vmlldy5odG1sJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcblxuICAgICAgICAgICAgICAgIHNjb3BlLnJlcGxpZXMgPSBbXG4gICAgICAgICAgICAgICAgeyBsYWJlbDogJ0hvbWUnLCBzdGF0ZTogJ2hvbWUnIH0sXG4gICAgICAgICAgICAgICAgeyBsYWJlbDogJ1Byb2plY3RzJywgc3RhdGU6ICdwcm9qZWN0cycgfSxcbiAgICAgICAgICAgICAgICB7IGxhYmVsOiAnQWJvdXQgTWUnLCBzdGF0ZTogJ2Fib3V0JyB9LFxuICAgICAgICAgICAgICAgIHsgbGFiZWw6ICdDb250YWN0IE1lJywgc3RhdGU6ICdjb250YWN0JyB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICB9XG59KVxuIiwiYXBwLmZhY3RvcnkoJ2ZlZWRCYWNrRmFjdG9yeScsIGZ1bmN0aW9uKCRodHRwKSB7XG5cbiAgICBjb25zb2xlLmxvZyhcIkluIHRoZSBmZWViYWNrIGZhY3RvcnlcIilcbiAgICB2YXIgZmVlZEJhY2tGYWN0b3J5ID0ge31cbiAgICBmZWVkQmFja0ZhY3RvcnkuZ2V0UG9zdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jb21tZW50JylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldHRpbmcgY29tbWVudHMnKVxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKClcbiAgICB9XG4gICAgZmVlZEJhY2tGYWN0b3J5LnBvc3RDb21tZW50ID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICBjb25zb2xlLmxvZygnUG9zdGluZyBjb21tZW50JylcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tbWVudCcsIGNvbnRlbnQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihzdWNjZXNmdWxDb21tZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coc3VjY2VzZnVsQ29tbWVudClcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VjY2VzZnVsQ29tbWVudC5kYXRhXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKClcbiAgICB9XG4gICAgZmVlZEJhY2tGYWN0b3J5LmdldFJlcGxpZXMgPSBmdW5jdGlvbihjb21tZW50SWQpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9yZXBseS8nICsgY29tbWVudElkKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVwbGllcykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnb3QgY29tbWVudHMnKVxuICAgICAgICAgICAgICAgIHJldHVybiByZXBsaWVzLmRhdGFcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKVxuICAgIH1cbiAgICBmZWVkQmFja0ZhY3RvcnkucG9zdFJlcGxZID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICBjb25zb2xlLmxvZygncnVubmluZyBwb3N0IHJlcGx5JywgbWVzc2FnZSlcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcmVwbHkvJywge3Bvc3RfaWQ6cGFyc2VJbnQobWVzc2FnZS5wb3N0SWQucG9zdElkKSAsY29udGVudDptZXNzYWdlLmNvbnRlbnQuY29udGVudH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihwb3N0ZWRDb21tZW50KXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9zdGVkQ29tbWVudC5kYXRhXG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBmZWVkQmFja0ZhY3RvcnlcblxufSlcbiIsImFwcC5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnY29udGFjdCcsIHtcbiAgICAgICAgdXJsOiAnL2NvbnRhY3QnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJy9qcy9jb250YWN0L2NvbnRhY3QuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdjb250YWN0Q29udHJvbGxlcicsXG4gICAgICAgIGF1dGhlbnRpY2F0ZTogZmFsc2UsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgIHBvc3RzOiBmdW5jdGlvbihmZWVkQmFja0ZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaW52b2tpbmcgZmVlZEJhY2tGYWN0b3J5JylcbiAgICAgICAgICAgICAgICByZXR1cm4gZmVlZEJhY2tGYWN0b3J5LmdldFBvc3RzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxufSlcbiIsImNvbnNvbGUubG9nKCdiYXIgY3RybCBsb2FkZWQnKVxuXG5hcHAuY29udHJvbGxlcihcIkJhckN0cmxcIiwgZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCkge1xuXG5cdCAgICAkc2NvcGUudGltZUluTXMgPSAwO1xuXG4gICAgdmFyIGNvdW50VXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnRpbWVJbk1zKz0gNTAwO1xuICAgICAgICAkdGltZW91dChjb3VudFVwLCA1MDApO1xuICAgIH1cblxuICAgICR0aW1lb3V0KGNvdW50VXAsIDUwMCk7XG5cbn0pO1xuIiwiYXBwLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlcikge1xuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdob21lJywge1xuICAgICAgICB1cmw6ICcvJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICcvanMvaG9tZS9ob21lLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnQmFyQ3RybCcsXG4gICAgICAgIGF1dGhlbnRpY2F0ZTogZmFsc2VcbiAgICB9KVxufSlcbiIsImFwcC5jb250cm9sbGVyKCdsb2dpbkNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgYXV0aEZhY3RvcnksICRsb2NhdGlvbikge1xuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbG9naW5JbmZvID0geyBuYW1lOiAkc2NvcGUudXNlcm5hbWUsIHBhc3N3b3JkOiAkc2NvcGUucGFzc3dvcmQgfVxuICAgICAgICBhdXRoRmFjdG9yeS5sb2dpbihsb2dpbkluZm8pXG4gICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnLCB7fSwgeyByZWxvYWQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKCk7XG5cblxuICAgIH1cbn0pXG4iLCJhcHAuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJy9qcy9sb2dpbi9sb2dpbi5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlcicsXG4gICAgICAgIGF1dGhlbnRpY2F0ZTogZmFsc2VcbiAgICB9KVxufSlcbiIsImFwcC5jb250cm9sbGVyKCdwcm9qZWN0Q29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgYWxsUHJvamVjdHMpIHtcbiAgICAkc2NvcGUucHJvamVjdHMgPSBhbGxQcm9qZWN0c1xufSlcblxuYXBwLmNvbnRyb2xsZXIoJ3NpbmdsZVByb2plY3RDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCBwcm9qZWN0RmFjdG9yeSwgY3VycmVudFByb2plY3QsICRzY2UpIHtcbiAgICAkc2NvcGUuY3VycmVudFByb2plY3QgPSBjdXJyZW50UHJvamVjdDtcblxuICAgICRzY29wZS50cnVzdFNyYyA9IGZ1bmN0aW9uKHNyYykge1xuICAgICAgICByZXR1cm4gJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwoc3JjKTtcbiAgICB9XG5cbiAgICAkc2NvcGUubW92aWUgPSB7IHNyYzogJHNjb3BlLmN1cnJlbnRQcm9qZWN0LnZpZGVvTGluayB9XG5cbiAgICAkc2NvcGUuaGFzVmlkZW9MaW5rID0gZnVuY3Rpb24gaGFzVmlkZW9MaW5rKCkge1xuICAgICAgICByZXR1cm4gISFjdXJyZW50UHJvamVjdC52aWRlb0xpbmtcbiAgICB9XG59KVxuIiwiYXBwLmRpcmVjdGl2ZSgncHJvamVjdFRpbGUnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogXCJFXCIsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBwcm9qZWN0OiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9wcm9qZWN0cy9zaW5nbGVQcm9qZWN0L3NpbmdsZVByb2plY3RUaWxlLmh0bWwnXG4gICAgfVxufSk7XG4iLCJhcHAuZmFjdG9yeSgncHJvamVjdEZhY3RvcnknLCBmdW5jdGlvbigkaHR0cCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldEFsbFByb2plY3RzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcHJvamVjdCcpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGFcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgpXG4gICAgICAgIH0sXG4gICAgICAgIGdldFNpbmdsZVByb2plY3Q6IGZ1bmN0aW9uKHByb2plY3RJRCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9wcm9qZWN0LycgKyBwcm9qZWN0SUQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGFcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgpXG4gICAgICAgIH0sXG4gICAgICAgIHBvc3RQcm9qZWN0OiBmdW5jdGlvbihwcm9qZWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wcm9qZWN0JywgcHJvamVjdClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKClcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlUHJvamVjdDogZnVuY3Rpb24odXBkYXRlZFByb2plY3QpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wdXQoJ2FwaS9wcm9qZWN0JywgdXBkYXRlZFByb2plY3QpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGFcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgpXG4gICAgICAgIH1cbiAgICB9XG59KVxuIiwiYXBwLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlcikge1xuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdwcm9qZWN0cycsIHtcbiAgICAgICAgdXJsOiAnL3Byb2plY3RzJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICcvanMvcHJvamVjdHMvcHJvamVjdHMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdwcm9qZWN0Q29udHJvbGxlcicsXG4gICAgICAgIGF1dGhlbnRpY2F0ZTogZmFsc2UsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgIGFsbFByb2plY3RzOiBmdW5jdGlvbihwcm9qZWN0RmFjdG9yeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9qZWN0RmFjdG9yeS5nZXRBbGxQcm9qZWN0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcblxuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdzaW5nbGVQcm9qZWN0Jywge1xuICAgICAgICB1cmw6ICcvcHJvamVjdHMvOmlkJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICcvanMvcHJvamVjdHMvc2luZ2xlUHJvamVjdC9zaW5nbGVQcm9qZWN0Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnc2luZ2xlUHJvamVjdENvbnRyb2xsZXInLFxuICAgICAgICBhdXRoZW50aWNhdGU6IGZhbHNlLFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICBjdXJyZW50UHJvamVjdDogZnVuY3Rpb24ocHJvamVjdEZhY3RvcnksICRzdGF0ZVBhcmFtcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9qZWN0RmFjdG9yeS5nZXRTaW5nbGVQcm9qZWN0KCRzdGF0ZVBhcmFtcy5pZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufSlcbiIsIihmdW5jdGlvbiAoKSB7XG5cblx0Y29uc29sZS5sb2coJ2FiLlR5cGVpdCBhYm91dCB0bycpXG5cdGFuZ3VsYXIubW9kdWxlKCdhYi5UeXBlaXQnLCBbXSkuZGlyZWN0aXZlKCdhYlR5cGVpdCcsIGZ1bmN0aW9uKCkge1xuXHRcdGNvbmVvbGUubG9nKCdydW5uaW5nIHRoZSB3cmFwcGVyJylcblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdBJyxcblx0XHRcdHNjb3BlOiB7XG5cdFx0XHRcdHR5cGVpdFN0cmluZ3M6ICc9YWJUeXBlaXQnLFxuXHRcdFx0XHR0eXBlaXRMb29wOiAnPScsXG5cdFx0XHRcdHR5cGVpdExvb3BEZWxheTogJz0nLFxuXHRcdFx0XHR0eXBlaXRCcmVha0xpbmVzOiAnPScsXG5cdFx0XHRcdHR5cGVpdFNwZWVkOiAnPScsXG5cdFx0XHRcdHR5cGVpdExpZmVMaWtlOiAnPScsXG5cdFx0XHRcdHR5cGVpdEN1cnNvcjogJz0nLFxuXHRcdFx0XHR0eXBlaXRDdXJzb3JTcGVlZDogJz0nLFxuXHRcdFx0XHR0eXBlaXRTdGFydERlbGF5OiAnPScsXG5cdFx0XHRcdHR5cGVpdEJyZWFrRGVsYXk6ICc9J1xuXHRcdFx0fSxcblx0XHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMpIHtcblx0XHRcdFx0dmFyIHR5cGVJdEVsZW1lbnQgPSAkKCRlbGVtZW50KTtcblxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHR5cGVJdEVsZW1lbnQudHlwZUl0KHtcblx0XHRcdFx0XHRcdHN0cmluZ3M6ICRzY29wZS50eXBlaXRTdHJpbmdzLFxuXHRcdFx0XHRcdFx0bG9vcDogJHNjb3BlLnR5cGVpdExvb3AsXG5cdFx0XHRcdFx0XHRsb29wRGVsYXk6ICRzY29wZS50eXBlaXRMb29wRGVsYXksXG5cdFx0XHRcdFx0XHRicmVha0xpbmVzOiAkc2NvcGUudHlwZWl0QnJlYWtMaW5lcyxcblx0XHRcdFx0XHRcdHNwZWVkOiAkc2NvcGUudHlwZWl0U3BlZWQsXG5cdFx0XHRcdFx0XHRsaWZlTGlrZTogJHNjb3BlLnR5cGVpdExpZmVMaWtlLFxuXHRcdFx0XHRcdFx0Y3Vyc29yOiAkc2NvcGUudHlwZWl0Q3Vyc29yLFxuXHRcdFx0XHRcdFx0Y3Vyc29yU3BlZWQ6ICRzY29wZS50eXBlaXRDdXJzb3JTcGVlZCxcblx0XHRcdFx0XHRcdHN0YXJ0RGVsYXk6ICRzY29wZS50eXBlaXRTdGFydERlbGF5LFxuXHRcdFx0XHRcdFx0YnJlYWtEZWxheTogJHNjb3BlLnR5cGVpdEJyZWFrRGVsYXlcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ09IIE5PISBhbmd1bGFyLXR5cGVpdCByZXF1aXJlcyB0eXBlaXQuanMgb24geW91ciBwYWdlIC0gZG8geW91IGhhdmUgaXQgbG9hZGVkPycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fSk7XG59KSgpOyIsIlxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAkKFwiLmRldmVsb3BlclwiKVxuICAgICAgLnR5cGVkKHtcbiAgICAgICAgc3RyaW5nczogW1wiRnJvbnQtZW5kXCIsIFwiQmFjay1lbmRcIiwgXCJGdWxsc3RhY2tcIiwgXCJTb2Z0d2FyZVwiLFwiSmF2YVNjcmlwdFwiLFwiQW5ndWxhckpTXCIsXCJVSS9VWFwiXSxcbiAgICAgICAgdHlwZVNwZWVkOiAyNTAsXG4gICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgIGN1cnNvclNwZWVkOjEwMCxcbiAgICAgICAgbGlmZUxpa2U6IHRydWUsXG4gICAgICAgIGN1cnNlcjogdHJ1ZSxcbiAgICAgICAgZGVsZXRlU3BlZWQ6IDEwMDBcbiAgICAgIH0pO1xuICB9OyIsIlxuLy8gR3JhYiBub2RlIHBhY2thZ2VzXG52YXIgZ3VscCA9IHJlcXVpcmUoJ2d1bHAnKVxuICAgIHJlbmFtZSA9IHJlcXVpcmUoJ2d1bHAtcmVuYW1lJylcbiAgICB1Z2xpZnkgPSByZXF1aXJlKCdndWxwLXVnbGlmeScpO1xuXG4gXG5ndWxwLnRhc2soJ2NvbXByZXNzJywgZnVuY3Rpb24oKSB7XG4gIGd1bHAuc3JjKCdqcy8qLmpzJylcbiAgICAucGlwZSh1Z2xpZnkoKSlcbiAgICAucGlwZShyZW5hbWUoJ3R5cGVkLm1pbi5qcycpKVxuICAgIC5waXBlKGd1bHAuZGVzdCgnZGlzdCcpKVxufSk7XG5cbi8vIERlZmF1bHQgVGFza1xuZ3VscC50YXNrKCdkZWZhdWx0JywgWydjb21wcmVzcyddKTtcbiIsIiFmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgcz1mdW5jdGlvbihzLGUpe3RoaXMuZWw9dChzKSx0aGlzLm9wdGlvbnM9dC5leHRlbmQoe30sdC5mbi50eXBlZC5kZWZhdWx0cyxlKSx0aGlzLmlzSW5wdXQ9dGhpcy5lbC5pcyhcImlucHV0XCIpLHRoaXMuYXR0cj10aGlzLm9wdGlvbnMuYXR0cix0aGlzLnNob3dDdXJzb3I9dGhpcy5pc0lucHV0PyExOnRoaXMub3B0aW9ucy5zaG93Q3Vyc29yLHRoaXMuZWxDb250ZW50PXRoaXMuYXR0cj90aGlzLmVsLmF0dHIodGhpcy5hdHRyKTp0aGlzLmVsLnRleHQoKSx0aGlzLmNvbnRlbnRUeXBlPXRoaXMub3B0aW9ucy5jb250ZW50VHlwZSx0aGlzLnR5cGVTcGVlZD10aGlzLm9wdGlvbnMudHlwZVNwZWVkLHRoaXMuc3RhcnREZWxheT10aGlzLm9wdGlvbnMuc3RhcnREZWxheSx0aGlzLmJhY2tTcGVlZD10aGlzLm9wdGlvbnMuYmFja1NwZWVkLHRoaXMuYmFja0RlbGF5PXRoaXMub3B0aW9ucy5iYWNrRGVsYXksdGhpcy5zdHJpbmdzRWxlbWVudD10aGlzLm9wdGlvbnMuc3RyaW5nc0VsZW1lbnQsdGhpcy5zdHJpbmdzPXRoaXMub3B0aW9ucy5zdHJpbmdzLHRoaXMuc3RyUG9zPTAsdGhpcy5hcnJheVBvcz0wLHRoaXMuc3RvcE51bT0wLHRoaXMubG9vcD10aGlzLm9wdGlvbnMubG9vcCx0aGlzLmxvb3BDb3VudD10aGlzLm9wdGlvbnMubG9vcENvdW50LHRoaXMuY3VyTG9vcD0wLHRoaXMuc3RvcD0hMSx0aGlzLmN1cnNvckNoYXI9dGhpcy5vcHRpb25zLmN1cnNvckNoYXIsdGhpcy5zaHVmZmxlPXRoaXMub3B0aW9ucy5zaHVmZmxlLHRoaXMuc2VxdWVuY2U9W10sdGhpcy5idWlsZCgpfTtzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6cyxpbml0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2Zvcih2YXIgcz0wO3M8dC5zdHJpbmdzLmxlbmd0aDsrK3MpdC5zZXF1ZW5jZVtzXT1zO3Quc2h1ZmZsZSYmKHQuc2VxdWVuY2U9dC5zaHVmZmxlQXJyYXkodC5zZXF1ZW5jZSkpLHQudHlwZXdyaXRlKHQuc3RyaW5nc1t0LnNlcXVlbmNlW3QuYXJyYXlQb3NdXSx0LnN0clBvcyl9LHQuc3RhcnREZWxheSl9LGJ1aWxkOmZ1bmN0aW9uKCl7dmFyIHM9dGhpcztpZih0aGlzLnNob3dDdXJzb3I9PT0hMCYmKHRoaXMuY3Vyc29yPXQoJzxzcGFuIGNsYXNzPVwidHlwZWQtY3Vyc29yXCI+Jyt0aGlzLmN1cnNvckNoYXIrXCI8L3NwYW4+XCIpLHRoaXMuZWwuYWZ0ZXIodGhpcy5jdXJzb3IpKSx0aGlzLnN0cmluZ3NFbGVtZW50KXt0aGlzLnN0cmluZ3M9W10sdGhpcy5zdHJpbmdzRWxlbWVudC5oaWRlKCksY29uc29sZS5sb2codGhpcy5zdHJpbmdzRWxlbWVudC5jaGlsZHJlbigpKTt2YXIgZT10aGlzLnN0cmluZ3NFbGVtZW50LmNoaWxkcmVuKCk7dC5lYWNoKGUsZnVuY3Rpb24oZSxpKXtzLnN0cmluZ3MucHVzaCh0KGkpLmh0bWwoKSl9KX10aGlzLmluaXQoKX0sdHlwZXdyaXRlOmZ1bmN0aW9uKHQscyl7aWYodGhpcy5zdG9wIT09ITApe3ZhciBlPU1hdGgucm91bmQoNzAqTWF0aC5yYW5kb20oKSkrdGhpcy50eXBlU3BlZWQsaT10aGlzO2kudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGU9MCxyPXQuc3Vic3RyKHMpO2lmKFwiXlwiPT09ci5jaGFyQXQoMCkpe3ZhciBvPTE7L15cXF5cXGQrLy50ZXN0KHIpJiYocj0vXFxkKy8uZXhlYyhyKVswXSxvKz1yLmxlbmd0aCxlPXBhcnNlSW50KHIpKSx0PXQuc3Vic3RyaW5nKDAscykrdC5zdWJzdHJpbmcocytvKX1pZihcImh0bWxcIj09PWkuY29udGVudFR5cGUpe3ZhciBuPXQuc3Vic3RyKHMpLmNoYXJBdCgwKTtpZihcIjxcIj09PW58fFwiJlwiPT09bil7dmFyIGE9XCJcIixoPVwiXCI7Zm9yKGg9XCI8XCI9PT1uP1wiPlwiOlwiO1wiO3Quc3Vic3RyKHMrMSkuY2hhckF0KDApIT09aCYmKGErPXQuc3Vic3RyKHMpLmNoYXJBdCgwKSxzKyssIShzKzE+dC5sZW5ndGgpKTspO3MrKyxhKz1ofX1pLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2lmKHM9PT10Lmxlbmd0aCl7aWYoaS5vcHRpb25zLm9uU3RyaW5nVHlwZWQoaS5hcnJheVBvcyksaS5hcnJheVBvcz09PWkuc3RyaW5ncy5sZW5ndGgtMSYmKGkub3B0aW9ucy5jYWxsYmFjaygpLGkuY3VyTG9vcCsrLGkubG9vcD09PSExfHxpLmN1ckxvb3A9PT1pLmxvb3BDb3VudCkpcmV0dXJuO2kudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5iYWNrc3BhY2UodCxzKX0saS5iYWNrRGVsYXkpfWVsc2V7MD09PXMmJmkub3B0aW9ucy5wcmVTdHJpbmdUeXBlZChpLmFycmF5UG9zKTt2YXIgZT10LnN1YnN0cigwLHMrMSk7aS5hdHRyP2kuZWwuYXR0cihpLmF0dHIsZSk6aS5pc0lucHV0P2kuZWwudmFsKGUpOlwiaHRtbFwiPT09aS5jb250ZW50VHlwZT9pLmVsLmh0bWwoZSk6aS5lbC50ZXh0KGUpLHMrKyxpLnR5cGV3cml0ZSh0LHMpfX0sZSl9LGUpfX0sYmFja3NwYWNlOmZ1bmN0aW9uKHQscyl7aWYodGhpcy5zdG9wIT09ITApe3ZhciBlPU1hdGgucm91bmQoNzAqTWF0aC5yYW5kb20oKSkrdGhpcy5iYWNrU3BlZWQsaT10aGlzO2kudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoXCJodG1sXCI9PT1pLmNvbnRlbnRUeXBlJiZcIj5cIj09PXQuc3Vic3RyKHMpLmNoYXJBdCgwKSl7Zm9yKHZhciBlPVwiXCI7XCI8XCIhPT10LnN1YnN0cihzLTEpLmNoYXJBdCgwKSYmKGUtPXQuc3Vic3RyKHMpLmNoYXJBdCgwKSxzLS0sISgwPnMpKTspO3MtLSxlKz1cIjxcIn12YXIgcj10LnN1YnN0cigwLHMpO2kuYXR0cj9pLmVsLmF0dHIoaS5hdHRyLHIpOmkuaXNJbnB1dD9pLmVsLnZhbChyKTpcImh0bWxcIj09PWkuY29udGVudFR5cGU/aS5lbC5odG1sKHIpOmkuZWwudGV4dChyKSxzPmkuc3RvcE51bT8ocy0tLGkuYmFja3NwYWNlKHQscykpOnM8PWkuc3RvcE51bSYmKGkuYXJyYXlQb3MrKyxpLmFycmF5UG9zPT09aS5zdHJpbmdzLmxlbmd0aD8oaS5hcnJheVBvcz0wLGkuc2h1ZmZsZSYmKGkuc2VxdWVuY2U9aS5zaHVmZmxlQXJyYXkoaS5zZXF1ZW5jZSkpLGkuaW5pdCgpKTppLnR5cGV3cml0ZShpLnN0cmluZ3NbaS5zZXF1ZW5jZVtpLmFycmF5UG9zXV0scykpfSxlKX19LHNodWZmbGVBcnJheTpmdW5jdGlvbih0KXt2YXIgcyxlLGk9dC5sZW5ndGg7aWYoaSlmb3IoOy0taTspZT1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGkrMSkpLHM9dFtlXSx0W2VdPXRbaV0sdFtpXT1zO3JldHVybiB0fSxyZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7Y2xlYXJJbnRlcnZhbCh0LnRpbWVvdXQpO3RoaXMuZWwuYXR0cihcImlkXCIpO3RoaXMuZWwuZW1wdHkoKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgdGhpcy5jdXJzb3ImJnRoaXMuY3Vyc29yLnJlbW92ZSgpLHRoaXMuc3RyUG9zPTAsdGhpcy5hcnJheVBvcz0wLHRoaXMuY3VyTG9vcD0wLHRoaXMub3B0aW9ucy5yZXNldENhbGxiYWNrKCl9fSx0LmZuLnR5cGVkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaT10KHRoaXMpLHI9aS5kYXRhKFwidHlwZWRcIiksbz1cIm9iamVjdFwiPT10eXBlb2YgZSYmZTtyJiZyLnJlc2V0KCksaS5kYXRhKFwidHlwZWRcIixyPW5ldyBzKHRoaXMsbykpLFwic3RyaW5nXCI9PXR5cGVvZiBlJiZyW2VdKCl9KX0sdC5mbi50eXBlZC5kZWZhdWx0cz17c3RyaW5nczpbXCJUaGVzZSBhcmUgdGhlIGRlZmF1bHQgdmFsdWVzLi4uXCIsXCJZb3Uga25vdyB3aGF0IHlvdSBzaG91bGQgZG8/XCIsXCJVc2UgeW91ciBvd24hXCIsXCJIYXZlIGEgZ3JlYXQgZGF5IVwiXSxzdHJpbmdzRWxlbWVudDpudWxsLHR5cGVTcGVlZDowLHN0YXJ0RGVsYXk6MCxiYWNrU3BlZWQ6MCxzaHVmZmxlOiExLGJhY2tEZWxheTo1MDAsbG9vcDohMSxsb29wQ291bnQ6ITEsc2hvd0N1cnNvcjohMCxjdXJzb3JDaGFyOlwifFwiLGF0dHI6bnVsbCxjb250ZW50VHlwZTpcImh0bWxcIixjYWxsYmFjazpmdW5jdGlvbigpe30scHJlU3RyaW5nVHlwZWQ6ZnVuY3Rpb24oKXt9LG9uU3RyaW5nVHlwZWQ6ZnVuY3Rpb24oKXt9LHJlc2V0Q2FsbGJhY2s6ZnVuY3Rpb24oKXt9fX0od2luZG93LmpRdWVyeSk7IiwiLy8gVGhlIE1JVCBMaWNlbnNlIChNSVQpXG5cbi8vIFR5cGVkLmpzIHwgQ29weXJpZ2h0IChjKSAyMDE2IE1hdHQgQm9sZHQgfCB3d3cubWF0dGJvbGR0LmNvbVxuXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG5cblxuXG5cbiEgZnVuY3Rpb24oJCkge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBUeXBlZCA9IGZ1bmN0aW9uKGVsLCBvcHRpb25zKSB7XG5cblx0XHQvLyBjaG9zZW4gZWxlbWVudCB0byBtYW5pcHVsYXRlIHRleHRcblx0XHR0aGlzLmVsID0gJChlbCk7XG5cblx0XHQvLyBvcHRpb25zXG5cdFx0dGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sICQuZm4udHlwZWQuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG5cdFx0Ly8gYXR0cmlidXRlIHRvIHR5cGUgaW50b1xuXHRcdHRoaXMuaXNJbnB1dCA9IHRoaXMuZWwuaXMoJ2lucHV0Jyk7XG5cdFx0dGhpcy5hdHRyID0gdGhpcy5vcHRpb25zLmF0dHI7XG5cblx0XHQvLyBzaG93IGN1cnNvclxuXHRcdHRoaXMuc2hvd0N1cnNvciA9IHRoaXMuaXNJbnB1dCA/IGZhbHNlIDogdGhpcy5vcHRpb25zLnNob3dDdXJzb3I7XG5cblx0XHQvLyB0ZXh0IGNvbnRlbnQgb2YgZWxlbWVudFxuXHRcdHRoaXMuZWxDb250ZW50ID0gdGhpcy5hdHRyID8gdGhpcy5lbC5hdHRyKHRoaXMuYXR0cikgOiB0aGlzLmVsLnRleHQoKTtcblxuXHRcdC8vIGh0bWwgb3IgcGxhaW4gdGV4dFxuXHRcdHRoaXMuY29udGVudFR5cGUgPSB0aGlzLm9wdGlvbnMuY29udGVudFR5cGU7XG5cblx0XHQvLyB0eXBpbmcgc3BlZWRcblx0XHR0aGlzLnR5cGVTcGVlZCA9IHRoaXMub3B0aW9ucy50eXBlU3BlZWQ7XG5cblx0XHQvLyBhZGQgYSBkZWxheSBiZWZvcmUgdHlwaW5nIHN0YXJ0c1xuXHRcdHRoaXMuc3RhcnREZWxheSA9IHRoaXMub3B0aW9ucy5zdGFydERlbGF5O1xuXG5cdFx0Ly8gYmFja3NwYWNpbmcgc3BlZWRcblx0XHR0aGlzLmJhY2tTcGVlZCA9IHRoaXMub3B0aW9ucy5iYWNrU3BlZWQ7XG5cblx0XHQvLyBhbW91bnQgb2YgdGltZSB0byB3YWl0IGJlZm9yZSBiYWNrc3BhY2luZ1xuXHRcdHRoaXMuYmFja0RlbGF5ID0gdGhpcy5vcHRpb25zLmJhY2tEZWxheTtcblxuXHRcdC8vIGRpdiBjb250YWluaW5nIHN0cmluZ3Ncblx0XHR0aGlzLnN0cmluZ3NFbGVtZW50ID0gdGhpcy5vcHRpb25zLnN0cmluZ3NFbGVtZW50O1xuXG5cdFx0Ly8gaW5wdXQgc3RyaW5ncyBvZiB0ZXh0XG5cdFx0dGhpcy5zdHJpbmdzID0gdGhpcy5vcHRpb25zLnN0cmluZ3M7XG5cblx0XHQvLyBjaGFyYWN0ZXIgbnVtYmVyIHBvc2l0aW9uIG9mIGN1cnJlbnQgc3RyaW5nXG5cdFx0dGhpcy5zdHJQb3MgPSAwO1xuXG5cdFx0Ly8gY3VycmVudCBhcnJheSBwb3NpdGlvblxuXHRcdHRoaXMuYXJyYXlQb3MgPSAwO1xuXG5cdFx0Ly8gbnVtYmVyIHRvIHN0b3AgYmFja3NwYWNpbmcgb24uXG5cdFx0Ly8gZGVmYXVsdCAwLCBjYW4gY2hhbmdlIGRlcGVuZGluZyBvbiBob3cgbWFueSBjaGFyc1xuXHRcdC8vIHlvdSB3YW50IHRvIHJlbW92ZSBhdCB0aGUgdGltZVxuXHRcdHRoaXMuc3RvcE51bSA9IDA7XG5cblx0XHQvLyBMb29waW5nIGxvZ2ljXG5cdFx0dGhpcy5sb29wID0gdGhpcy5vcHRpb25zLmxvb3A7XG5cdFx0dGhpcy5sb29wQ291bnQgPSB0aGlzLm9wdGlvbnMubG9vcENvdW50O1xuXHRcdHRoaXMuY3VyTG9vcCA9IDA7XG5cblx0XHQvLyBmb3Igc3RvcHBpbmdcblx0XHR0aGlzLnN0b3AgPSBmYWxzZTtcblxuXHRcdC8vIGN1c3RvbSBjdXJzb3Jcblx0XHR0aGlzLmN1cnNvckNoYXIgPSB0aGlzLm9wdGlvbnMuY3Vyc29yQ2hhcjtcblxuXHRcdC8vIHNodWZmbGUgdGhlIHN0cmluZ3Ncblx0XHR0aGlzLnNodWZmbGUgPSB0aGlzLm9wdGlvbnMuc2h1ZmZsZTtcblx0XHQvLyB0aGUgb3JkZXIgb2Ygc3RyaW5nc1xuXHRcdHRoaXMuc2VxdWVuY2UgPSBbXTtcblxuXHRcdC8vIEFsbCBzeXN0ZW1zIGdvIVxuXHRcdHRoaXMuYnVpbGQoKTtcblx0fTtcblxuXHRUeXBlZC5wcm90b3R5cGUgPSB7XG5cblx0XHRjb25zdHJ1Y3RvcjogVHlwZWQsXG5cblx0XHRpbml0OiBmdW5jdGlvbigpIHtcblx0XHRcdC8vIGJlZ2luIHRoZSBsb29wIHcvIGZpcnN0IGN1cnJlbnQgc3RyaW5nIChnbG9iYWwgc2VsZi5zdHJpbmdzKVxuXHRcdFx0Ly8gY3VycmVudCBzdHJpbmcgd2lsbCBiZSBwYXNzZWQgYXMgYW4gYXJndW1lbnQgZWFjaCB0aW1lIGFmdGVyIHRoaXNcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdHNlbGYudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGZvciAodmFyIGk9MDtpPHNlbGYuc3RyaW5ncy5sZW5ndGg7KytpKSBzZWxmLnNlcXVlbmNlW2ldPWk7XG5cblx0XHRcdFx0Ly8gc2h1ZmZsZSB0aGUgYXJyYXkgaWYgdHJ1ZVxuXHRcdFx0XHRpZihzZWxmLnNodWZmbGUpIHNlbGYuc2VxdWVuY2UgPSBzZWxmLnNodWZmbGVBcnJheShzZWxmLnNlcXVlbmNlKTtcblxuXHRcdFx0XHQvLyBTdGFydCB0eXBpbmdcblx0XHRcdFx0c2VsZi50eXBld3JpdGUoc2VsZi5zdHJpbmdzW3NlbGYuc2VxdWVuY2Vbc2VsZi5hcnJheVBvc11dLCBzZWxmLnN0clBvcyk7XG5cdFx0XHR9LCBzZWxmLnN0YXJ0RGVsYXkpO1xuXHRcdH0sXG5cblx0XHRidWlsZDogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHQvLyBJbnNlcnQgY3Vyc29yXG5cdFx0XHRpZiAodGhpcy5zaG93Q3Vyc29yID09PSB0cnVlKSB7XG5cdFx0XHRcdHRoaXMuY3Vyc29yID0gJChcIjxzcGFuIGNsYXNzPVxcXCJ0eXBlZC1jdXJzb3JcXFwiPlwiICsgdGhpcy5jdXJzb3JDaGFyICsgXCI8L3NwYW4+XCIpO1xuXHRcdFx0XHR0aGlzLmVsLmFmdGVyKHRoaXMuY3Vyc29yKTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLnN0cmluZ3NFbGVtZW50KSB7XG5cdFx0XHRcdHRoaXMuc3RyaW5ncyA9IFtdO1xuXHRcdFx0XHR0aGlzLnN0cmluZ3NFbGVtZW50LmhpZGUoKTtcblx0XHRcdFx0Y29uc29sZS5sb2codGhpcy5zdHJpbmdzRWxlbWVudC5jaGlsZHJlbigpKTtcblx0XHRcdFx0dmFyIHN0cmluZ3MgPSB0aGlzLnN0cmluZ3NFbGVtZW50LmNoaWxkcmVuKCk7XG5cdFx0XHRcdCQuZWFjaChzdHJpbmdzLCBmdW5jdGlvbihrZXksIHZhbHVlKXtcblx0XHRcdFx0XHRzZWxmLnN0cmluZ3MucHVzaCgkKHZhbHVlKS5odG1sKCkpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdHRoaXMuaW5pdCgpO1xuXHRcdH0sXG5cblx0XHQvLyBwYXNzIGN1cnJlbnQgc3RyaW5nIHN0YXRlIHRvIGVhY2ggZnVuY3Rpb24sIHR5cGVzIDEgY2hhciBwZXIgY2FsbFxuXHRcdHR5cGV3cml0ZTogZnVuY3Rpb24oY3VyU3RyaW5nLCBjdXJTdHJQb3MpIHtcblx0XHRcdC8vIGV4aXQgd2hlbiBzdG9wcGVkXG5cdFx0XHRpZiAodGhpcy5zdG9wID09PSB0cnVlKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gdmFyeWluZyB2YWx1ZXMgZm9yIHNldFRpbWVvdXQgZHVyaW5nIHR5cGluZ1xuXHRcdFx0Ly8gY2FuJ3QgYmUgZ2xvYmFsIHNpbmNlIG51bWJlciBjaGFuZ2VzIGVhY2ggdGltZSBsb29wIGlzIGV4ZWN1dGVkXG5cdFx0XHR2YXIgaHVtYW5pemUgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAoMTAwIC0gMzApKSArIHRoaXMudHlwZVNwZWVkO1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHQvLyAtLS0tLS0tLS0tLS0tIG9wdGlvbmFsIC0tLS0tLS0tLS0tLS0gLy9cblx0XHRcdC8vIGJhY2twYWNlcyBhIGNlcnRhaW4gc3RyaW5nIGZhc3RlclxuXHRcdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cdFx0XHQvLyBpZiAoc2VsZi5hcnJheVBvcyA9PSAxKXtcblx0XHRcdC8vICBzZWxmLmJhY2tEZWxheSA9IDUwO1xuXHRcdFx0Ly8gfVxuXHRcdFx0Ly8gZWxzZXsgc2VsZi5iYWNrRGVsYXkgPSA1MDA7IH1cblxuXHRcdFx0Ly8gY29udGFpbiB0eXBpbmcgZnVuY3Rpb24gaW4gYSB0aW1lb3V0IGh1bWFuaXplJ2QgZGVsYXlcblx0XHRcdHNlbGYudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIGNoZWNrIGZvciBhbiBlc2NhcGUgY2hhcmFjdGVyIGJlZm9yZSBhIHBhdXNlIHZhbHVlXG5cdFx0XHRcdC8vIGZvcm1hdDogXFxeXFxkKyAuLiBlZzogXjEwMDAgLi4gc2hvdWxkIGJlIGFibGUgdG8gcHJpbnQgdGhlIF4gdG9vIHVzaW5nIF5eXG5cdFx0XHRcdC8vIHNpbmdsZSBeIGFyZSByZW1vdmVkIGZyb20gc3RyaW5nXG5cdFx0XHRcdHZhciBjaGFyUGF1c2UgPSAwO1xuXHRcdFx0XHR2YXIgc3Vic3RyID0gY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpO1xuXHRcdFx0XHRpZiAoc3Vic3RyLmNoYXJBdCgwKSA9PT0gJ14nKSB7XG5cdFx0XHRcdFx0dmFyIHNraXAgPSAxOyAvLyBza2lwIGF0bGVhc3QgMVxuXHRcdFx0XHRcdGlmICgvXlxcXlxcZCsvLnRlc3Qoc3Vic3RyKSkge1xuXHRcdFx0XHRcdFx0c3Vic3RyID0gL1xcZCsvLmV4ZWMoc3Vic3RyKVswXTtcblx0XHRcdFx0XHRcdHNraXAgKz0gc3Vic3RyLmxlbmd0aDtcblx0XHRcdFx0XHRcdGNoYXJQYXVzZSA9IHBhcnNlSW50KHN1YnN0cik7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gc3RyaXAgb3V0IHRoZSBlc2NhcGUgY2hhcmFjdGVyIGFuZCBwYXVzZSB2YWx1ZSBzbyB0aGV5J3JlIG5vdCBwcmludGVkXG5cdFx0XHRcdFx0Y3VyU3RyaW5nID0gY3VyU3RyaW5nLnN1YnN0cmluZygwLCBjdXJTdHJQb3MpICsgY3VyU3RyaW5nLnN1YnN0cmluZyhjdXJTdHJQb3MgKyBza2lwKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChzZWxmLmNvbnRlbnRUeXBlID09PSAnaHRtbCcpIHtcblx0XHRcdFx0XHQvLyBza2lwIG92ZXIgaHRtbCB0YWdzIHdoaWxlIHR5cGluZ1xuXHRcdFx0XHRcdHZhciBjdXJDaGFyID0gY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpLmNoYXJBdCgwKVxuXHRcdFx0XHRcdGlmIChjdXJDaGFyID09PSAnPCcgfHwgY3VyQ2hhciA9PT0gJyYnKSB7XG5cdFx0XHRcdFx0XHR2YXIgdGFnID0gJyc7XG5cdFx0XHRcdFx0XHR2YXIgZW5kVGFnID0gJyc7XG5cdFx0XHRcdFx0XHRpZiAoY3VyQ2hhciA9PT0gJzwnKSB7XG5cdFx0XHRcdFx0XHRcdGVuZFRhZyA9ICc+J1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGVuZFRhZyA9ICc7J1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0d2hpbGUgKGN1clN0cmluZy5zdWJzdHIoY3VyU3RyUG9zICsgMSkuY2hhckF0KDApICE9PSBlbmRUYWcpIHtcblx0XHRcdFx0XHRcdFx0dGFnICs9IGN1clN0cmluZy5zdWJzdHIoY3VyU3RyUG9zKS5jaGFyQXQoMCk7XG5cdFx0XHRcdFx0XHRcdGN1clN0clBvcysrO1xuXHRcdFx0XHRcdFx0XHRpZiAoY3VyU3RyUG9zICsgMSA+IGN1clN0cmluZy5sZW5ndGgpIHsgYnJlYWs7IH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGN1clN0clBvcysrO1xuXHRcdFx0XHRcdFx0dGFnICs9IGVuZFRhZztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyB0aW1lb3V0IGZvciBhbnkgcGF1c2UgYWZ0ZXIgYSBjaGFyYWN0ZXJcblx0XHRcdFx0c2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoY3VyU3RyUG9zID09PSBjdXJTdHJpbmcubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQvLyBmaXJlcyBjYWxsYmFjayBmdW5jdGlvblxuXHRcdFx0XHRcdFx0c2VsZi5vcHRpb25zLm9uU3RyaW5nVHlwZWQoc2VsZi5hcnJheVBvcyk7XG5cblx0XHRcdFx0XHRcdC8vIGlzIHRoaXMgdGhlIGZpbmFsIHN0cmluZ1xuXHRcdFx0XHRcdFx0aWYgKHNlbGYuYXJyYXlQb3MgPT09IHNlbGYuc3RyaW5ncy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0XHRcdC8vIGFuaW1hdGlvbiB0aGF0IG9jY3VycyBvbiB0aGUgbGFzdCB0eXBlZCBzdHJpbmdcblx0XHRcdFx0XHRcdFx0c2VsZi5vcHRpb25zLmNhbGxiYWNrKCk7XG5cblx0XHRcdFx0XHRcdFx0c2VsZi5jdXJMb29wKys7XG5cblx0XHRcdFx0XHRcdFx0Ly8gcXVpdCBpZiB3ZSB3b250IGxvb3AgYmFja1xuXHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5sb29wID09PSBmYWxzZSB8fCBzZWxmLmN1ckxvb3AgPT09IHNlbGYubG9vcENvdW50KVxuXHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0c2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5iYWNrc3BhY2UoY3VyU3RyaW5nLCBjdXJTdHJQb3MpO1xuXHRcdFx0XHRcdFx0fSwgc2VsZi5iYWNrRGVsYXkpO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0LyogY2FsbCBiZWZvcmUgZnVuY3Rpb25zIGlmIGFwcGxpY2FibGUgKi9cblx0XHRcdFx0XHRcdGlmIChjdXJTdHJQb3MgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5vcHRpb25zLnByZVN0cmluZ1R5cGVkKHNlbGYuYXJyYXlQb3MpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBzdGFydCB0eXBpbmcgZWFjaCBuZXcgY2hhciBpbnRvIGV4aXN0aW5nIHN0cmluZ1xuXHRcdFx0XHRcdFx0Ly8gY3VyU3RyaW5nOiBhcmcsIHNlbGYuZWwuaHRtbDogb3JpZ2luYWwgdGV4dCBpbnNpZGUgZWxlbWVudFxuXHRcdFx0XHRcdFx0dmFyIG5leHRTdHJpbmcgPSBjdXJTdHJpbmcuc3Vic3RyKDAsIGN1clN0clBvcyArIDEpO1xuXHRcdFx0XHRcdFx0aWYgKHNlbGYuYXR0cikge1xuXHRcdFx0XHRcdFx0XHRzZWxmLmVsLmF0dHIoc2VsZi5hdHRyLCBuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGlmIChzZWxmLmlzSW5wdXQpIHtcblx0XHRcdFx0XHRcdFx0XHRzZWxmLmVsLnZhbChuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChzZWxmLmNvbnRlbnRUeXBlID09PSAnaHRtbCcpIHtcblx0XHRcdFx0XHRcdFx0XHRzZWxmLmVsLmh0bWwobmV4dFN0cmluZyk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5lbC50ZXh0KG5leHRTdHJpbmcpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIGFkZCBjaGFyYWN0ZXJzIG9uZSBieSBvbmVcblx0XHRcdFx0XHRcdGN1clN0clBvcysrO1xuXHRcdFx0XHRcdFx0Ly8gbG9vcCB0aGUgZnVuY3Rpb25cblx0XHRcdFx0XHRcdHNlbGYudHlwZXdyaXRlKGN1clN0cmluZywgY3VyU3RyUG9zKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gZW5kIG9mIGNoYXJhY3RlciBwYXVzZVxuXHRcdFx0XHR9LCBjaGFyUGF1c2UpO1xuXG5cdFx0XHRcdC8vIGh1bWFuaXplZCB2YWx1ZSBmb3IgdHlwaW5nXG5cdFx0XHR9LCBodW1hbml6ZSk7XG5cblx0XHR9LFxuXG5cdFx0YmFja3NwYWNlOiBmdW5jdGlvbihjdXJTdHJpbmcsIGN1clN0clBvcykge1xuXHRcdFx0Ly8gZXhpdCB3aGVuIHN0b3BwZWRcblx0XHRcdGlmICh0aGlzLnN0b3AgPT09IHRydWUpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyB2YXJ5aW5nIHZhbHVlcyBmb3Igc2V0VGltZW91dCBkdXJpbmcgdHlwaW5nXG5cdFx0XHQvLyBjYW4ndCBiZSBnbG9iYWwgc2luY2UgbnVtYmVyIGNoYW5nZXMgZWFjaCB0aW1lIGxvb3AgaXMgZXhlY3V0ZWRcblx0XHRcdHZhciBodW1hbml6ZSA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqICgxMDAgLSAzMCkpICsgdGhpcy5iYWNrU3BlZWQ7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHNlbGYudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Ly8gLS0tLS0gdGhpcyBwYXJ0IGlzIG9wdGlvbmFsIC0tLS0tIC8vXG5cdFx0XHRcdC8vIGNoZWNrIHN0cmluZyBhcnJheSBwb3NpdGlvblxuXHRcdFx0XHQvLyBvbiB0aGUgZmlyc3Qgc3RyaW5nLCBvbmx5IGRlbGV0ZSBvbmUgd29yZFxuXHRcdFx0XHQvLyB0aGUgc3RvcE51bSBhY3R1YWxseSByZXByZXNlbnRzIHRoZSBhbW91bnQgb2YgY2hhcnMgdG9cblx0XHRcdFx0Ly8ga2VlcCBpbiB0aGUgY3VycmVudCBzdHJpbmcuIEluIG15IGNhc2UgaXQncyAxNC5cblx0XHRcdFx0Ly8gaWYgKHNlbGYuYXJyYXlQb3MgPT0gMSl7XG5cdFx0XHRcdC8vICBzZWxmLnN0b3BOdW0gPSAxNDtcblx0XHRcdFx0Ly8gfVxuXHRcdFx0XHQvL2V2ZXJ5IG90aGVyIHRpbWUsIGRlbGV0ZSB0aGUgd2hvbGUgdHlwZWQgc3RyaW5nXG5cdFx0XHRcdC8vIGVsc2V7XG5cdFx0XHRcdC8vICBzZWxmLnN0b3BOdW0gPSAwO1xuXHRcdFx0XHQvLyB9XG5cblx0XHRcdFx0aWYgKHNlbGYuY29udGVudFR5cGUgPT09ICdodG1sJykge1xuXHRcdFx0XHRcdC8vIHNraXAgb3ZlciBodG1sIHRhZ3Mgd2hpbGUgYmFja3NwYWNpbmdcblx0XHRcdFx0XHRpZiAoY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpLmNoYXJBdCgwKSA9PT0gJz4nKSB7XG5cdFx0XHRcdFx0XHR2YXIgdGFnID0gJyc7XG5cdFx0XHRcdFx0XHR3aGlsZSAoY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MgLSAxKS5jaGFyQXQoMCkgIT09ICc8Jykge1xuXHRcdFx0XHRcdFx0XHR0YWcgLT0gY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpLmNoYXJBdCgwKTtcblx0XHRcdFx0XHRcdFx0Y3VyU3RyUG9zLS07XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJTdHJQb3MgPCAwKSB7IGJyZWFrOyB9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjdXJTdHJQb3MtLTtcblx0XHRcdFx0XHRcdHRhZyArPSAnPCc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gLS0tLS0gY29udGludWUgaW1wb3J0YW50IHN0dWZmIC0tLS0tIC8vXG5cdFx0XHRcdC8vIHJlcGxhY2UgdGV4dCB3aXRoIGJhc2UgdGV4dCArIHR5cGVkIGNoYXJhY3RlcnNcblx0XHRcdFx0dmFyIG5leHRTdHJpbmcgPSBjdXJTdHJpbmcuc3Vic3RyKDAsIGN1clN0clBvcyk7XG5cdFx0XHRcdGlmIChzZWxmLmF0dHIpIHtcblx0XHRcdFx0XHRzZWxmLmVsLmF0dHIoc2VsZi5hdHRyLCBuZXh0U3RyaW5nKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoc2VsZi5pc0lucHV0KSB7XG5cdFx0XHRcdFx0XHRzZWxmLmVsLnZhbChuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHNlbGYuY29udGVudFR5cGUgPT09ICdodG1sJykge1xuXHRcdFx0XHRcdFx0c2VsZi5lbC5odG1sKG5leHRTdHJpbmcpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzZWxmLmVsLnRleHQobmV4dFN0cmluZyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaWYgdGhlIG51bWJlciAoaWQgb2YgY2hhcmFjdGVyIGluIGN1cnJlbnQgc3RyaW5nKSBpc1xuXHRcdFx0XHQvLyBsZXNzIHRoYW4gdGhlIHN0b3AgbnVtYmVyLCBrZWVwIGdvaW5nXG5cdFx0XHRcdGlmIChjdXJTdHJQb3MgPiBzZWxmLnN0b3BOdW0pIHtcblx0XHRcdFx0XHQvLyBzdWJ0cmFjdCBjaGFyYWN0ZXJzIG9uZSBieSBvbmVcblx0XHRcdFx0XHRjdXJTdHJQb3MtLTtcblx0XHRcdFx0XHQvLyBsb29wIHRoZSBmdW5jdGlvblxuXHRcdFx0XHRcdHNlbGYuYmFja3NwYWNlKGN1clN0cmluZywgY3VyU3RyUG9zKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBpZiB0aGUgc3RvcCBudW1iZXIgaGFzIGJlZW4gcmVhY2hlZCwgaW5jcmVhc2Vcblx0XHRcdFx0Ly8gYXJyYXkgcG9zaXRpb24gdG8gbmV4dCBzdHJpbmdcblx0XHRcdFx0ZWxzZSBpZiAoY3VyU3RyUG9zIDw9IHNlbGYuc3RvcE51bSkge1xuXHRcdFx0XHRcdHNlbGYuYXJyYXlQb3MrKztcblxuXHRcdFx0XHRcdGlmIChzZWxmLmFycmF5UG9zID09PSBzZWxmLnN0cmluZ3MubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRzZWxmLmFycmF5UG9zID0gMDtcblxuXHRcdFx0XHRcdFx0Ly8gU2h1ZmZsZSBzZXF1ZW5jZSBhZ2FpblxuXHRcdFx0XHRcdFx0aWYoc2VsZi5zaHVmZmxlKSBzZWxmLnNlcXVlbmNlID0gc2VsZi5zaHVmZmxlQXJyYXkoc2VsZi5zZXF1ZW5jZSk7XG5cblx0XHRcdFx0XHRcdHNlbGYuaW5pdCgpO1xuXHRcdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdFx0c2VsZi50eXBld3JpdGUoc2VsZi5zdHJpbmdzW3NlbGYuc2VxdWVuY2Vbc2VsZi5hcnJheVBvc11dLCBjdXJTdHJQb3MpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaHVtYW5pemVkIHZhbHVlIGZvciB0eXBpbmdcblx0XHRcdH0sIGh1bWFuaXplKTtcblxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogU2h1ZmZsZXMgdGhlIG51bWJlcnMgaW4gdGhlIGdpdmVuIGFycmF5LlxuXHRcdCAqIEBwYXJhbSB7QXJyYXl9IGFycmF5XG5cdFx0ICogQHJldHVybnMge0FycmF5fVxuXHRcdCAqL1xuXHRcdHNodWZmbGVBcnJheTogZnVuY3Rpb24oYXJyYXkpIHtcblx0XHRcdHZhciB0bXAsIGN1cnJlbnQsIHRvcCA9IGFycmF5Lmxlbmd0aDtcblx0XHRcdGlmKHRvcCkgd2hpbGUoLS10b3ApIHtcblx0XHRcdFx0Y3VycmVudCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh0b3AgKyAxKSk7XG5cdFx0XHRcdHRtcCA9IGFycmF5W2N1cnJlbnRdO1xuXHRcdFx0XHRhcnJheVtjdXJyZW50XSA9IGFycmF5W3RvcF07XG5cdFx0XHRcdGFycmF5W3RvcF0gPSB0bXA7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gYXJyYXk7XG5cdFx0fSxcblxuXHRcdC8vIFN0YXJ0ICYgU3RvcCBjdXJyZW50bHkgbm90IHdvcmtpbmdcblxuXHRcdC8vICwgc3RvcDogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gICAgIHZhciBzZWxmID0gdGhpcztcblxuXHRcdC8vICAgICBzZWxmLnN0b3AgPSB0cnVlO1xuXHRcdC8vICAgICBjbGVhckludGVydmFsKHNlbGYudGltZW91dCk7XG5cdFx0Ly8gfVxuXG5cdFx0Ly8gLCBzdGFydDogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gICAgIHZhciBzZWxmID0gdGhpcztcblx0XHQvLyAgICAgaWYoc2VsZi5zdG9wID09PSBmYWxzZSlcblx0XHQvLyAgICAgICAgcmV0dXJuO1xuXG5cdFx0Ly8gICAgIHRoaXMuc3RvcCA9IGZhbHNlO1xuXHRcdC8vICAgICB0aGlzLmluaXQoKTtcblx0XHQvLyB9XG5cblx0XHQvLyBSZXNldCBhbmQgcmVidWlsZCB0aGUgZWxlbWVudFxuXHRcdHJlc2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lb3V0KTtcblx0XHRcdHZhciBpZCA9IHRoaXMuZWwuYXR0cignaWQnKTtcblx0XHRcdHRoaXMuZWwuZW1wdHkoKTtcblx0XHRcdGlmICh0eXBlb2YgdGhpcy5jdXJzb3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yLnJlbW92ZSgpO1xuICAgICAgfVxuXHRcdFx0dGhpcy5zdHJQb3MgPSAwO1xuXHRcdFx0dGhpcy5hcnJheVBvcyA9IDA7XG5cdFx0XHR0aGlzLmN1ckxvb3AgPSAwO1xuXHRcdFx0Ly8gU2VuZCB0aGUgY2FsbGJhY2tcblx0XHRcdHRoaXMub3B0aW9ucy5yZXNldENhbGxiYWNrKCk7XG5cdFx0fVxuXG5cdH07XG5cblx0JC5mbi50eXBlZCA9IGZ1bmN0aW9uKG9wdGlvbikge1xuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgJHRoaXMgPSAkKHRoaXMpLFxuXHRcdFx0XHRkYXRhID0gJHRoaXMuZGF0YSgndHlwZWQnKSxcblx0XHRcdFx0b3B0aW9ucyA9IHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uO1xuXHRcdFx0aWYgKGRhdGEpIHsgZGF0YS5yZXNldCgpOyB9XG5cdFx0XHQkdGhpcy5kYXRhKCd0eXBlZCcsIChkYXRhID0gbmV3IFR5cGVkKHRoaXMsIG9wdGlvbnMpKSk7XG5cdFx0XHRpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dKCk7XG5cdFx0fSk7XG5cdH07XG5cblx0JC5mbi50eXBlZC5kZWZhdWx0cyA9IHtcblx0XHRzdHJpbmdzOiBbXCJUaGVzZSBhcmUgdGhlIGRlZmF1bHQgdmFsdWVzLi4uXCIsIFwiWW91IGtub3cgd2hhdCB5b3Ugc2hvdWxkIGRvP1wiLCBcIlVzZSB5b3VyIG93biFcIiwgXCJIYXZlIGEgZ3JlYXQgZGF5IVwiXSxcblx0XHRzdHJpbmdzRWxlbWVudDogbnVsbCxcblx0XHQvLyB0eXBpbmcgc3BlZWRcblx0XHR0eXBlU3BlZWQ6IDAsXG5cdFx0Ly8gdGltZSBiZWZvcmUgdHlwaW5nIHN0YXJ0c1xuXHRcdHN0YXJ0RGVsYXk6IDAsXG5cdFx0Ly8gYmFja3NwYWNpbmcgc3BlZWRcblx0XHRiYWNrU3BlZWQ6IDAsXG5cdFx0Ly8gc2h1ZmZsZSB0aGUgc3RyaW5nc1xuXHRcdHNodWZmbGU6IGZhbHNlLFxuXHRcdC8vIHRpbWUgYmVmb3JlIGJhY2tzcGFjaW5nXG5cdFx0YmFja0RlbGF5OiA1MDAsXG5cdFx0Ly8gbG9vcFxuXHRcdGxvb3A6IGZhbHNlLFxuXHRcdC8vIGZhbHNlID0gaW5maW5pdGVcblx0XHRsb29wQ291bnQ6IGZhbHNlLFxuXHRcdC8vIHNob3cgY3Vyc29yXG5cdFx0c2hvd0N1cnNvcjogdHJ1ZSxcblx0XHQvLyBjaGFyYWN0ZXIgZm9yIGN1cnNvclxuXHRcdGN1cnNvckNoYXI6IFwifFwiLFxuXHRcdC8vIGF0dHJpYnV0ZSB0byB0eXBlIChudWxsID09IHRleHQpXG5cdFx0YXR0cjogbnVsbCxcblx0XHQvLyBlaXRoZXIgaHRtbCBvciB0ZXh0XG5cdFx0Y29udGVudFR5cGU6ICdodG1sJyxcblx0XHQvLyBjYWxsIHdoZW4gZG9uZSBjYWxsYmFjayBmdW5jdGlvblxuXHRcdGNhbGxiYWNrOiBmdW5jdGlvbigpIHt9LFxuXHRcdC8vIHN0YXJ0aW5nIGNhbGxiYWNrIGZ1bmN0aW9uIGJlZm9yZSBlYWNoIHN0cmluZ1xuXHRcdHByZVN0cmluZ1R5cGVkOiBmdW5jdGlvbigpIHt9LFxuXHRcdC8vY2FsbGJhY2sgZm9yIGV2ZXJ5IHR5cGVkIHN0cmluZ1xuXHRcdG9uU3RyaW5nVHlwZWQ6IGZ1bmN0aW9uKCkge30sXG5cdFx0Ly8gY2FsbGJhY2sgZm9yIHJlc2V0XG5cdFx0cmVzZXRDYWxsYmFjazogZnVuY3Rpb24oKSB7fVxuXHR9O1xuXG5cbn0od2luZG93LmpRdWVyeSk7XG4iXX0=
